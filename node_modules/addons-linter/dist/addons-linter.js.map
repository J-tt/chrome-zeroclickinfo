{"version":3,"sources":["webpack:///webpack/bootstrap f1b06a2f75bba2f887f3","webpack:///./src/main.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/cli.js","webpack:///external \"yargs\"","webpack:///./src/logger.js","webpack:///external \"bunyan\"","webpack:///./src/utils.js","webpack:///external \"url\"","webpack:///external \"semver\"","webpack:///./src/const.js","webpack:///./package.json","webpack:///./src/linter.js","webpack:///external \"path\"","webpack:///external \"columnify\"","webpack:///external \"chalk\"","webpack:///external \"dispensary\"","webpack:///./src/io/utils.js","webpack:///external \"fs\"","webpack:///external \"es6-promisify\"","webpack:///./src/libraries.js","webpack:///./src/messages/index.js","webpack:///./src/messages/chromemanifest.js","webpack:///./src/messages/css.js","webpack:///./src/messages/html.js","webpack:///./src/messages/javascript.js","webpack:///./src/messages/json.js","webpack:///./src/messages/layout.js","webpack:///./src/messages/manifestjson.js","webpack:///./src/messages/rdf.js","webpack:///./src/collector.js","webpack:///./src/message.js","webpack:///./src/parsers/installrdf.js","webpack:///./src/parsers/manifestjson.js","webpack:///external \"relaxed-json\"","webpack:///./src/schema/validator.js","webpack:///external \"ajv\"","webpack:///./src/schema/formats.js","webpack:///external \"url-parse\"","webpack:///./src/schema/manifest-schema.json","webpack:///./src/parsers/json.js","webpack:///external \"esprima\"","webpack:///./src/scanners/binary.js","webpack:///./src/scanners/base.js","webpack:///./src/scanners/chromemanifest.js","webpack:///./src/parsers/chromemanifest.js","webpack:///external \"readline\"","webpack:///./src/rules/chromemanifest/index.js","webpack:///./src/rules/chromemanifest/categories.js","webpack:///./src/scanners/css.js","webpack:///./src/rules/css/index.js","webpack:///./src/rules/css/invalidNesting.js","webpack:///external \"postcss\"","webpack:///./src/scanners/filename.js","webpack:///./src/scanners/html.js","webpack:///external \"cheerio\"","webpack:///./src/rules/html/index.js","webpack:///./src/rules/html/ensureRequiredAttributes.js","webpack:///./src/scanners/javascript.js","webpack:///external \"eslint\"","webpack:///./src/rules/javascript/index.js","webpack:///./src/rules/javascript/banned_identifiers.js","webpack:///./src/rules/javascript/deprecated_entities.js","webpack:///./src/rules/javascript/eval_string_arg.js","webpack:///./src/rules/javascript/event_listener_fourth.js","webpack:///./src/rules/javascript/global_require_arg.js","webpack:///./src/rules/javascript/init_null_arg.js","webpack:///./src/rules/javascript/low_level_module.js","webpack:///./src/rules/javascript/mozindexeddb.js","webpack:///./src/rules/javascript/mozindexeddb_property.js","webpack:///./src/rules/javascript/only_prefs_in_defaults.js","webpack:///./src/rules/javascript/opendialog_nonlit_uri.js","webpack:///./src/rules/javascript/opendialog_remote_uri.js","webpack:///./src/rules/javascript/shallow_wrapper.js","webpack:///./src/rules/javascript/webextension_api.js","webpack:///./src/rules/javascript/widget_module.js","webpack:///./src/scanners/json.js","webpack:///./src/scanners/rdf.js","webpack:///external \"xmldom\"","webpack:///./src/rules/rdf/index.js","webpack:///./src/rules/rdf/mustNotExist.js","webpack:///./src/io/index.js","webpack:///./src/io/crx.js","webpack:///external \"crx-parser\"","webpack:///external \"yauzl\"","webpack:///./src/io/xpi.js","webpack:///external \"strip-bom-stream\"","webpack:///external \"first-chunk-stream\"","webpack:///./src/io/base.js","webpack:///./src/io/directory.js","webpack:///external \"babel-polyfill\""],"names":["isRunFromCLI","createInstance","global","_babelPolyfill","require","_module","module","config","useCLI","argv","runAsBinary","level","logLevel","info","getConfig","terminalWidth","error","Error","usage","option","describe","type","default","choices","alias","demand","help","wrap","_process","process","stdout","columns","width","createLogger","env","LOG_LEVEL","logLevels","Object","keys","levelFromName","indexOf","join","name","stream","singleLineString","getRootExpression","getNodeReference","getVariable","gettext","checkMinNodeVersion","getPackageTypeAsString","ignorePrivateFunctions","ensureFilenameExists","isLocalUrl","apiToMessage","strings","output","vars","i","length","lines","split","map","line","replace","trim","node","root","callee","parent","object","context","variables","getScope","scopeVar","variable","defs","body","occurances","lastAssignment","Array","occurance","declarations","init","expression","right","result","forEach","str","minVersion","Promise","resolve","gte","version","numericPackageType","packageType","parseInt","list","filteredList","functionName","startsWith","filename","urlInput","parsedUrl","parse","protocol","path","includes","string","toUpperCase","substr","DEFLATE_COMPRESSION","NO_COMPRESSION","ESLINT_ERROR","ESLINT_WARNING","ESLINT_RULE_MAPPING","banned_identifiers","deprecated_entities","eval_string_arg","event_listener_fourth","global_require_arg","init_null_arg","low_level_module","mozindexeddb","mozindexeddb_property","only_prefs_in_defaults","opendialog_nonlit_uri","opendialog_remote_uri","shallow_wrapper","webextension_api","widget_module","VALIDATION_ERROR","VALIDATION_NOTICE","VALIDATION_WARNING","ESLINT_TYPES","MESSAGE_TYPES","RDF_DEFAULT_NAMESPACE","RDF_UNALLOWED_TAGS","RDF_UNALLOWED_IF_LISTED_TAGS","RDF_OBSOLETE_TAGS","HTML_TAGS_WITH_REQUIRED_ATTRIBUTES","prefwindow","PACKAGE_ANY","PACKAGE_EXTENSION","PACKAGE_THEME","PACKAGE_DICTIONARY","PACKAGE_LANGPACK","PACKAGE_SEARCHPROV","PACKAGE_MULTI","PACKAGE_SUBPACKAGE","PACKAGE_TYPES","ADDON_TYPE_MAP","LOCAL_PROTOCOLS","BANNED_IDENTIFIERS","LOW_LEVEL_MODULES","INSTALL_RDF","MANIFEST_JSON","CHROME_MANIFEST","VALID_MANIFEST_VERSION","MAX_FILE_SIZE_MB","MAX_FILE_SIZE_TO_PARSE_MB","HIDDEN_FILE_REGEX","FLAGGED_FILE_REGEX","ALREADY_SIGNED_REGEX","FLAGGED_FILE_EXTENSION_REGEX","FLAGGED_FILE_MAGIC_NUMBERS","FLAGGED_FILE_MAGIC_NUMBERS_LENGTH","DEPRECATED_APIS","constants","messages","Linter","packagePath","_","io","chalk","constructor","enabled","boring","collector","addonMetadata","red","yellow","blue","err","_console","console","message","addError","DUPLICATE_XPI_ENTRY","print","BAD_ZIPFILE","stack","log","toJSON","pretty","textOutput","input","_JSON","JSON","args","push","stringify","apply","_terminalWidth","maxColumns","out","summary","showHeaders","minWidth","messageType","outputConfig","code","dataTransform","value","colorize","headingTransform","maxWidth","description","file","column","outputColumns","columnSplitter","_log","debug","getFiles","then","files","hasOwnProperty","warn","MULITPLE_MANIFESTS","getFileAsString","rdfString","rdfScanner","getContents","xmlDoc","getMetadata","json","manifestParser","addNotice","TYPE_NO_MANIFEST_JSON","TYPE_NO_INSTALL_RDF","TYPE_NOT_DETERMINED","filepath","_lstatPromise","invalidMessage","stats","isFile","isDirectory","catch","promises","scanFile","all","match","ScannerClass","getScanner","getFile","fileResultType","fileData","fileSize","size","uncompressedSize","maxSize","filesizeError","assign","FILE_TOO_LARGE","scanner","scan","_addMessage","_Crx","_Directory","_Xpi","checkFileExists","endsWith","setScanFileCallback","shouldScanFile","getAddonMetadata","markSpecialFiles","metadata","metadataObject","hasErrors","errors","deps","extractMetadata","filesWithoutJSLibraries","filter","jsLibs","scanFiles","exit","handleError","_markEmptyFiles","_markJSLibs","_markBannedLibs","_unadvisedLibraries","pathToFile","BANNED_LIBRARY","addWarning","UNADVISED_LIBRARY","emptyFiles","dispensary","getFilesByExt","hashResult","KNOWN_LIBRARY","count","walkPromise","lstatPromise","readdirPromise","curPath","shouldIncludePath","basePath","walk","stat","relPath","relative","fileName","BANNED_LIBRARIES","UNADVISED_LIBRARIES","DANGEROUS_CATEGORY","legacyCode","signing_help","CSS_SYNTAX_ERROR","INVALID_SELECTOR_NESTING","_tagRequiresAttribute","tagName","attribute","PREFWINDOW_REQUIRES_ID","_nonLiteralUri","_methodPassedRemoteUri","_bannedIdentifier","JS_SYNTAX_ERROR","EVENT_LISTENER_FOURTH","MOZINDEXEDDB","MOZINDEXEDDB_PROPERTY","SHALLOW_WRAPPER","method","OPENDIALOG_REMOTE_URI","OPENDIALOG_NONLIT_URI","_BANNED_IDENTIFIERS_MAP","newThread","processNextEvent","BANNED_NEWTHREAD","BANNED_PROCESSNEXTEVENT","EVAL_STRING_ARG","DEPREC_SDK_MOD_WIDGET","UNEXPECTED_GLOGAL_ARG","ONLY_PREFS_IN_DEFAULTS","NO_DOCUMENT_WRITE","NSI_DNS_SERVICE_RESOLVE","INIT_NULL_ARG","NSI_SOUND_PLAY","TAB_URL_OVERRIDE","LOW_LEVEL_MODULE","deprecatedAPI","api","APP_GETDETAILS","EXT_ONREQUEST","EXT_ONREQUESTEXTERNAL","EXT_SENDREQUEST","TABS_GETALLINWINDOW","TABS_GETSELECTED","TABS_ONACTIVECHANGED","TABS_ONSELECTIONCHANGED","TABS_SENDREQUEST","JSON_INVALID","JSON_BLOCK_COMMENTS","JSON_DUPLICATE_KEY","HIDDEN_FILE","FLAGGED_FILE","FLAGGED_FILE_EXTENSION","FLAGGED_FILE_TYPE","ALREADY_SIGNED","manifestPropMissing","MANIFEST_FIELD_REQUIRED","MANIFEST_FIELD_INVALID","MANIFEST_BAD_PERMISSION","MANIFEST_PERMISSIONS","MANIFEST_VERSION_INVALID","MANIFEST_CSP","PROP_NAME_INVALID","PROP_VERSION_INVALID","PROP_VERSION_TOOLKIT_ONLY","MANIFEST_UPDATE_URL","MANIFEST_UNUSED_UPDATE","property","PROP_NAME_MISSING","PROP_VERSION_MISSING","rdfTopLevelTagMissing","_tagNotAllowed","_tagNotAllowedIfTag","otherTag","_tagObsolete","RDF_GUID_TOO_LONG","TAG_NOT_ALLOWED_HIDDEN","TAG_NOT_ALLOWED_UPDATEKEY","TAG_NOT_ALLOWED_UPDATEURL","TAG_OBSOLETE_FILE","TAG_OBSOLETE_REQUIRES","TAG_OBSOLETE_SKIN","RDF_TYPE_INVALID","RDF_TYPE_MISSING","RDF_NAME_MISSING","RDF_VERSION_MISSING","RDF_ID_MISSING","Collector","opts","_Message","len","props","requiredProps","Message","data","prop","missingProps","_type","InstallRdfParser","namespace","guid","_getGUID","_getName","_getAddonType","_getVersion","restartless","_getIsBootstrapped","nodeList","prototype","slice","call","descriptionTag","_getDescriptionNode","_makeArray","childNodes","nodeName","tag","nodes","_getTopLevelNodesByTag","rdfNodes","getElementsByTagName","rdfNode","_getRDFNode","descriptionNodes","firstChild","nodeValue","addonType","_getTopLevelNodeByTag","typeValue","_getNodeValue","ManifestJSONParser","jsonString","RelaxedJSON","selfHosted","parsedJSON","isValid","manifestVersion","_validate","baseObject","lowerCaseMessage","toLowerCase","overrides","dataPath","keyword","warnings","errorsFound","errorLookup","content_security_policy","update_url","applications","gecko","id","e","getAddonId","manifest_version","schemaObject","validator","allErrors","errorDataPath","jsonPointers","verbose","addFormat","compile","isToolkitVersionString","isValidVersionString","isRelativeURL","VALIDNUMRX","TOOLKIT_VERSION_REGEX","test","parts","part","Number","isNaN","url","parsed","href","JSONParser","_jsonString","originalError","manifestString","tokens","tokenize","comment","reduce","token","errorData","_checkForDuplicateKeys","duplicate","tolerant","BinaryScanner","buffer","values","v","linterMessages","contents","entry","check","BaseScanner","options","_defaultRules","_parsedContent","_rulesProcessed","_rules","reject","rules","rule","ruleResults","concat","_getContents","ChromeManifestScanner","_ChromeManifestParser","cmParser","ChromeManifestParser","triples","subject","predicate","filteredTriples","triple","searches","key","val","undefined","lineCount","rl","createInterface","on","checkCategories","DANGEROUS_CATEGORIES","validationMessages","postcss","CSSScanner","cssNode","cssInstruction","cssOptions","startLine","source","start","startColumn","mediaCssNode","processCode","ast","_cssParser","rootNode","from","reason","invalidNesting","messageList","FilenameScanner","HTMLScanner","htmlDoc","load","ensureRequiredAttributes","_ensureAttributesInTag","$","attributes","each","element","attributeName","errorCode","attr","sourceCode","JavaScriptScanner","_ESLint","_ruleMapping","_messages","eslint","linter","defineRule","report","verify","es6","ignore","settings","allowInlineConfig","fatal","messageObj","severity","Identifier","MemberExpression","DEPRECATED_ENTITIES","CallExpression","referenceNode","referenceObject","entity","arguments","originalDef","wantsUntrusted","firstArg","pathVar","nodeReference","nodeObject","arg","requiresLowLevelMod","getFilename","uri","_testForShallowWrapper","NewExpression","WIDGET_PATH","requiresWidgetMod","JSONScanner","jsonParser","RDFScanner","DOMParser","errorHandler","parseFromString","mustNotExist","_checkForTags","bannedTags","addonIsListed","getElementsByTagNameNS","tags","prefix","item","Crx","filePath","zipLib","_parseCRX","_fs","fs","parseCRX","readFile","fromBuffer","zipFile","_onEventsSubscribed","open","zipfile","handleEntry","Xpi","entries","wantedFiles","maxSizeBytes","checkPath","openReadStream","readStream","pipe","getFileAsStream","fileStream","fileString","chunk","chunkLength","enc","IOBase","packageOrDirPath","callback","fileStreamType","getChunkAsBuffer","extensions","ext","filesObject","Directory","_walkPromise","relativeFilePath","absoluteDirPath","getPath","flags","encoding","autoClose","content","read","toString"],"mappings":"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;AAEA,KAAMC,4CAAkB,CAC7B,gBAD6B,EAE7B,qBAF6B,EAG7B,6BAH6B,EAI7B,uBAJ6B,EAK7B,qBAL6B,EAM7B,kBAN6B,EAO7B,sBAP6B,EAQ7B,yBAR6B,EAS7B,kBAT6B,CAAxB,C;;;;;;AC/IP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;;;;;;;;;ACvFA;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;AACA;;AACA;;KAAYC,S;;AAEZ;;AACA;;KAAYC,Q;;AACZ;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;KAGqBC,M;AAEnB,mBAAYnK,MAAZ,EAAoB;AAAA;;AAClB,UAAKA,MAAL,GAAcA,MAAd;AACA,UAAKoK,WAAL,GAAmBpK,OAAOqK,CAAP,CAAS,CAAT,CAAnB;AACA,UAAKC,EAAL;AACA,UAAKC,KAAL,GAAa,IAAI,gBAAMC,WAAV,CACX,EAACC,SAAS,CAAC,KAAKzK,MAAL,CAAY0K,MAAvB,EADW,CAAb;AAEA,UAAKC,SAAL,GAAiB,yBAAjB;AACA,UAAKC,aAAL,GAAqB,IAArB;AACD;;;;8BAEQ9J,I,EAAM;AACb,eAAQA,IAAR;AACE,cAAKmJ,UAAUrC,gBAAf;AACE,kBAAO,KAAK2C,KA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sBA,OAAO,CAA7B,IAAkCA,OAAO,KAA7C,EAAoD;AAClD,gBAAO,KAAP;AACD;AACF;AA1B2C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA2B5C,UAAO,IAAP;AACD;;AAEM,UAASL,aAAT,CAAuBQ,GAAvB,EAA4B;AACjC,OAAIC,SAAS,wBAAMD,GAAN,CAAb;;AAEA,OAAIC,OAAOhY,QAAP,KAAoB,EAApB,IAA0BgY,OAAOC,IAAP,CAAYtY,UAAZ,CAAuB,IAAvB,CAA9B,EAA4D;AAC1D,YAAO,KAAP;AACD;;AAED,UAAO,IAAP;AACD,E;;;;;;ACrDD,uC;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,YAAY,EAAE,cAAc,EAAE,GAAG,EAAE,YAAY,IAAI;AACxE;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,2BAA0B,IAAI;AAC9B,QAAO;AACP;AACA;AACA;AACA;AACA,2BAA0B,IAAI;AAC9B,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,KAAI;AACJ;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;;;;;;AChKA;;;;AACA;;;;AAEA;;KAAYqE,Q;;;;;;;;KAESkU,U;AAEnB,uBAAY7C,UAAZ,EAAwB5Q,SAAxB,EAAuD;AAAA,oFAAJ,EAAI;;AAAA,8BAAnB7E,QAAmB;AAAA,SAAnBA,QAAmB,iCAAV,IAAU;;AAAA;;AACrD;AACA,UAAKuY,WAAL,GAAmB9C,UAAnB;;AAEA;AACA;AACA,UAAK5Q,SAAL,GAAiBA,SAAjB;;AAEA;AACA,UAAK7E,QAAL,GAAgBA,QAAhB;;AAEA;AACA;AACA,UAAK6V,OAAL,GAAe,IAAf;AACD;;;;6BAEwB;AAAA;;AAAA,WAAnBH,WAAmB;;AACvB,WAAI;AACF,cAAKE,UAAL,GAAkB3P,KAAK9F,KAAL,CAAW,KAAKoY,WAAhB,CAAlB;AACD,QAFD,CAEE,OAAOC,aAAP,EAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,aAAIC,8BAA4B,KAAKF,WAArC;AACA,aAAI;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAIG,SAAS,kBAAQC,QAAR,CAAiBF,cAAjB,EAAiC,EAACG,SAAS,IAAV,EAAjC,EAAkDzE,KAAlD,CAAwD,CAAxD,CAAb;AACA,gBAAKoE,WAAL,GAAmBG,OAAOG,MAAP,CAAc,UAACtQ,IAAD,EAAOuQ,KAAP,EAAiB;AAChD;AACA;AACA,iBAAIA,MAAM9d,IAAN,KAAe,aAAnB,EAAkC;AAChC,sBAAOuN,IAAP;AACD;;AAED;AACA,iBAAIuQ,MAAM9d,IAAN,KAAe,cAAnB,EAAmC;AACjC,qBAAK6J,SAAL,CAAeS,QAAf,CAAwBlB,SAASkM,mBAAjC;AACA,qBAAKuF,OAAL,GAAe,KAAf;AACD;;AAED,yBAAUtN,IAAV,GAAiBuQ,MAAM9R,KAAvB;AACD,YAdkB,EAchB,EAdgB,CAAnB;;AAgBA;AACA;AACA,eAAI,KAAK6O,OAAL,KAAiB,KAArB,EAA4B;AAC1B;AACD;;AAED,gBAAKD,UAAL,GAAkB3P,KAAK9F,KAAL,CAAW,KAAKoY,WAAhB,CAAlB;AACD,UAlCD,CAkCE,OAAO5d,KAAP,EAAc;AACd;AACA;AACA,eAAIoe,YAAY/c,OAAOkO,MAAP,CAAc,EAAd,EAAkB9F,SAASiM,YAA3B,EAAyC;AACvDhJ,mBAAM,KAAKrH,QAD4C;AAEvDoH,0BAAazM,MAAM0K;AAFoC,YAAzC,CAAhB;AAIA,gBAAKR,SAAL,CAAeS,QAAf,CAAwByT,SAAxB;AACA,gBAAKlD,OAAL,GAAe,KAAf;AACA;AACD;AACF;;AAED;AACA,YAAKmD,sBAAL,CAA4BtD,WAA5B;;AAEA;AACA,WAAI,KAAKG,OAAL,KAAiB,KAArB,EAA4B;AAC1B,cAAKA,OAAL,GAAe,IAAf;AACD;AACF;;;8CAEyC;AAAA,WAAnBH,WAAmB;;AACxC,WAAI;AACFA,qBAAYvV,KAAZ,CAAkB,KAAKoY,WAAvB,EAAoC,EAAEU,WAAW,IAAb,EAAmBC,UAAU,IAA7B,EAApC;AACD,QAFD,CAEE,OAAOhU,GAAP,EAAY;AACZ,aAAIA,IAAIoR,QAAJ,IAAgBpR,IAAIoR,QAAJ,CAAahZ,MAAb,GAAsB,CAA1C,EAA6C;AAAA;AAAA;AAAA;;AAAA;AAC3C,kCAAkB4H,IAAIoR,QAAtB,8HAAgC;AAAA,mBAAvB3b,KAAuB;;AAC9B,mBAAIA,MAAM0K,OAAN,CAActF,UAAd,CAAyB,gBAAzB,CAAJ,EAAgD;AAC9C,qBAAIsF,UAAUrJ,OAAOkO,MAAP,CAAc,EAAd,EAAkB9F,SAASmM,kBAA3B,EAA+C;AAC3DlJ,yBAAM,KAAKrH,QADgD;AAE3DtC,yBAAM/C,MAAM+C,IAF+C;AAG3D0J,gCAAgBzM,MAAM0K,OAAtB;AAH2D,kBAA/C,CAAd;AAKA,sBAAKR,SAAL,CAAeS,QAAf,CAAwBD,OAAxB;AACA,sBAAKwQ,OAAL,GAAe,KAAf;AACD;AACF;AAX0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAY5C;AACF;AACF;;;;;;mBAvGkByC,U;;;;;;ACLrB,qC;;;;;;;;;;;;;;ACAA;;;;AACA;;KAAYlU,Q;;AACZ;;KAAYD,S;;;;;;;;;;;;KAGSgV,a;;;;;;;;;;;2BAKbC,M,EAAQC,M,EAAQ;AACpB,YAAK,IAAIC,CAAT,IAAcD,MAAd,EAAsB;AACpB,aAAIA,OAAOC,CAAP,MAAcF,OAAOE,CAAP,CAAlB,EAA6B;AAC3B;AACD;AACF;AACD,YAAKC,cAAL,CAAoBpT,IAApB,CACEnK,OAAOkO,MAAP,CAAc,EAAd,EAAkB9F,SAASuM,iBAA3B,EAA8C;AAC5C3V,eAAMmJ,UAAUpC,iBAD4B;AAE5CsF,eAAM,KAAKrH;AAFiC,QAA9C,CADF;AAMD;;;4BAEM;AACL,WAAIoZ,SAAS,KAAKI,QAAlB;AADK;AAAA;AAAA;;AAAA;AAEL,8BAAkBrV,UAAUH,0BAA5B,8HAAwD;AAAA,eAA/CyV,KAA+C;;AACtD,gBAAKC,KAAL,CAAWN,MAAX,EAAmBK,KAAnB;AACD;AAJI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAKL,cAAOpa,QAAQC,OAAR,CAAgB,KAAKia,cAArB,CAAP;AACD;;;yBAxB2B;AAC1B,cAAO,OAAP;AACD;;;;;;mBAHkBJ,a;;;;;;;;;;;;;;ACLrB;;;;KAGqBQ,W;;;yBAES;AAC1B;;;;;;;;;AAWA,cAAO,QAAP;AACD;;;AAED,wBAAYH,QAAZ,EAAsBxZ,QAAtB,EAA4C;AAAA,SAAZ4Z,OAAY,uEAAJ,EAAI;;AAAA;;AAC1C,UAAKJ,QAAL,GAAgBA,QAAhB;AACA,UAAKxZ,QAAL,GAAgBA,QAAhB;AACA,UAAK4Z,OAAL,GAAeA,OAAf;AACA,UAAKL,cAAL,GAAsB,EAAtB;AACA,UAAKM,aAAL,GAAqB,EAArB;AACA,UAAKC,cAAL,GAAsB,IAAtB;AACA,UAAKC,eAAL,GAAuB,CAAvB;;AAEA,sCAAqB,KAAK/Z,QAA1B;AACD;;;;4BAE+B;AAAA;;AAAA,WAA3Bga,MAA2B,uEAApB,KAAKH,aAAe;;AAC9B,cAAO,IAAIxa,OAAJ,CAAY,UAACC,OAAD,EAAU2a,MAAV,EAAqB;AACtC,eAAK7R,WAAL,GACGR,IADH,CACQ,UAAC4R,QAAD,EAAc;AAClB,eAAIpQ,WAAW,EAAf;AACA;AACA;AACA;AACA;AACA,eAAI8Q,QAAQ,mCAAuBF,MAAvB,CAAZ;;AAEA,gBAAK,IAAIG,IAAT,IAAiBD,KAAjB,EAAwB;AACtB,mBAAKH,eAAL;;AAEA3Q,sBAASjD,IAAT,CAAc+T,MAAMC,IAAN,EAAYX,QAAZ,EAAsB,MAAKxZ,QAA3B,EACY,MAAK4Z,OADjB,CAAd;AAED;;AAED,kBAAOva,QAAQiK,GAAR,CAAYF,QAAZ,CAAP;AACD,UAjBH,EAkBGxB,IAlBH,CAkBQ,UAACwS,WAAD,EAAiB;AAAA;AAAA;AAAA;;AAAA;AACrB,kCAAqBA,WAArB,8HAAkC;AAAA,mBAAzBhW,QAAyB;;AAChC,qBAAKmV,cAAL,GAAsB,MAAKA,cAAL,CAAoBc,MAApB,CAA2BjW,QAA3B,CAAtB;AACD;AAHoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAKrB9E,mBAAQ,MAAKia,cAAb;AACD,UAxBH,EAyBGpQ,KAzBH,CAyBS8Q,MAzBT;AA0BD,QA3BM,CAAP;AA4BD;;;mCAEa;AAAA;;AACZ,cAAO,IAAI5a,OAAJ,CAAY,UAACC,OAAD,EAAU2a,MAAV,EAAqB;AACtC,aAAI,OAAKH,cAAL,KAAwB,IAA5B,EAAkC;AAChC,kBAAOxa,QAAQ,OAAKwa,cAAb,CAAP;AACD;;AAED,gBAAKQ,YAAL,GACG1S,IADH,CACQ,UAAC4R,QAAD,EAAc;AAClB,kBAAKM,cAAL,GAAsBN,QAAtB;;AAEAla,mBAAQ,OAAKwa,cAAb;AACD,UALH,EAMG3Q,KANH,CAMS8Q,MANT;AAOD,QAZM,CAAP;AAaD;;;oCAEc;AACb,cAAO5a,QAAQ4a,MAAR,CACL,IAAIrf,KAAJ,CAAU,iCAAV,CADK,CAAP;AAED;;;;;;mBA/EkB+e,W;;;;;;;;;;;;;;ACHrB;;;;AACA;;;;AACA;;KAAYO,K;;;;;;;;;;;;KAGSK,qB;;;;;;;;;;;;;;qNAEnBV,a,GAAgBK,K;;;;;oCAMyC;AAAA,WAA5CM,qBAA4C;;AACvD,WAAIC,WAAW,IAAID,qBAAJ,CAA0B,KAAKhB,QAA/B,EAAyC,KAAKxZ,QAA9C,CAAf;AACA,cAAOya,SAASta,KAAT,EAAP;AACD;;;yBAP2B;AAC1B,cAAO,QAAP;AACD;;;;;;mBANkBoa,qB;;;;;;;;;;;;;;;;ACLrB;;;;;;;;KAGqBG,oB;AAEnB,iCAAYpe,MAAZ,EAAoB0D,QAApB,EAA8B;AAAA;;AAC5B,UAAK1D,MAAL,GAAcA,MAAd;AACA,UAAK0D,QAAL,GAAgBA,QAAhB;AACA,UAAK2a,OAAL,GAAe,IAAf;AACD;;;;qCAEgD;AAAA,sFAAJ,EAAI;;AAAA,WAAlCC,OAAkC,QAAlCA,OAAkC;AAAA,WAAzBC,SAAyB,QAAzBA,SAAyB;AAAA,WAAd5c,MAAc,QAAdA,MAAc;;AAC/C,cAAO,KAAKkC,KAAL,GACJyH,IADI,CACC,UAAC+S,OAAD,EAAa;AACjB,gBAAO,IAAItb,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC9B,eAAIwb,kBAAkBH,QAAQpP,MAAR,CAAe,UAACwP,MAAD,EAAY;AAC/C,iBAAIC,WAAW,EAACJ,gBAAD,EAAUC,oBAAV,EAAqB5c,cAArB,EAAf;AACA,kBAAK,IAAIgd,GAAT,IAAgBD,QAAhB,EAA0B;AACxB,mBAAIE,MAAMF,SAASC,GAAT,CAAV;AACA,mBAAI,QAAOC,GAAP,yCAAOA,GAAP,OAAeC,SAAf,IAA4BD,QAAQH,OAAOE,GAAP,CAAxC,EAAqD;AACnD,wBAAO,IAAP;AACD;AACF;AACF,YARqB,CAAtB;;AAUA3b,mBAAQwb,eAAR;AACD,UAZM,CAAP;AAaD,QAfI,CAAP;AAgBD;;;6BAEO;AAAA;;AACN,cAAO,IAAIzb,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC9B,aAAI,MAAKqb,OAAL,KAAiB,IAArB,EAA2B;AACzBrb,mBAAQ,MAAKqb,OAAb;AACD,UAFD,MAEO;AACL,iBAAKA,OAAL,GAAe,EAAf;AACD;;AAED,aAAIS,YAAY,CAAhB;;AAEA,aAAIC,KAAK,mBAASC,eAAT,CAAyB;AAChCvV,kBAAO,MAAKzJ;AADoB,UAAzB,CAAT;;AAIA+e,YAAGE,EAAH,CAAM,MAAN,EAAc,UAAC7d,IAAD,EAAU;AACtB0d,wBAAa,CAAb;;AAEA,eAAI1d,KAAKE,IAAL,GAAYmC,UAAZ,CAAuB,GAAvB,EAA4B,CAA5B,MAAmC,IAAvC,EAA6C;AAC3C;AACD;;AAED,eAAIgb,SAASrd,KAAKF,KAAL,CAAW,KAAX,EAAkB,CAAlB,CAAb;AACA,eAAIud,OAAOzd,MAAP,KAAkB,CAAtB,EAAyB;AACvByd,oBAAO5U,IAAP,CAAY,EAAZ;AACD,YAFD,MAEO,IAAI4U,OAAOzd,MAAP,GAAgB,CAApB,EAAuB;AAC5B;AACD;;AAED,iBAAKqd,OAAL,CAAaxU,IAAb,CAAkB;AAChByU,sBAASG,OAAO,CAAP,CADO;AAEhBF,wBAAWE,OAAO,CAAP,CAFK;AAGhB9c,qBAAQ8c,OAAO,CAAP,CAHQ;AAIhBrd,mBAAM0d,SAJU;AAKhBpb,uBAAU,MAAKA;AALC,YAAlB;AAOD,UArBD;;AAuBAqb,YAAGE,EAAH,CAAM,OAAN,EAAe,YAAM;AACnBjc,mBAAQ,MAAKqb,OAAb;AACD,UAFD;AAGD,QAvCM,CAAP;AAwCD;;;;;;mBApEkBD,oB;;;;;;ACHrB,sC;;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,I;;;;;;;;;;;;SCgBgBc,e,GAAAA,e;;AAhBhB;;AACA;;AAGO,KAAMC,sDAAuB,CAClC,+BADkC,EAElC,+CAFkC,EAGlC,4BAHkC,EAIlC,uCAJkC,EAKlC,kCALkC,EAMlC,mCANkC,EAOlC,sBAPkC,EAQlC,0BARkC,CAA7B;;AAYA,UAASD,eAAT,CAAyBb,OAAzB,EAAkC3a,QAAlC,EAA4C;AACjD,OAAI0b,qBAAqB,EAAzB;;AADiD;AAAA;AAAA;;AAAA;AAGjD,0BAAmBf,OAAnB,8HAA4B;AAAA,WAAnBI,MAAmB;;AAC1B,WAAIA,OAAOH,OAAP,KAAmB,UAAnB,KACCa,qBAAqBnb,QAArB,CAA8Bya,OAAOF,SAArC,KACCE,OAAOF,SAAP,KAAqB,YAArB,IACAE,OAAO9c,MAAP,CAAc8B,UAAd,CAAyB,SAAzB,CADA,IAEAgb,OAAO9c,MAAP,CAAc8B,UAAd,CAAyB,MAAzB,CAJF,CAAJ,EAI0C;AACxC,aAAIsF,UAAUrJ,OAAOkO,MAAP,CAAc,EAAd,gCAAsC;AAClD7C,iBAAMrH,QAD4C;AAElDtC,iBAAMqd,OAAOrd,IAFqC;AAGlD1C;AAHkD,UAAtC,CAAd;AAKA0gB,4BAAmBvV,IAAnB,CAAwBd,OAAxB;AACD;AACF;AAhBgD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAiBjD,UAAOqW,kBAAP;AACD,E;;;;;;;;;;;;;;AClCD;;KAAYxB,K;;AACZ;;KAAYyB,O;;AAEZ;;;;AACA;;;;AACA;;AACA;;AACA;;;;;;;;;;;;KAGqBC,U;;;;;;;;;;;;;;+LAEnB/B,a,GAAgBK,K;;;;;iCAEJ2B,O,EAASC,c,EAA2C;AAAA,WAA3B9B,MAA2B,uEAApB,KAAKH,aAAe;;AAE9D,WAAIxS,OAAO,KAAKrH,QAAhB;AACA,WAAI+b,aAAa/f,OAAOkO,MAAP,CAAc,EAAd,EAAkB,KAAK0P,OAAvB,EAAgC;AAC/CoC,oBAAWH,QAAQI,MAAR,CAAeC,KAAf,CAAqBxe,IADe;AAE/Cye,sBAAaN,QAAQI,MAAR,CAAeC,KAAf,CAAqB5U;AAFa,QAAhC,CAAjB;;AAKA,WAAI9M,OAAO;AACT6M,eAAMA,IADG;AAET2U,oBAAWD,WAAWC,SAFb;AAGTG,sBAAaJ,WAAWI;AAHf,QAAX;;AAMA,WAAIN,QAAQ7gB,IAAR,KAAiB,SAArB,EAAgC;AAC9B,0BAAI0M,KAAJ,CAAU,6BAAV,EAAyClN,IAAzC;AACA;AACD;;AAED,WAAIqhB,QAAQ7gB,IAAR,KAAiB,QAArB,EAA+B;AAC7B,0BAAI0M,KAAJ,CAAU,wBAAV;AACA,aAAImU,QAAQlH,KAAR,IAAiBkH,QAAQlH,KAAR,CAAcrX,MAAnC,EAA2C;AAAA;AAAA;AAAA;;AAAA;AACzC,kCAAyBue,QAAQlH,KAAjC,8HAAwC;AAAA,mBAA/ByH,YAA+B;;AACtC,oBAAKC,WAAL,CAAiBD,YAAjB,EAA+BN,cAA/B,EAA+C9B,MAA/C;AACD;AAHwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAI1C,UAJD,MAIO;AACL,4BAAItS,KAAJ,CAAU,sBAAV;AACD;AACD;AACD;;AAED,wBAAIA,KAAJ,CAAU,wCAAV,EACEoU,cADF,EACkBthB,IADlB;;AAGA,YAAK+e,cAAL,GAAsB,KAAKA,cAAL,CAAoBc,MAApB,CACpBL,OAAO8B,cAAP,EAAuBD,OAAvB,EAAgCxU,IAAhC,EAAsC0U,UAAtC,CADoB,CAAtB;AAED;;;4BAE+B;AAAA;;AAAA,WAA3B/B,MAA2B,uEAApB,KAAKH,aAAe;;AAC9B,cAAO,IAAIxa,OAAJ,CAAY,UAACC,OAAD,EAAU2a,MAAV,EAAqB;AACtC,gBAAK7R,WAAL,GACGR,IADH,CACQ,UAAC0U,GAAD,EAAS;AACb,eAAIA,OAAOA,IAAI3H,KAAf,EAAsB;AACpB,iBAAIuF,QAAQ,mCAAuBF,MAAvB,CAAZ;AACA,iBAAIrF,QAAQ2H,IAAI3H,KAAhB;;AAEA,kBAAK,IAAImH,cAAT,IAA2B5B,KAA3B,EAAkC;AAChC,sBAAKH,eAAL;AADgC;AAAA;AAAA;;AAAA;AAEhC,uCAAoBpF,KAApB,mIAA2B;AAAA,uBAAlBkH,OAAkB;;AACzB,0BAAKQ,WAAL,CAAiBR,OAAjB,EAA0BC,cAA1B,EAA0C5B,KAA1C;AACD;AAJ+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKjC;AACF;;AAED5a,mBAAQ,OAAKia,cAAb;AACD,UAfH,EAgBGpQ,KAhBH,CAgBS8Q,MAhBT;AAiBD,QAlBM,CAAP;AAmBD;;;oCAEgC;AAAA;;AAAA,WAApBsC,UAAoB,uEAATZ,OAAS;;AAC/B,cAAO,IAAItc,OAAJ,CAAY,UAACC,OAAD,EAAU2a,MAAV,EAAqB;AACtC,aAAI;AACF,eAAIuC,WAAWD,WAAWpc,KAAX,CAAiB,OAAKqZ,QAAtB,EAAgC,EAACiD,MAAM,OAAKzc,QAAZ,EAAhC,CAAf;AACA,kBAAOV,QAAQkd,QAAR,CAAP;AACD,UAHD,CAGE,OAAO1F,CAAP,EAAU;AACV,eAAI,CAACA,EAAE4F,MAAH,IAAa5F,EAAEza,IAAF,KAAW,gBAA5B,EAA8C;AAC5C,oBAAO4d,OAAOnD,CAAP,CAAP;AACD,YAFD,MAEO;AACL,oBAAKyC,cAAL,CAAoBpT,IAApB,CAAyBnK,OAAOkO,MAAP,CAAc,EAAd,8BAAoC;AAC3DlP,8CAD2D;AAE3D;AACA;AACAqK,wBAASyR,EAAE4F,MAJgD;AAK3DpV,uBAAQwP,EAAExP,MALiD;AAM3D5J,qBAAMoZ,EAAEpZ,IANmD;AAO3D;AACA;AACA2J,qBAAM,OAAKrH;AATgD,cAApC,CAAzB;AAWD;;AAED;AACA,kBAAOV,QAAQ,IAAR,CAAP;AACD;AACF,QAxBM,CAAP;AAyBD;;;;;;mBA1FkBsc,U;;;;;;;;;;;;;;ACVrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,I;;;;;;;;;;;SCGgBe,c,GAAAA,c;;AAHhB;;KAAYvY,Q;;;;AAGL,UAASuY,cAAT,CAAwBd,OAAxB,EAAiC7b,QAAjC,EACoD;AAAA,kFAAJ,EAAI;;AAAA,OAA5Bgc,SAA4B,QAA5BA,SAA4B;AAAA,OAAjBG,WAAiB,QAAjBA,WAAiB;;AACzD,OAAIS,cAAc,EAAlB;AACA,OAAIf,QAAQ7gB,IAAR,KAAiB,MAArB,EAA6B;AAAA;AAAA;AAAA;;AAAA;AAC3B,4BAAiB6gB,QAAQlH,KAAzB,8HAAgC;AAAA,aAAvB9W,IAAuB;;AAC9B,aAAIA,KAAK7C,IAAL,KAAc,MAAlB,EAA0B;AACxB4hB,uBAAYzW,IAAZ,CACEnK,OAAOkO,MAAP,CAAc,EAAd,EAAkB9F,SAASuJ,wBAA3B,EAAqD;AACnD3S,mBAAM,SAD6C;AAEnD0C,mBAAMse,SAF6C;AAGnD1U,qBAAQ6U,WAH2C;AAInD9U,mBAAMrH;AAJ6C,YAArD,CADF;AAOA;AACD;AACF;AAZ0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAa5B;AACD,UAAO4c,WAAP;AACD,E;;;;;;ACrBD,qC;;;;;;;;;;;;;;ACAA;;;;AACA;;KAAYxY,Q;;AACZ;;KAAYD,S;;;;;;;;;;;;KAGS0Y,e;;;;;;;;;;;4BAEZ;AAAA;;AACL,cAAO,IAAIxd,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC9B,aAAI,OAAKU,QAAL,CAAcuJ,KAAd,CAAoBpF,UAAUL,oBAA9B,CAAJ,EAAyD;AACvD,kBAAKyV,cAAL,CAAoBpT,IAApB,CACEnK,OAAOkO,MAAP,CAAc,EAAd,EAAkB9F,SAASwM,cAA3B,EAA2C;AACzC5V,mBAAMmJ,UAAUnC,kBADyB;AAEzCqF,mBAAM,OAAKrH;AAF8B,YAA3C,CADF;AAMD,UAPD,MAOO,IAAI,OAAKA,QAAL,CAAcuJ,KAAd,CAAoBpF,UAAUP,iBAA9B,CAAJ,EAAsD;AAC3D,kBAAK2V,cAAL,CAAoBpT,IAApB,CACEnK,OAAOkO,MAAP,CAAc,EAAd,EAAkB9F,SAASoM,WAA3B,EAAwC;AACtCxV,mBAAMmJ,UAAUnC,kBADsB;AAEtCqF,mBAAM,OAAKrH;AAF2B,YAAxC,CADF;AAMD,UAPM,MAOA,IAAI,OAAKA,QAAL,CAAcuJ,KAAd,CAAoBpF,UAAUN,kBAA9B,CAAJ,EAAuD;AAC5D,kBAAK0V,cAAL,CAAoBpT,IAApB,CACEnK,OAAOkO,MAAP,CAAc,EAAd,EAAkB9F,SAASqM,YAA3B,EAAyC;AACvCzV,mBAAMmJ,UAAUnC,kBADuB;AAEvCqF,mBAAM,OAAKrH;AAF4B,YAAzC,CADF;AAMD,UAPM,MAOA,IAAI,OAAKA,QAAL,CAAcuJ,KAAd,CAAoBpF,UAAUJ,4BAA9B,CAAJ,EAAiE;AACtE,kBAAKwV,cAAL,CAAoBpT,IAApB,CACEnK,OAAOkO,MAAP,CAAc,EAAd,EAAkB9F,SAASsM,sBAA3B,EAAmD;AACjD1V,mBAAMmJ,UAAUnC,kBADiC;AAEjDqF,mBAAM,OAAKrH;AAFsC,YAAnD,CADF;AAMD,UAPM,MAOA;AACL,iBAAM,IAAIpF,KAAJ,sCAA4C,OAAKoF,QAAjD,OAAN;AACD;AACD,gBAAOV,QAAQ,OAAKia,cAAb,CAAP;AACD,QAjCM,CAAP;AAkCD;;;;;;mBArCkBsD,e;;;;;;;;;;;;;;ACLrB;;;;AAEA;;;;AACA;;KAAY3C,K;;;;;;;;;;;;KAGS4C,W;;;;;;;;;;;;;;iMAEnBjD,a,GAAgBK,K;;;;;oCAED;AAAA;;AACb,cAAO,IAAI7a,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC9B,aAAIyd,UAAU,kBAAQC,IAAR,CAAa,OAAKxD,QAAlB,CAAd;;AAEAla,iBAAQyd,OAAR;AACD,QAJM,CAAP;AAKD;;;;;;mBAVkBD,W;;;;;;ACNrB,qC;;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,I;;;;;;;;;;;SCIgBG,wB,GAAAA,wB;SAcAC,sB,GAAAA,sB;;AAlBhB;;AACA;;KAAY9Y,Q;;;;AAGL,UAAS6Y,wBAAT,CAAkCE,CAAlC,EAAqCnd,QAArC,EAA+C;AACpD,UAAO,IAAIX,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC9B,SAAIia,iBAAiB,EAArB;;AAEA,UAAK,IAAI7E,GAAT,+CAAoD;AAClD6E,wBAAiBA,eAAec,MAAf,CACf6C,uBAAuBC,CAAvB,EAA0BzI,GAA1B,EAA+B,0CAAmCA,GAAnC,CAA/B,EACuB1U,QADvB,CADe,CAAjB;AAGD;;AAEDV,aAAQia,cAAR;AACD,IAVM,CAAP;AAWD;;AAEM,UAAS2D,sBAAT,CAAgCC,CAAhC,EAAmCzI,GAAnC,EAAwC0I,UAAxC,EAAoDpd,QAApD,EAA8D;AACnE,OAAIuZ,iBAAiB,EAArB;;AAEA4D,KAAEzI,GAAF,EAAO2I,IAAP,CAAY,UAAChgB,CAAD,EAAIigB,OAAJ,EAAgB;AAAA;AAAA;AAAA;;AAAA;AAC1B,4BAA0BF,UAA1B,8HAAsC;AAAA,aAA7BG,aAA6B;;AACpC,aAAIC,YAAY,CAAG9I,GAAH,kBAAmB6I,aAAnB,EAAmC/c,WAAnC,EAAhB;;AAEA,aAAI2c,EAAEG,OAAF,EAAWG,IAAX,CAAgBF,aAAhB,MAAmCpC,SAAvC,EAAkD;AAChD5B,0BAAepT,IAAf,CAAoB;AAClBW,mBAAM0W,SADY;AAElBnY,sBAASjB,SAASoZ,SAAT,EAAoBnY,OAFX;AAGlB+B,0BAAahD,SAASoZ,SAAT,EAAoBpW,WAHf;AAIlBsW,+BAAgBhJ,GAAhB,MAJkB;AAKlBrN,mBAAMrH,QALY;AAMlBhF;AANkB,YAApB;AAQD;AACF;AAdyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAe3B,IAfD;;AAiBA,UAAOue,cAAP;AACD,E;;;;;;;;;;;;;;;;ACvCD;;;;AAEA;;AACA;;KAAYnV,Q;;AACZ;;KAAY8V,K;;AACZ;;;;;;;;;;KAIqByD,iB;AAInB,8BAAY7W,IAAZ,EAAkB9G,QAAlB,EAAwC;AAAA,SAAZ4Z,OAAY,uEAAJ,EAAI;;AAAA;;AAAA,UAFxCC,aAEwC,GAFxBK,KAEwB;;AACtC,UAAKpT,IAAL,GAAYA,IAAZ;AACA,UAAK9G,QAAL,GAAgBA,QAAhB;AACA,UAAK4Z,OAAL,GAAeA,OAAf;AACA,UAAKL,cAAL,GAAsB,EAAtB;AACA,UAAKQ,eAAL,GAAuB,CAAvB;;AAEA,sCAAqB,KAAK/Z,QAA1B;AACD;;;;4BAUK;AAAA;;AAAA,WAJD4d,OAIC;;AAAA,sFAAJ,EAAI;;AAAA,8BAHJ5D,MAGI;;AAAA,WAHJA,MAGI,+BAHG,KAAKH,aAGR;;AAAA,oCAFJgE,YAEI;;AAAA,WAFJA,YAEI;;AAAA,iCADJC,SACI;;AAAA,WADJA,SACI,kCADM1Z,QACN;;AACJ,cAAO,IAAI/E,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC9B;AACA;AACA,aAAIye,SAASH,QAAQI,MAArB;AACA,aAAI9D,QAAQ,mCAAuBF,MAAvB,CAAZ;;AAEA,cAAK,IAAI3d,IAAT,IAAiB6d,KAAjB,EAAwB;AACtB,iBAAKH,eAAL;AACAgE,kBAAOE,UAAP,CAAkB5hB,IAAlB,EAAwB6d,MAAM7d,IAAN,CAAxB;AACD;;AAED,aAAI6hB,SAASH,OAAOI,MAAP,CAAc,MAAKrX,IAAnB,EAAyB;AACpCjL,gBAAK,EAAEuiB,KAAK,IAAP,EAD+B;AAEpCC,mBAAQ,KAF4B;AAGpCnE,kBAAO2D,YAH6B;AAIpCS,qBAAU;AACRxZ,4BAAe,MAAK8U,OAAL,CAAa9U;AADpB;AAJ0B,UAAzB,EAOV;AACDyZ,8BAAmB,KADlB;AAEDve,qBAAU,MAAKA;AAFd,UAPU,CAAb;;AAX8B;AAAA;AAAA;;AAAA;AAuB9B,gCAAoBke,MAApB,8HAA4B;AAAA,iBAAnB7Y,OAAmB;;AAC1B;AACA;AACA,iBAAIA,QAAQmZ,KAAR,KAAkB,IAAtB,EAA4B;AAC1BnZ,uBAAQA,OAAR,GAAkByY,UAAU3P,eAAV,CAA0BrH,IAA5C;AACD;;AAED,iBAAI,OAAOzB,QAAQA,OAAf,KAA2B,WAA/B,EAA4C;AAC1C,qBAAM,IAAIzK,KAAJ,+CAAN;AAED;;AAED;AACA,iBAAI6jB,aAAaX,UAAUzY,QAAQA,OAAlB,CAAjB;AACA,iBAAIyB,OAAOzB,QAAQA,OAAnB;;AAEA,mBAAKkU,cAAL,CAAoBpT,IAApB,CAAyB;AACvBW,qBAAMA,IADiB;AAEvBQ,uBAAQjC,QAAQiC,MAFO;AAGvBF,4BAAaqX,WAAWrX,WAHD;AAIvBC,qBAAM,MAAKrH,QAJY;AAKvBtC,qBAAM2H,QAAQ3H,IALS;AAMvB2H,wBAASoZ,WAAWpZ,OANG;AAOvBqY,2BAAYrY,QAAQ4W,MAPG;AAQvBjhB,qBAAM,oBAAaqK,QAAQqZ,QAArB;AARiB,cAAzB;AAUD;AAjD6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAmD9Bpf,iBAAQ,MAAKia,cAAb;AACD,QApDM,CAAP;AAqDD;;;yBA9D2B;AAC1B,cAAO,QAAP;AACD;;;;;;mBAhBkBoE,iB;;;;;;ACTrB,oC;;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,I;;;;;;;;;;;SCZgB5c,kB,GAAAA,kB;;AAFhB;;AAEO,UAASA,kBAAT,CAA4B7C,OAA5B,EAAqC;AAC1C,UAAO;AACLygB,iBAAY,oBAAS9gB,IAAT,EAAe;AACzB,WAAI,0BAAmByC,QAAnB,CAA4BzC,KAAKxB,IAAjC,CAAJ,EAA4C;AAC1C,gBAAO6B,QAAQggB,MAAR,CAAergB,IAAf,cAA+BA,KAAKxB,IAAL,CAAUmE,WAAV,EAA/B,CAAP;AACD;AACF,MALI;AAMLoe,uBAAkB,0BAAS/gB,IAAT,EAAe;AAC/B,WAAI,0BAAmByC,QAAnB,CAA4BzC,KAAK4T,QAAL,CAAcpV,IAA1C,CAAJ,EAAqD;AACnD,gBAAO6B,QAAQggB,MAAR,CAAergB,IAAf,cACKA,KAAK4T,QAAL,CAAcpV,IAAd,CAAmBmE,WAAnB,EADL,CAAP;AAED;AACF;AAXI,IAAP;AAaD,E;;;;;;;;;;;;SCSeQ,mB,GAAAA,mB;;AAzBhB;;AAEA;;AAEO,KAAM6d,oDAAsB,CACjC;AACElkB,qCADF;AAEEsD,WAAQ,UAFV;AAGEwT,aAAU;AAHZ,EADiC,EAK9B;AACD9W,2CADC;AAEDsD,WAAQ,eAFP;AAGDwT,aAAU;AAHT,EAL8B,EAS9B;AACD9W,kCADC;AAEDsD,WAAQ,UAFP;AAGDwT,aAAU;AAHT,EAT8B,EAa9B;AACD9W,oCADC;AAEDsD,WAAQ,WAFP;AAGDwT,aAAU;AAHT,EAb8B,CAA5B;;AAqBA,UAASzQ,mBAAT,CAA6B9C,OAA7B,EAAsC;AAC3C,UAAO;AACL4gB,qBAAgB,wBAASjhB,IAAT,EAAe;AAC7B,WAAIkhB,gBAAgB,6BAAiB7gB,OAAjB,EAA0BL,KAAKE,MAA/B,CAApB;AACA;AACA,WAAI,OAAOghB,cAAc9gB,MAArB,KAAgC,WAAhC,IACA8gB,cAActN,QAAd,CAAuBzW,IAAvB,KAAgC,YADhC,IAEA+jB,cAAc9gB,MAAd,CAAqBjD,IAArB,KAA8B,YAFlC,EAEgD;;AAE9C,aAAIgkB,kBAAkB,6BAAiB9gB,OAAjB,EAA0B6gB,cAAc9gB,MAAxC,CAAtB;;AAF8C;AAAA;AAAA;;AAAA;AAI9C,gCAAmB4gB,mBAAnB,8HAAwC;AAAA,iBAA/BI,MAA+B;;AACtC;AACA,iBAAID,gBAAgB3iB,IAAhB,KAAyB4iB,OAAOhhB,MAAhC,IACA8gB,cAActN,QAAd,CAAuBpV,IAAvB,KAAgC4iB,OAAOxN,QAD3C,EACqD;AACnD,sBAAOvT,QAAQggB,MAAR,CAAergB,IAAf,EAAqBohB,OAAOtkB,KAAP,CAAamM,IAAlC,CAAP;AACD;AACF;AAV6C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAW/C;AACF;AAlBI,IAAP;AAoBD,E;;;;;;;;;;;SC3Ce7F,e,GAAAA,e;;AAHhB;;AACA;;AAEO,UAASA,eAAT,CAAyB/C,OAAzB,EAAkC;AACvC,UAAO;AACL4gB,qBAAgB,wBAASjhB,IAAT,EAAe;AAC7B;AACA,WAAI,OAAOA,KAAKE,MAAL,CAAY0T,QAAnB,KAAgC,WAAhC,IACA5T,KAAKE,MAAL,CAAY0T,QAAZ,CAAqBzW,IAArB,KAA8B,YAD9B,KAEC6C,KAAKE,MAAL,CAAY0T,QAAZ,CAAqBpV,IAArB,KAA8B,YAA9B,IACAwB,KAAKE,MAAL,CAAY0T,QAAZ,CAAqBpV,IAArB,KAA8B,aAH/B,CAAJ,EAGmD;;AAEjD;AACA,aAAIwB,KAAKqhB,SAAL,CAAe5hB,MAAf,GAAwB,CAAxB,IACAO,KAAKqhB,SAAL,CAAe,CAAf,EAAkBlkB,IAAlB,KAA2B,YAD/B,EAC6C;AAC3C,eAAImkB,cAAc,wBAAYjhB,OAAZ,EAAqBL,KAAKqhB,SAAL,CAAe,CAAf,EAAkB7iB,IAAvC,CAAlB;AACA,eAAI8iB,eAAeA,YAAYnkB,IAA3B,IACAmkB,YAAYnkB,IAAZ,KAAqB,oBADrB,IAEAmkB,YAAYnkB,IAAZ,KAAqB,yBAFzB,EAEoD;AAClD,oBAAOkD,QAAQggB,MAAR,CAAe,EAACrgB,MAAMA,IAAP,EAAawH,SAAS,4BAAgByB,IAAtC,EAAf,CAAP;AACD,YAJD,MAIO;AACL;AACD;AACH;AACC,UAXD,MAWO,IAAIjJ,KAAKqhB,SAAL,CAAe5hB,MAAf,GAAwB,CAAxB,IACNO,KAAKqhB,SAAL,CAAe,CAAf,EAAkBlkB,IAAlB,KAA2B,oBAA3B,IACA6C,KAAKqhB,SAAL,CAAe,CAAf,EAAkBlkB,IAAlB,KAA2B,yBAFzB,EAEqD;AAC1D,kBAAOkD,QAAQggB,MAAR,CAAe,EAACrgB,MAAMA,IAAP,EAAawH,SAAS,4BAAgByB,IAAtC,EAAf,CAAP;AACD;AACF;AACF;AA1BI,IAAP;AA4BD,E;;;;;;;;;;;SC7Be5F,qB,GAAAA,qB;;AAHhB;;AACA;;AAEO,UAASA,qBAAT,CAA+BhD,OAA/B,EAAwC;AAC7C,UAAO;AACL4gB,qBAAgB,wBAASjhB,IAAT,EAAe;AAC7B,WAAIkhB,gBAAgB,6BAAiB7gB,OAAjB,EAA0BL,KAAKE,MAA/B,CAApB;AACA,WAAI,OAAOghB,cAActN,QAArB,KAAkC,WAAlC,IACAsN,cAActN,QAAd,CAAuBzW,IAAvB,KAAgC,YADhC,IAEA+jB,cAActN,QAAd,CAAuBpV,IAAvB,KAAgC,kBAFpC,EAEwD;;AAEtD,aAAIwB,KAAKqhB,SAAL,CAAe5hB,MAAf,GAAwB,CAA5B,EAA+B;AAC7B,eAAI8hB,iBAAiBvhB,KAAKqhB,SAAL,CAAe,CAAf,CAArB;AACA,mBAAQE,eAAepkB,IAAvB;AACE,kBAAK,SAAL;AACE,mBAAIokB,eAAepY,KAAnB,EAA0B;AACxB,wBAAO9I,QAAQggB,MAAR,CAAe;AACpBrgB,yBAAMA,IADc;AAEpBwH,4BAAS,kCAAsByB;AAFX,kBAAf,CAAP;AAID;AACD;AACF,kBAAK,YAAL;AACEiY,+BAAgB,6BAAiB7gB,OAAjB,EAA0BkhB,cAA1B,CAAhB;AACA,mBAAIL,cAAc/X,KAAlB,EAAyB;AACvB,wBAAO9I,QAAQggB,MAAR,CAAe;AACpBrgB,yBAAMA,IADc;AAEpBwH,4BAAS,kCAAsByB;AAFX,kBAAf,CAAP;AAID;AACD;AAjBJ;AAmBD;AACF;AACF;AA9BI,IAAP;AAgCD,E;;;;;;;;;;;SC7Be3F,kB,GAAAA,kB;;AAPhB;;AACA;;AAEA;;;;AAIO,UAASA,kBAAT,CAA4BjD,OAA5B,EAAqC;AAC1C,UAAO;AACL4gB,qBAAgB,wBAASjhB,IAAT,EAAe;AAC7B,WAAIA,KAAKE,MAAL,CAAY1B,IAAZ,KAAqB,SAArB,IACAwB,KAAKqhB,SADL,IAEArhB,KAAKqhB,SAAL,CAAe5hB,MAFnB,EAE2B;AACzB,aAAI+hB,WAAWxhB,KAAKqhB,SAAL,CAAe,CAAf,CAAf;AACA,aAAIG,SAASrkB,IAAT,KAAkB,YAAtB,EAAoC;AAClC,eAAIskB,UAAU,wBAAYphB,OAAZ,EAAqBmhB,SAAShjB,IAA9B,CAAd;AACA,eAAI,OAAOijB,OAAP,KAAmB,WAAvB,EAAoC;AAClC;AACA,oBAAOphB,QAAQggB,MAAR,CAAergB,IAAf,EAAqB,gCAAsBiJ,IAA3C,CAAP;AACD;AACF;AACF;AACF;AAdI,IAAP;AAgBD,E;;;;;;;;;;;SCrBe1F,a,GAAAA,a;;AAHhB;;AACA;;AAEO,UAASA,aAAT,CAAuBlD,OAAvB,EAAgC;AACrC,UAAO;AACL4gB,qBAAgB,wBAASjhB,IAAT,EAAe;AAC7B;AACA,WAAI,OAAOA,KAAKE,MAAZ,KAAuB,WAA3B,EAAwC;AACtC,aAAIwhB,gBAAgB,6BAAiBrhB,OAAjB,EAA0BL,KAAKE,MAA/B,CAApB;AACA,aAAIyhB,aAAa,6BAAiBthB,OAAjB,EAA0BqhB,cAActhB,MAAxC,CAAjB;;AAEA,aAAIuhB,eAAerE,SAAnB,EAA8B;AAC5B;AACD;AACD,aAAIqE,WAAWnjB,IAAX,KAAoB,iBAApB,IACAkjB,cAAc9N,QAAd,CAAuBpV,IAAvB,KAAgC,MADpC,EAC4C;;AAE1C,eAAIwB,KAAKqhB,SAAL,CAAe5hB,MAAf,GAAwB,CAA5B,EAA+B;AAC7B;AACA,iBAAImiB,MAAM,6BAAiBvhB,OAAjB,EAA0BL,KAAKqhB,SAAL,CAAe,CAAf,CAA1B,CAAV;AACA,iBAAIO,IAAIzY,KAAJ,KAAc,IAAlB,EAAwB;AACtB,sBAAO9I,QAAQggB,MAAR,CAAe,EAACrgB,MAAMA,IAAP,EAAawH,SAAS,0BAAcyB,IAApC,EAAf,CAAP;AACD;AACF;AACF;AACF;AACF;AAtBI,IAAP;AAwBD,E;;;;;;;;;;;SCdezF,gB,GAAAA,gB;;AAdhB;;AACA;;AACA;;AAGA;;;;;;;;;AASO,UAASA,gBAAT,CAA0BnD,OAA1B,EAAmC;AACxC,UAAO;AACL4gB,qBAAgB,wBAASjhB,IAAT,EAAe;AAC7B,WAAI6hB,sBAAsB,KAA1B;AACA,WAAI7hB,KAAKE,MAAL,CAAY1B,IAAZ,KAAqB,SAArB,IACAwB,KAAKqhB,SADL,IAEArhB,KAAKqhB,SAAL,CAAe5hB,MAFnB,EAE2B;;AAEzB,aAAI+hB,WAAWxhB,KAAKqhB,SAAL,CAAe,CAAf,CAAf;;AAEA;AACA;AACA,aAAIG,SAASrkB,IAAT,KAAkB,SAAlB,IACA,yBAAkBsF,QAAlB,CAA2B+e,SAASrY,KAApC,CADJ,EACgD;AAC9C0Y,iCAAsB,IAAtB;AACD;;AAED;AACA;AACA,aAAIL,SAASrkB,IAAT,KAAkB,YAAtB,EAAoC;AAClC,eAAIskB,UAAU,wBAAYphB,OAAZ,EAAqBmhB,SAAShjB,IAA9B,CAAd;AACA,eAAIijB,WAAWA,QAAQtkB,IAAR,KAAiB,SAA5B,IACA,yBAAkBsF,QAAlB,CAA2Bgf,QAAQtY,KAAnC,CADJ,EAC+C;AAC7C0Y,mCAAsB,IAAtB;AACD;AACF;;AAED,aAAIA,mBAAJ,EAAyB;AACvB,kBAAOxhB,QAAQggB,MAAR,CAAergB,IAAf,EAAqB,2BAAiBiJ,IAAtC,CAAP;AACD;AACF;AACF;AA9BI,IAAP;AAgCD,E;;;;;;;;;;;SC7CexF,Y,GAAAA,Y;;AAFhB;;AAEO,UAASA,YAAT,CAAsBpD,OAAtB,EAA+B;AACpC,UAAO;AACLygB,iBAAY,oBAAS9gB,IAAT,EAAe;AACzB;AACA,WAAIA,KAAKxB,IAAL,KAAc,cAAd,IACAwB,KAAKG,MAAL,CAAYhD,IAAZ,KAAqB,kBADzB,EAC6C;AAC3C,gBAAOkD,QAAQggB,MAAR,CAAergB,IAAf,EAAqB,uBAAaiJ,IAAlC,CAAP;AACD;AACF;AAPI,IAAP;AASD,E;;;;;;;;;;;SCTevF,qB,GAAAA,qB;;AAHhB;;AAGO,UAASA,qBAAT,CAA+BrD,OAA/B,EAAwC;AAC7C,UAAO;AACLygB,iBAAY,oBAAS9gB,IAAT,EAAe;AACzB;AACA,WAAIA,KAAKG,MAAL,CAAYc,IAAZ,IAAoBjB,KAAKG,MAAL,CAAYc,IAAZ,CAAiBkI,KAAjB,KAA2B,cAAnD,EAAmE;AACjE,gBAAO9I,QAAQggB,MAAR,CAAergB,IAAf,EAAqB,gCAAsBiJ,IAA3C,CAAP;AACD;AACF,MANI;AAOL8X,uBAAkB,0BAAS/gB,IAAT,EAAe;AAC/B;AACA;AACA,WAAIA,KAAK4T,QAAL,CAAcpV,IAAd,KAAuB,cAAvB,IACAwB,KAAK4T,QAAL,CAAczK,KAAd,KAAwB,cAD5B,EAC4C;AAC1C9I,iBAAQggB,MAAR,CAAergB,IAAf,EAAqB,gCAAsBiJ,IAA3C;AACD;AACF;AAdI,IAAP;AAgBD,E;;;;;;;;;;;SCjBetF,sB,GAAAA,sB;;AAHhB;;AACA;;AAEO,UAASA,sBAAT,CAAgCtD,OAAhC,EAAyC;AAC9C,OAAI8B,WAAW9B,QAAQyhB,WAAR,EAAf;;AAEA;AACA,OAAI3f,SAAS7D,OAAT,CAAiB,uBAAjB,MAA8C,CAAlD,EAAqD;AACnD,YAAO;AACL2iB,uBAAgB,wBAASjhB,IAAT,EAAe;AAC7B,aAAIC,OAAO,8BAAkBD,IAAlB,CAAX;;AAEA,aAAIC,KAAKzB,IAAL,KAAc,MAAd,IAAwByB,KAAKzB,IAAL,KAAc,WAA1C,EAAuD;AACrD,kBAAO6B,QAAQggB,MAAR,CAAergB,IAAf,EAAqB,mCAAuBiJ,IAA5C,CAAP;AACD;AACF;AAPI,MAAP;AASD,IAVD,MAUO;AACL,YAAO,EAAP;AACD;AACF,E;;;;;;;;;;;SCjBerF,qB,GAAAA,qB;;AAHhB;;AAGO,UAASA,qBAAT,CAA+BvD,OAA/B,EAAwC;AAC7C,UAAO;AACL4gB,qBAAgB,wBAASjhB,IAAT,EAAe;AAC7B,WAAIA,KAAKE,MAAL,CAAY/C,IAAZ,KAAqB,kBAArB,IACA6C,KAAKE,MAAL,CAAY0T,QAAZ,CAAqBzW,IAArB,KAA8B,YAD9B,IAEA6C,KAAKE,MAAL,CAAY0T,QAAZ,CAAqBpV,IAArB,KAA8B,YAFlC,EAEgD;;AAE9C,aAAIwB,KAAKqhB,SAAL,CAAe5hB,MAAnB,EAA2B;AACzB,eAAIsiB,MAAM/hB,KAAKqhB,SAAL,CAAe,CAAf,CAAV;AACA,eAAIU,IAAI5kB,IAAJ,KAAa,SAAjB,EAA4B;AAC1B,oBAAOkD,QAAQggB,MAAR,CAAergB,IAAf,EAAqB,gCAAsBiJ,IAA3C,CAAP;AACD;AACF;AACF;AACF;AAbI,IAAP;AAeD,E;;;;;;;;;;;SCfepF,qB,GAAAA,qB;;AAJhB;;AACA;;AAGO,UAASA,qBAAT,CAA+BxD,OAA/B,EAAwC;AAC7C,UAAO;AACL4gB,qBAAgB,wBAASjhB,IAAT,EAAe;AAC7B,WAAIA,KAAKE,MAAL,CAAY/C,IAAZ,KAAqB,kBAArB,IACA6C,KAAKE,MAAL,CAAY0T,QAAZ,CAAqBzW,IAArB,KAA8B,YAD9B,IAEA6C,KAAKE,MAAL,CAAY0T,QAAZ,CAAqBpV,IAArB,KAA8B,YAFlC,EAEgD;;AAE9C,aAAIwB,KAAKqhB,SAAL,CAAe5hB,MAAnB,EAA2B;AACzB,eAAIsiB,MAAM/hB,KAAKqhB,SAAL,CAAe,CAAf,CAAV;AACA,eAAIU,IAAI5kB,IAAJ,KAAa,SAAb,IACA,uBAAW4kB,IAAI5Y,KAAf,MAA0B,KAD9B,EACqC;AACnC,oBAAO9I,QAAQggB,MAAR,CAAergB,IAAf,EAAqB,gCAAsBiJ,IAA3C,CAAP;AACD;AACF;AACF;AACF;AAdI,IAAP;AAgBD,E;;;;;;;;;;;SCbenF,e,GAAAA,e;;AARhB;;AAGA;AACA;AACA;AACA;AACA;AACO,UAASA,eAAT,CAAyBzD,OAAzB,EAAkC;AACvC,YAAS2hB,sBAAT,CAAgChiB,IAAhC,EAAsC;AACpC,SAAIA,KAAKE,MAAL,CAAY1B,IAAZ,KAAqB,kBAArB,IACAwB,KAAKE,MAAL,CAAY/C,IAAZ,KAAqB,YADzB,EACuC;;AAErC,WAAI6C,KAAKqhB,SAAL,CAAe,CAAf,EAAkBlkB,IAAlB,KAA2B,YAA3B,IACA6C,KAAKqhB,SAAL,CAAe,CAAf,EAAkBlkB,IAAlB,KAA2B,kBAD/B,EACmD;AACjD,gBAAOkD,QAAQggB,MAAR,CAAergB,IAAf,EAAqB,0BAAgBiJ,IAArC,CAAP;AACD;AACF;AACF;;AAED,UAAO;AACLgY,qBAAgBe,sBADX;AAELC,oBAAeD;AAFV,IAAP;AAID,E;;;;;;;;;;;SCrBeje,gB,GAAAA,gB;;AAHhB;;AACA;;AAEO,UAASA,gBAAT,CAA0B1D,OAA1B,EAAmC;AACxC,UAAO;AACL0gB,uBAAkB,0BAAS/gB,IAAT,EAAe;AAC/B,WAAIA,KAAKI,MAAL,CAAYA,MAAZ,IACA,CAAC,QAAD,EAAW,SAAX,EAAsBqC,QAAtB,CAA+BzC,KAAKI,MAAL,CAAYA,MAAZ,CAAmB5B,IAAlD,CADJ,EAC6D;AAC3D,aAAIsT,MAAS9R,KAAKI,MAAL,CAAYwT,QAAZ,CAAqBpV,IAA9B,SAAsCwB,KAAK4T,QAAL,CAAcpV,IAAxD;AACA,aAAI,uBAAgBiE,QAAhB,CAAyBqP,GAAzB,CAAJ,EAAmC;AACjC,kBAAOzR,QAAQggB,MAAR,CAAergB,IAAf,EAAqB,yBAAa8R,GAAb,CAArB,CAAP;AACD;AACF;AACF;AATI,IAAP;AAWD,E;;;;;;;;;;;SCFe9N,a,GAAAA,a;;AAbhB;;AACA;;AAEA,KAAMke,cAAc,YAApB;;AAEA;;;;;;;;AAQO,UAASle,aAAT,CAAuB3D,OAAvB,EAAgC;AACrC,UAAO;AACL4gB,qBAAgB,wBAASjhB,IAAT,EAAe;AAC7B,WAAImiB,oBAAoB,KAAxB;AACA,WAAIniB,KAAKE,MAAL,CAAY1B,IAAZ,KAAqB,SAArB,IACAwB,KAAKqhB,SADL,IAEArhB,KAAKqhB,SAAL,CAAe5hB,MAFnB,EAE2B;;AAEzB,aAAI+hB,WAAWxhB,KAAKqhB,SAAL,CAAe,CAAf,CAAf;;AAEA;AACA;AACA,aAAIG,SAASrkB,IAAT,KAAkB,SAAlB,IACAqkB,SAASrY,KAAT,KAAmB+Y,WADvB,EACoC;AAClCC,+BAAoB,IAApB;AACD;;AAED;AACA;AACA,aAAIX,SAASrkB,IAAT,KAAkB,YAAtB,EAAoC;AAClC,eAAIskB,UAAU,wBAAYphB,OAAZ,EAAqBmhB,SAAShjB,IAA9B,CAAd;AACA,eAAIijB,WAAWA,QAAQtkB,IAAR,KAAiB,SAA5B,IACAskB,QAAQtY,KAAR,KAAkB+Y,WADtB,EACmC;AACjCC,iCAAoB,IAApB;AACD;AACF;;AAED,aAAIA,iBAAJ,EAAuB;AACrB,kBAAO9hB,QAAQggB,MAAR,CAAergB,IAAf,EAAqB,gCAAsBiJ,IAA3C,CAAP;AACD;AACF;AACF;AA9BI,IAAP;AAgCD,E;;;;;;;;;;;;;;AC9CD;;;;AACA;;;;;;;;;;;;KAGqBmZ,W;;;;;;;;;;;oCAEJ;AACb,cAAO5gB,QAAQC,OAAR,CAAgB,KAAKka,QAArB,CAAP;AACD;;;4BAEM;AAAA;;AACL,cAAO,KAAKpR,WAAL,GACJR,IADI,CACC,UAACW,IAAD,EAAU;AACd,aAAI2X,aAAa,mBAAe3X,IAAf,EAAqB,OAAKqR,OAAL,CAAa/U,SAAlC,EAA6C;AAC5D7E,qBAAU,OAAKA,QAD6C,EAA7C,CAAjB;AAEAkgB,oBAAW/f,KAAX;AACA,gBAAOd,QAAQC,OAAR,CAAgB,EAAhB,CAAP;AACD,QANI,EAOJ6J,KAPI,CAOE,UAACjE,GAAD,EAAS;AACd,gBAAO7F,QAAQ4a,MAAR,CAAe/U,GAAf,CAAP;AACD,QATI,CAAP;AAUD;;;;;;mBAjBkB+a,W;;;;;;;;;;;;;;ACJrB;;;;AAEA;;AACA;;;;AACA;;KAAY/F,K;;;;;;;;;;;;KAGSiG,U;;;AAInB,uBAAY3G,QAAZ,EAAsBxZ,QAAtB,EAA4C;AAAA,SAAZ4Z,OAAY,uEAAJ,EAAI;;AAAA;;AAE1C;AACA;AACA;AACA;AACA;AACA;AAP0C,yHACpCJ,QADoC,EAC1BxZ,QAD0B,EAChB4Z,OADgB;;AAAA,WAF5CC,aAE4C,GAF5BK,KAE4B;AAQ1C,SAAI,OAAO,MAAKN,OAAL,CAAanG,SAApB,KAAkC,WAAtC,EAAmD;AACjD,aAAKmG,OAAL,CAAanG,SAAb;AACD;AAVyC;AAW3C;;;;oCAEc;AAAA;;AACb,cAAO,IAAIpU,OAAJ,CAAY,UAACC,OAAD,EAAU2a,MAAV,EAAqB;AACtC,aAAI5R,SAAS,IAAI,iBAAO+X,SAAX,CAAqB;AAChCC,yBAAc,sBAACnb,GAAD,EAAS;AACrB+U,oBAAO,IAAIrf,KAAJ,qBAA4BsK,GAA5B,CAAP;AACD;AAH+B,UAArB,EAIVob,eAJU,CAIM,OAAK9G,QAJX,EAIqB,UAJrB,CAAb;;AAMAla,iBAAQ+I,MAAR;AACD,QARM,CAAP;AASD;;;;;;mBA3BkB8X,U;;;;;;ACPrB,oC;;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,I;;;;;;;;;;;SCKgBI,Y,GAAAA,Y;SAwCAC,a,GAAAA,a;;AA7ChB;;AAEA;;KAAYpc,Q;;;;AAGL,UAASmc,YAAT,CAAsBlY,MAAtB,EAA8BrI,QAA9B,EAAwD;AAAA,kFAAJ,EAAI;;AAAA,OAAfyT,SAAe,QAAfA,SAAe;;AAC7D,UAAO,IAAIpU,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC9B,SAAImhB,sCAAJ;AACA,SAAIlH,iBAAiB,EAArB;;AAEA,SAAImH,gBAAgBrY,OACjBsY,sBADiB,CACMlN,SADN,EACiB,QADjB,EAC2BnW,MAD3B,GACoC,CADxD;;AAGA,SAAIojB,aAAJ,EAAmB;AACjBD,oBAAaA,WAAWpG,MAAX,qCAAb;AACD;;AAED;AACAd,sBAAiBA,eAAec,MAAf,CACfmG,cAAc;AACZnY,eAAQA,MADI;AAEZoL,kBAAWA,SAFC;AAGZmN,aAAMH,UAHM;AAIZzlB,oCAJY;AAKZ6lB,eAAQ,kBALI;AAMZ7gB,iBAAUA;AANE,MAAd,CADe,CAAjB;;AAWA;AACAuZ,sBAAiBA,eAAec,MAAf,CACfmG,cAAc;AACZnY,eAAQA,MADI;AAEZoL,kBAAWA,SAFC;AAGZmN,qCAHY;AAIZ5lB,sCAJY;AAKZ6lB,eAAQ,eALI;AAMZ7gB,iBAAUA;AANE,MAAd,CADe,CAAjB;;AAWAV,aAAQia,cAAR;AACD,IApCM,CAAP;AAqCD;;AAEM,UAASiH,aAAT,GACwC;AAAA,mFAAJ,EAAI;;AAAA,OADhBnY,MACgB,SADhBA,MACgB;AAAA,OADRoL,SACQ,SADRA,SACQ;AAAA,OADGmN,IACH,SADGA,IACH;AAAA,OADS5lB,IACT,SADSA,IACT;AAAA,OADe6lB,MACf,SADeA,MACf;AAAA,OAAhB7gB,QAAgB,SAAhBA,QAAgB;;AAC7C,OAAIuZ,iBAAiB,EAArB;;AAD6C;AAAA;AAAA;;AAAA;AAG7C,0BAAgBqH,IAAhB,8HAAsB;AAAA,WAAblM,GAAa;;AACpB,WAAIT,WAAW5L,OAAOsY,sBAAP,CAA8BlN,SAA9B,EAAyCiB,GAAzC,CAAf;;AAEA,YAAK,IAAIrX,IAAI,CAAb,EAAgBA,IAAI4W,SAAS3W,MAA7B,EAAqCD,GAArC,EAA0C;AACxC,aAAIigB,UAAUrJ,SAAS6M,IAAT,CAAczjB,CAAd,CAAd;AACA,aAAImgB,iBAAeqD,MAAf,GAAwBnM,IAAIlU,WAAJ,EAA5B;;AAEA+Y,wBAAepT,IAAf,CAAoB;AAClBW,iBAAM0W,SADY;AAElBnY,oBAASjB,SAASoZ,SAAT,EAAoBnY,OAFX;AAGlB+B,wBAAahD,SAASoZ,SAAT,EAAoBpW,WAHf;AAIlBsW,6BAAgBhJ,GAAhB,MAJkB,EAIM;AACxBrN,iBAAMrH,QALY;AAMlBtC,iBAAM4f,QAAQ5f,IANI;AAOlB4J,mBAAQgW,QAAQhW,MAPE;AAQlBtM,iBAAMA;AARY,UAApB;AAUD;AACF;AArB4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAuB7C,UAAOue,cAAP;AACD,E;;;;;;;;;;;;;;ACtED;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,I;;;;;;;;;;;;;;;ACFA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;;;AAGA;;;;;;KAMawH,G,WAAAA,G;;;AAEX,gBAAYC,QAAZ,EAAgE;AAAA,SAA1CC,MAA0C;;AAAA,SAA5BC,SAA4B;;AAAA,SAARC,GAAQ;;AAAA;;AAAA,2GACxDH,QADwD,EAC9CC,MAD8C;;AAE9D,WAAKG,EAAL,GAAUD,GAAV;AACA,WAAKE,QAAL,GAAgBH,SAAhB;AAH8D;AAI/D;;;;4BAEM;AAAA;;AACL,cAAO,IAAI7hB,OAAJ,CAAY,UAACC,OAAD,EAAU2a,MAAV,EAAqB;AACtC;AACA;AACA,gBAAKmH,EAAL,CAAQE,QAAR,CAAiB,OAAKjhB,IAAtB,EAA4B,UAAC6E,GAAD,EAAMkU,MAAN,EAAiB;AAC3C,eAAIlU,GAAJ,EAAS;AACP,oBAAO+U,OAAO/U,GAAP,CAAP;AACD;AACD;AACA,kBAAKmc,QAAL,CAAcjI,MAAd,EAAsB,UAAClU,GAAD,EAAMkO,IAAN,EAAe;AACnC,iBAAIlO,GAAJ,EAAS;AACP,sBAAO+U,OAAO/U,GAAP,CAAP;AACD;;AAED,8BAAIwC,KAAJ,CAAU,iCAAV,EAA6C0L,IAA7C;AACA;AACA,oBAAK6N,MAAL,CAAYM,UAAZ,CAAuBnO,KAAK5U,IAA5B,EAAkC,UAAC0G,GAAD,EAAMsc,OAAN,EAAkB;AAClD,mBAAItc,GAAJ,EAAS;AACP,wBAAO+U,OAAO/U,GAAP,CAAP;AACD;;AAED5F,uBAAQkiB,OAAR;AACD,cAND;AAOD,YAdD;AAeD,UApBD;AAqBD,QAxBM,CAAP;AAyBD;;;8BAEQC,mB,EAAqB;AAAA;;AAC5B,cAAO,IAAIpiB,OAAJ,CAAY,UAACC,OAAD,EAAU2a,MAAV,EAAqB;AACtC;AACA;AACA,aAAIje,OAAOC,IAAP,CAAY,OAAK4L,KAAjB,EAAwBvK,MAA5B,EAAoC;AAClC,kBAAOgC,QAAQ,OAAKuI,KAAb,CAAP;AACD;;AAED,gBAAO,OAAK6Z,IAAL,GACJ9Z,IADI,CACC,UAAC+Z,OAAD,EAAa;;AAEjBA,mBAAQpG,EAAR,CAAW,OAAX,EAAoB,UAAC9B,KAAD,EAAW;AAC7B,oBAAKmI,WAAL,CAAiBnI,KAAjB,EAAwBQ,MAAxB;AACD,YAFD;;AAIA;AACA;AACA;AACA;AACA0H,mBAAQpG,EAAR,CAAW,KAAX,EAAkB,YAAM;AACtBjc,qBAAQ,OAAKuI,KAAb;AACD,YAFD;;AAIA,eAAI4Z,mBAAJ,EAAyB;AACvB;AACA;AACA,iBAAI,OAAOA,mBAAP,KAA+B,UAAnC,EAA+C;AAC7CA;AACD;AACF;AACF,UAtBI,EAuBJtY,KAvBI,CAuBE8Q,MAvBF,CAAP;AAwBD,QA/BM,CAAP;AAgCD;;;;;;;;;;ACpFH,wC;;;;;;ACAA,mC;;;;;;;;;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AAEA;;AAEA;;;;AACA;;;;;;;;;;;;AAGA;;;;;;;;;KASa4H,G,WAAAA,G;;;AAEX,gBAAYb,QAAZ,EAAoC;AAAA,SAAdC,MAAc;;AAAA;;AAAA,2GAC5BD,QAD4B;;AAElC,WAAKC,MAAL,GAAcA,MAAd;AAFkC;AAGnC;;;;4BAEM;AAAA;;AACL,cAAO,IAAI5hB,OAAJ,CAAY,UAACC,OAAD,EAAU2a,MAAV,EAAqB;AACtC,gBAAKgH,MAAL,CAAYS,IAAZ,CAAiB,OAAKrhB,IAAtB,EAA4B,UAAC6E,GAAD,EAAMyc,OAAN,EAAkB;AAC5C,eAAIzc,GAAJ,EAAS;AACP,oBAAO+U,OAAO/U,GAAP,CAAP;AACD;AACD5F,mBAAQqiB,OAAR;AACD,UALD;AAMD,QAPM,CAAP;AAQD;;;iCAEWlI,K,EAAOQ,M,EAAQ;AACzB,WAAI,MAAMnC,IAAN,CAAW2B,MAAMrM,QAAjB,CAAJ,EAAgC;AAC9B;AACD;AACD,WAAI,CAAC,KAAKvC,cAAL,CAAoB4O,MAAMrM,QAA1B,CAAL,EAA0C;AACxC,0BAAI1F,KAAJ,qBAA4B+R,MAAMrM,QAAlC;AACA;AACD;AACD,WAAI,KAAK0U,OAAL,CAAaxhB,QAAb,CAAsBmZ,MAAMrM,QAA5B,CAAJ,EAA2C;AACzC,0BAAI5S,IAAJ,CAAS,6CAAT,EAAwDif,MAAMrM,QAA9D;AACA6M,gBAAO,IAAIrf,KAAJ,+CACF6e,MAAMrM,QADJ,EAAP;AAED;AACD,YAAK0U,OAAL,CAAa3b,IAAb,CAAkBsT,MAAMrM,QAAxB;AACA,YAAKvF,KAAL,CAAW4R,MAAMrM,QAAjB,IAA6BqM,KAA7B;AACD;;;8BAEQgI,mB,EAAqB;AAAA;;AAC5B,cAAO,IAAIpiB,OAAJ,CAAY,UAACC,OAAD,EAAU2a,MAAV,EAAqB;AACtC;AACA;AACA,aAAIje,OAAOC,IAAP,CAAY,OAAK4L,KAAjB,EAAwBvK,MAA5B,EAAoC;AAAA;AAClC,iBAAMykB,cAAc,EAApB;AACA/lB,oBAAOC,IAAP,CAAY,OAAK4L,KAAjB,EAAwB3I,OAAxB,CAAgC,UAACkO,QAAD,EAAc;AAC5C,mBAAI,OAAKvC,cAAL,CAAoBuC,QAApB,CAAJ,EAAmC;AACjC2U,6BAAY3U,QAAZ,IAAwB,OAAKvF,KAAL,CAAWuF,QAAX,CAAxB;AACD,gBAFD,MAEO;AACL,kCAAI1F,KAAJ,4BAAmC0F,QAAnC;AACD;AACF,cAND;AAOA;AAAA,kBAAO9N,QAAQyiB,WAAR;AAAP;AATkC;;AAAA;AAUnC;;AAED,gBAAO,OAAKL,IAAL,GACJ9Z,IADI,CACC,UAAC+Z,OAAD,EAAa;;AAEjBA,mBAAQpG,EAAR,CAAW,OAAX,EAAoB,UAAC9B,KAAD,EAAW;AAC7B,oBAAKmI,WAAL,CAAiBnI,KAAjB,EAAwBQ,MAAxB;AACD,YAFD;;AAIA;AACA;AACA;AACA;AACA;AACA0H,mBAAQpG,EAAR,CAAW,OAAX,EAAoB,YAAM;AACxBjc,qBAAQ,OAAKuI,KAAb;AACD,YAFD;;AAIA,eAAI4Z,mBAAJ,EAAyB;AACvB;AACA;AACA,iBAAI,OAAOA,mBAAP,KAA+B,UAAnC,EAA+C;AAC7CA;AACD;AACF;AACF,UAvBI,EAwBJtY,KAxBI,CAwBE8Q,MAxBF,CAAP;AAyBD,QAxCM,CAAP;AAyCD;;;+BAES5Z,I,EAAM;AACd,WAAI,CAAC,KAAKwH,KAAL,CAAWC,cAAX,CAA0BzH,IAA1B,CAAL,EAAsC;AACpC,eAAM,IAAIzF,KAAJ,YAAmByF,IAAnB,kCAAN;AACD;;AAED,WAAI,KAAKwH,KAAL,CAAWxH,IAAX,EAAiB0J,gBAAjB,GAAoC,KAAKiY,YAA7C,EAA2D;AACzD,eAAM,IAAIpnB,KAAJ,YAAmByF,IAAnB,+BAAN;AACD;AACF;;;qCAEeA,I,EAAM;AAAA;;AACpB,cAAO,IAAIhB,OAAJ,CAAY,UAACC,OAAD,EAAU2a,MAAV,EAAqB;AACtC,gBAAKgI,SAAL,CAAe5hB,IAAf;AACA,gBAAO,OAAKqhB,IAAL,GACJ9Z,IADI,CACC,UAAC+Z,OAAD,EAAa;AACjBA,mBAAQO,cAAR,CAAuB,OAAKra,KAAL,CAAWxH,IAAX,CAAvB,EAAyC,UAAC6E,GAAD,EAAMid,UAAN,EAAqB;AAC5D,iBAAIjd,GAAJ,EAAS;AACP,sBAAO+U,OAAO/U,GAAP,CAAP;AACD;AACD5F,qBAAQ6iB,WAAWC,IAAX,CAAgB,+BAAhB,CAAR;AACD,YALD;AAMD,UARI,EASJjZ,KATI,CASE8Q,MATF,CAAP;AAUD,QAZM,CAAP;AAaD;;;qCAEe5Z,I,EAAM;AACpB,cAAO,KAAKgiB,eAAL,CAAqBhiB,IAArB,EACJuH,IADI,CACC,UAAC0a,UAAD,EAAgB;AACpB,gBAAO,IAAIjjB,OAAJ,CAAY,UAACC,OAAD,EAAU2a,MAAV,EAAqB;AACtC,eAAIsI,aAAa,EAAjB;AACAD,sBAAW/G,EAAX,CAAc,MAAd,EAAsB,UAACiH,KAAD,EAAW;AAC/BD,2BAAcC,KAAd;AACD,YAFD;;AAIA;AACAF,sBAAW/G,EAAX,CAAc,KAAd,EAAqB,YAAM;AACzBjc,qBAAQijB,UAAR;AACD,YAFD;;AAIAD,sBAAW/G,EAAX,CAAc,OAAd,EAAuBtB,MAAvB;AACD,UAZM,CAAP;AAaD,QAfI,CAAP;AAgBD;;;sCAEgB5Z,I,EAAMoiB,W,EAAa;AAAA;;AAClC,cAAO,IAAIpjB,OAAJ,CAAY,UAACC,OAAD,EAAU2a,MAAV,EAAqB;AACtC,gBAAKgI,SAAL,CAAe5hB,IAAf;AACA,gBAAO,OAAKqhB,IAAL,GACJ9Z,IADI,CACC,UAAC+Z,OAAD,EAAa;AACjBA,mBAAQO,cAAR,CAAuB,OAAKra,KAAL,CAAWxH,IAAX,CAAvB,EAAyC,UAAC6E,GAAD,EAAMid,UAAN,EAAqB;AAC5D,iBAAIjd,GAAJ,EAAS;AACP,sBAAO+U,OAAO/U,GAAP,CAAP;AACD;AACDid,wBAAWC,IAAX,CACE,gCAAiB,EAACK,aAAaA,WAAd,EAAjB,EACE,UAASle,CAAT,EAAYme,GAAZ,EAAiB;AACfpjB,uBAAQojB,GAAR;AACD,cAHH,CADF;AAOD,YAXD;AAYD,UAdI,EAeJvZ,KAfI,CAeE8Q,MAfF,CAAP;AAgBD,QAlBM,CAAP;AAmBD;;;;;;;;;;ACnKH,8C;;;;;;ACAA,gD;;;;;;;;;;;;;;;;;ACAA;;AACA;;;;;;AAEA;;;;KAIa0I,M,WAAAA,M;AAEX,mBAAYC,gBAAZ,EAA8B;AAAA;;AAC5B,UAAKviB,IAAL,GAAYuiB,gBAAZ;AACA,UAAK/a,KAAL,GAAa,EAAb;AACA,UAAKia,OAAL,GAAe,EAAf;AACA;AACA;AACA,UAAKE,YAAL,GAAoB,OAAO,IAAP,0BAApB;AACA;AACA;AACA,UAAKnX,cAAL,GAAsB;AAAA,cAAM,IAAN;AAAA,MAAtB;AACD;;;;yCAEmBgY,Q,EAAU;AAC5B,WAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClC,cAAKhY,cAAL,GAAsBgY,QAAtB;AACD;AACF;;;6BAEOxiB,I,EAA+B;AAAA,WAAzByiB,cAAyB,uEAAV,QAAU;;AACrC,eAAQA,cAAR;AACE,cAAK,QAAL;AACE,kBAAO,KAAKT,eAAL,CAAqBhiB,IAArB,CAAP;AACF,cAAK,QAAL;AACE,kBAAO,KAAK4H,eAAL,CAAqB5H,IAArB,CAAP;AACF,cAAK,OAAL;AACE;AACA;AACA;AACA,kBAAO,KAAK0iB,gBAAL,CAAsB1iB,IAAtB,2CAAP;;AAEF;AACE,iBAAM,IAAIzF,KAAJ,+CACKkoB,cADL,EAAN;AAZJ;AAgBD;;;qCAE4B;AAAA,yCAAZE,UAAY;AAAZA,mBAAY;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAE3B,8BAAgBA,UAAhB,8HAA4B;AAAA,eAAnBC,GAAmB;;AAC1B,eAAIA,IAAI9mB,OAAJ,CAAY,GAAZ,MAAqB,CAAzB,EAA4B;AAC1B;AACA;AACA;AACA,oBAAOkD,QAAQ4a,MAAR,CAAe,IAAIrf,KAAJ,CAAU,oCAAV,CAAf,CAAP;AACD;AACF;AAT0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAW3B,cAAO,KAAK+M,QAAL,GACJC,IADI,CACC,UAACsb,WAAD,EAAiB;AACrB,aAAIrb,QAAQ,EAAZ;;AAEA,cAAK,IAAI7H,QAAT,IAAqBkjB,WAArB,EAAkC;AAAA;AAAA;AAAA;;AAAA;AAChC,mCAAgBF,UAAhB,mIAA4B;AAAA,mBAAnBC,GAAmB;;AAC1B,mBAAIjjB,SAAS2K,QAAT,CAAkBsY,GAAlB,CAAJ,EAA4B;AAC1Bpb,uBAAM1B,IAAN,CAAWnG,QAAX;AACD;AACF;AAL+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMjC;;AAED,gBAAO6H,KAAP;AACD,QAbI,CAAP;AAcD;;;gCAEU;AACT,cAAOxI,QAAQ4a,MAAR,CACL,IAAIrf,KAAJ,CAAU,6BAAV,CADK,CAAP;AAED;;;uCAEiB;AAChB,cAAOyE,QAAQ4a,MAAR,CACL,IAAIrf,KAAJ,CAAU,oCAAV,CADK,CAAP;AAED;;;uCAEiB;AAChB,cAAOyE,QAAQ4a,MAAR,CACL,IAAIrf,KAAJ,CAAU,oCAAV,CADK,CAAP;AAED;;;wCAEkB;AACjB,cAAOyE,QAAQ4a,MAAR,CACL,IAAIrf,KAAJ,CAAU,qCAAV,CADK,CAAP;AAED;;;;;;;;;;;;;;;;;;;;;AC3FH;;KAAYyF,I;;AACZ;;AACA;;;;AACA;;;;AAEA;;AACA;;AAEA;;AAGA;;;;;;;;;;;;;;;;KAGa8iB,S,WAAAA,S;;;;;;;;;;;gCAEwB;AAAA;;AAAA,WAA1BC,YAA0B;;AAEjC;AACA;AACA,WAAIpnB,OAAOC,IAAP,CAAY,KAAK4L,KAAjB,EAAwBvK,MAA5B,EAAoC;AAClC,0BAAI9C,IAAJ,gDACY,KAAK6F,IADjB;AAEA,gBAAOhB,QAAQC,OAAR,CAAgB,KAAKuI,KAArB,CAAP;AACD;;AAED,cAAOub,aACL,KAAK/iB,IADA,EACM;AACTyM,4BAAmB;AAAA,kBAAa,OAAKjC,cAAL,yBAAb;AAAA;AADV,QADN,EAIJjD,IAJI,CAIC,UAACC,KAAD,EAAW;AACf,gBAAKA,KAAL,GAAaA,KAAb;AACA,gBAAKia,OAAL,GAAe9lB,OAAOC,IAAP,CAAY4L,KAAZ,CAAf;AACA,gBAAOA,KAAP;AACD,QARI,CAAP;AASD;;;6BAEOwb,gB,EAAkB;AACxB,WAAI,CAAC,KAAKxb,KAAL,CAAWC,cAAX,CAA0Bub,gBAA1B,CAAL,EAAkD;AAChD,gBAAOhkB,QAAQ4a,MAAR,CACL,IAAIrf,KAAJ,YAAmByoB,gBAAnB,mCADK,CAAP;AAED;;AAED,WAAI,KAAKxb,KAAL,CAAWwb,gBAAX,EAA6BvZ,IAA7B,GAAoC,KAAKkY,YAA7C,EAA2D;AACzD,gBAAO3iB,QAAQ4a,MAAR,CACL,IAAIrf,KAAJ,YAAmByoB,gBAAnB,8BADK,CAAP;AAED;;AAED,WAAIC,kBAAkBjjB,KAAKf,OAAL,CAAa,KAAKe,IAAlB,CAAtB;AACA,WAAI2gB,WAAW3gB,KAAKf,OAAL,CAAae,KAAKjE,IAAL,CAAUknB,eAAV,EAA2BD,gBAA3B,CAAb,CAAf;;AAEA;AACA;AACA,WAAI,CAACrC,SAASjhB,UAAT,CAAoBujB,eAApB,CAAD,IACAD,iBAAiBtjB,UAAjB,CAA4B,GAA5B,CADJ,EACsC;AACpC,gBAAOV,QAAQ4a,MAAR,CACL,IAAIrf,KAAJ,wCAA+C,KAAKyF,IAApD,CADK,CAAP;AAED;;AAED,cAAOhB,QAAQC,OAAR,CAAgB0hB,QAAhB,CAAP;AACD;;;qCAEeqC,gB,EAAkB;AAChC,cAAO,KAAKE,OAAL,CAAaF,gBAAb,EACJzb,IADI,CACC,UAACoZ,QAAD,EAAc;AAClB,gBAAO3hB,QAAQC,OAAR,CAAgB,0BAAiB0hB,QAAjB,EAA2B;AAChDwC,kBAAO,GADyC;AAEhDC,qBAAU,MAFsC;AAGhDC,sBAAW;AAHqC,UAA3B,EAIpBtB,IAJoB,CAIf,+BAJe,CAAhB,CAAP;AAKD,QAPI,CAAP;AAQD;;;qCAEe/hB,I,EAAM;AACpB,cAAO,KAAKgiB,eAAL,CAAqBhiB,IAArB,EACJuH,IADI,CACC,UAACua,UAAD,EAAgB;AACpB,gBAAO,IAAI9iB,OAAJ,CAAY,UAACC,OAAD,EAAU2a,MAAV,EAAqB;AACtC,eAAI0J,UAAU,EAAd;AACAxB,sBAAW5G,EAAX,CAAc,UAAd,EAA0B,YAAM;AAC9B,iBAAIiH,KAAJ;AACA,oBAAO,UAAUA,QAAQL,WAAWyB,IAAX,EAAlB,CAAP,EAA6C;AAC3CD,0BAAWnB,MAAMqB,QAAN,EAAX;AACD;AACF,YALD;;AAOA1B,sBAAW5G,EAAX,CAAc,KAAd,EAAqB,YAAM;AACzBjc,qBAAQqkB,OAAR;AACD,YAFD;;AAIAxB,sBAAW5G,EAAX,CAAc,OAAd,EAAuBtB,MAAvB;AACD,UAdM,CAAP;AAeD,QAjBI,CAAP;AAkBD;;;sCAEgBoJ,gB,EAAkBZ,W,EAAa;AAC9C,cAAO,KAAKc,OAAL,CAAaF,gBAAb,EACJzb,IADI,CACC,UAACoZ,QAAD,EAAc;AAClB,gBAAO,IAAI3hB,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC9B,qCAAiB0hB,QAAjB,EAA2B;AACzBwC,oBAAO,GADkB;AAEzB;AACA;AACAC,uBAAU,IAJe;AAKzBC,wBAAW;AALc,YAA3B,EAOCtB,IAPD,CAQE,gCAAiB,EAACK,aAAaA,WAAd,EAAjB,EACE,UAASle,CAAT,EAAYme,GAAZ,EAAiB;AACfpjB,qBAAQojB,GAAR;AACD,YAHH,CARF;AAcD,UAfM,CAAP;AAgBD,QAlBI,CAAP;AAmBD;;;;;;;;;;AClHH,4C","file":"addons-linter.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f1b06a2f75bba2f887f3\n **/","import { getConfig } from 'cli';\nimport Linter from 'linter';\nimport log from 'logger';\n\n/* istanbul ignore if */\nif (!global._babelPolyfill) {\n  require('babel-polyfill');\n}\n\n\nexport function isRunFromCLI(_module=module) {\n  return require.main === _module;\n}\n\nexport function createInstance({\n  config=getConfig({useCLI: isRunFromCLI()}).argv, runAsBinary=false,\n} = {}) {\n  log.level(config.logLevel);\n  log.info('Creating new linter instance', { config: config });\n  config.runAsBinary = runAsBinary;\n  return new Linter(config);\n}\n\nexport default Linter;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 1\n ** module chunks = 0\n **/","import argv from 'yargs';\n\nimport log from 'logger';\nimport { singleLineString } from 'utils';\nimport { version } from 'json!../package';\n\n\nexport function getConfig({useCLI=true} = {}) {\n  if (useCLI === false) {\n    log.error(singleLineString`Config requested from CLI, but not in CLI mode.\n      Please supply a config instead of relying on the getConfig() call.`);\n    throw new Error('Cannot request config from CLI in library mode');\n  }\n\n  return argv\n    .usage(`Usage: ./$0 [options] addon-package-or-dir \\n\\n\n      Add-ons Linter (JS Edition) v${version}`)\n    .option('log-level', {\n      describe: 'The log-level to generate',\n      type: 'string',\n      default: 'fatal',\n      choices: ['fatal', 'error', 'warn', 'info', 'debug', 'trace'],\n    })\n    .option('output', {\n      alias: 'o',\n      describe: 'The type of output to generate',\n      type: 'string',\n      default: 'text',\n      choices: ['json', 'text'],\n    })\n    .option('metadata', {\n      describe: 'Output only metadata as JSON',\n      type: 'boolean',\n      default: 'false',\n    })\n    .option('pretty', {\n      describe: 'Prettify JSON output',\n      type: 'boolean',\n      default: false,\n    })\n    .option('stack', {\n      describe: 'Show stacktraces when errors are thrown',\n      type: 'boolean',\n      default: false,\n    })\n    .option('boring', {\n      describe: 'Disables colorful shell output',\n      type: 'boolean',\n      default: false,\n    })\n    .option('self-hosted', {\n      describe: 'Disables messages related to hosting on addons.mozilla.org.',\n      type: 'boolean',\n      default: false,\n    })\n    // Require one non-option.\n    .demand(1)\n    .help('help')\n    .alias('h', 'help')\n    .wrap(terminalWidth());\n}\n\nexport function terminalWidth(_process=process) {\n  if (_process && _process.stdout && _process.stdout.columns > 0) {\n    var width = _process.stdout.columns - 2;\n    // Terminals less than ten pixels wide seem silly.\n    if (width < 10) {\n      width = 10;\n    }\n\n    return width;\n  } else {\n    return 78;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/cli.js\n **/","module.exports = require(\"yargs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"yargs\"\n ** module id = 3\n ** module chunks = 0\n **/","import bunyan from 'bunyan';\n\n\nexport function createLogger(_process=process) {\n  var level = _process.env.LOG_LEVEL || 'fatal';\n  var logLevels = Object.keys(bunyan.levelFromName);\n  if (logLevels.indexOf(level) === -1) {\n    throw new Error(`LOG_LEVEL must be one of ${logLevels.join(', ')}`);\n  }\n  return bunyan.createLogger({\n    name: 'AddonLinterJS',\n    stream: process.stdout,\n    level: level,\n  });\n}\n\n\nexport default createLogger();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/logger.js\n **/","module.exports = require(\"bunyan\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"bunyan\"\n ** module id = 5\n ** module chunks = 0\n **/","import url from 'url';\n\nimport semver from 'semver';\nimport { PACKAGE_TYPES, LOCAL_PROTOCOLS } from 'const';\n\n/*\n * Template tag for removing whitespace and new lines\n * in order to be able to use multiline template strings\n * as a single string.\n *\n * Usage: singleLineString`foo bar baz\n *                    whatever`;\n *\n * Will output: 'foo bar baz whatever'\n *\n */\nexport function singleLineString(strings, ...vars) {\n  // Interweave the strings with the\n  // substitution vars first.\n  let output = '';\n  for (let i = 0; i < vars.length; i++) {\n    output += strings[i] + vars[i];\n  }\n  output += strings[vars.length];\n\n  // Split on newlines.\n  let lines = output.split(/(?:\\r\\n|\\n|\\r)/);\n\n  // Rip out the leading whitespace.\n  return lines.map((line) => {\n    return line.replace(/^\\s+/gm, '');\n  }).join(' ').trim();\n}\n\n/*\n * Takes an AST node and returns the root property.\n *\n * example: foo().bar.baz() will return the AST node for foo.\n */\nexport function getRootExpression(node) {\n  var root = node.callee;\n\n  // If we encounter a member, grab the parent\n  if (node.callee.type === 'MemberExpression') {\n    let parent = node.callee.object;\n    while (parent.type !== 'Identifier') {\n      if (parent.callee.type === 'MemberExpression') {\n        parent = parent.callee.object;\n      } else {\n        parent = parent.callee;\n      }\n    }\n    root = parent;\n  }\n\n  return root;\n}\n\n/*\n * Returns the name of the reference node passed.\n *\n * example: var foo = document;\n *  The node for foo will return 'document'\n */\nexport function getNodeReference(context, node) {\n  var variables = context.getScope().variables;\n  var scopeVar;\n\n  // Just return the value if the node passed in is a reference to a literal.\n  if (typeof node === 'undefined' || node.type === 'Literal') {\n    return node;\n  }\n\n  // Finds variable reference in current scope.\n  for (let variable of variables) {\n    if (variable.name === node.name) {\n      scopeVar = variable;\n      break;\n    }\n  }\n\n  if (scopeVar && scopeVar.defs && scopeVar.defs[0] &&\n      scopeVar.defs[0].parent && scopeVar.defs[0].parent.parent &&\n      scopeVar.defs[0].parent.parent.body) {\n    // This represents all occurrences of the variable\n    let occurances = scopeVar.defs[0].parent.parent.body;\n    let lastAssignment;\n\n    if (occurances instanceof Array) {\n      for (let occurance of occurances) {\n        if (occurance.type === 'VariableDeclaration' &&\n            occurance.declarations[0].init !== null) {\n          // Get what the name of what it was assigned to or the raw\n          // value depending on the initalization\n          lastAssignment = occurance.declarations[0].init;\n        } else if (occurance.type === 'ExpressionStatement' &&\n                   occurance.expression.type === 'AssignmentExpression') {\n          // Get the right hand side of the assignment\n          lastAssignment = occurance.expression.right;\n        }\n      }\n    }\n\n    // Return the name of the first definition of the variable which\n    // corresponds to the node passed in.\n    if (lastAssignment) {\n      return lastAssignment;\n    }\n  }\n\n  // If that variable doesn't exist in scope, then just return the node's\n  // name.\n  return node;\n}\n\n/*\n * Get a variable from a eslint context object if it exists, otherwise\n * undefined.\n */\nexport function getVariable(context, name) {\n  var variables = context.getScope().variables;\n  var result;\n  variables.forEach(function(variable) {\n    if (variable.name === name) {\n      result = variable.defs[0].name.parent.init;\n    }\n  });\n  return result;\n}\n\n/*\n * Gettext utils. No-op until we have proper\n * a proper l10n solution.\n *\n */\nexport function gettext(str) {\n  return str;\n}\n\n\n/*\n * Check the minimum node version is met\n */\nexport function checkMinNodeVersion(minVersion, _process=process) {\n  return new Promise((resolve) => {\n    minVersion = minVersion || '0.12.0';\n    if (!semver.gte(_process.version, minVersion)) {\n      throw new Error(singleLineString`Node version must be ${minVersion} or\n                      greater. You are using ${_process.version}.`);\n    } else {\n      resolve();\n    }\n  });\n}\n\n\nexport function getPackageTypeAsString(numericPackageType) {\n  for (let packageType of Object.keys(PACKAGE_TYPES)) {\n    if (parseInt(numericPackageType, 10) === PACKAGE_TYPES[packageType]) {\n      return packageType;\n    }\n  }\n  throw new Error(`Invalid package type constant \"${numericPackageType}\"`);\n}\n\n/*\n * Looks through all exported functions and returns only\n * \"public\" *functions* that aren't prefixed with an _\n *\n * Used for ignoring private functions and constants in rules files.\n * Rules can have private functions we don't run; anything that\n * starts with an \"_\" shouldn't be returned.\n *\n * This exists because we export private functions in rule files\n * for testing.\n */\nexport function ignorePrivateFunctions(list) {\n  var filteredList = {};\n\n  for (let functionName in list) {\n    if (functionName.startsWith('_') === false &&\n        typeof list[functionName] === 'function') {\n      filteredList[functionName] = list[functionName];\n    }\n  }\n\n  return filteredList;\n}\n\n\n/*\n * Check a filename to make sure it's valid; used by scanners so we never\n * accept new scanners that don't specify which file they're referencing.\n */\nexport function ensureFilenameExists(filename) {\n  if (typeof filename !== 'string' || filename.length < 1) {\n    throw new Error('Filename is required');\n  }\n}\n\n\nexport function isLocalUrl(urlInput) {\n  var parsedUrl = url.parse(urlInput);\n  var protocol = parsedUrl.protocol;\n  var path = parsedUrl.path;\n  // Check protocol is chrome: or resource: if set.\n  // Details on the chrome protocol are here: https://goo.gl/W52T0Q\n  // Details on resource protocol are here: https://goo.gl/HHqeJA\n  if (protocol && !LOCAL_PROTOCOLS.includes(protocol)) {\n    return false;\n  }\n  // Disallow protocol-free remote urls.\n  if (path.startsWith('//')) {\n    return false;\n  }\n  return true;\n}\n\nexport function apiToMessage(string) {\n  return string\n    .replace(/^extension/, 'ext')\n    .replace(/\\./g, '_')\n    .toUpperCase()\n    .substr(0, 25);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/","module.exports = require(\"url\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"url\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = require(\"semver\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"semver\"\n ** module id = 8\n ** module chunks = 0\n **/","export const DEFLATE_COMPRESSION = 8;\nexport const NO_COMPRESSION = 0;\n\nexport const ESLINT_ERROR = 2;\nexport const ESLINT_WARNING = 1;\n\nexport const ESLINT_RULE_MAPPING = {\n  banned_identifiers: ESLINT_WARNING,\n  deprecated_entities: ESLINT_WARNING,\n  eval_string_arg: ESLINT_WARNING,\n  event_listener_fourth: ESLINT_WARNING,\n  global_require_arg: ESLINT_WARNING,\n  init_null_arg: ESLINT_WARNING,\n  low_level_module: ESLINT_WARNING,\n  mozindexeddb: ESLINT_WARNING,\n  mozindexeddb_property: ESLINT_WARNING,\n  only_prefs_in_defaults: ESLINT_WARNING,\n  opendialog_nonlit_uri: ESLINT_WARNING,\n  opendialog_remote_uri: ESLINT_WARNING,\n  shallow_wrapper: ESLINT_WARNING,\n  webextension_api: ESLINT_WARNING,\n  widget_module: ESLINT_WARNING,\n};\n\nexport const VALIDATION_ERROR = 'error';\nexport const VALIDATION_NOTICE = 'notice';\nexport const VALIDATION_WARNING = 'warning';\n\nexport const ESLINT_TYPES = {\n  0: VALIDATION_NOTICE,\n  1: VALIDATION_WARNING,\n  2: VALIDATION_ERROR,\n};\n\nexport const MESSAGE_TYPES = [\n  VALIDATION_ERROR,\n  VALIDATION_NOTICE,\n  VALIDATION_WARNING,\n];\n\nexport const RDF_DEFAULT_NAMESPACE = 'http://www.mozilla.org/2004/em-rdf#';\n\nexport const RDF_UNALLOWED_TAGS = ['hidden'];\nexport const RDF_UNALLOWED_IF_LISTED_TAGS = ['updateKey', 'updateURL'];\nexport const RDF_OBSOLETE_TAGS = ['file', 'requires', 'skin'];\n\nexport const HTML_TAGS_WITH_REQUIRED_ATTRIBUTES = {\n  prefwindow: ['id'],\n};\n\n// Package type constants.\nexport const PACKAGE_ANY = 0;\nexport const PACKAGE_EXTENSION = 1;\nexport const PACKAGE_THEME = 2;\nexport const PACKAGE_DICTIONARY = 3;\nexport const PACKAGE_LANGPACK = 4;\nexport const PACKAGE_SEARCHPROV = 5;\nexport const PACKAGE_MULTI = 1; // A multi extension is an extension\nexport const PACKAGE_SUBPACKAGE = 7;\n\nexport const PACKAGE_TYPES = {\n  PACKAGE_ANY: PACKAGE_ANY,\n  PACKAGE_EXTENSION: PACKAGE_EXTENSION,\n  PACKAGE_THEME: PACKAGE_THEME,\n  PACKAGE_DICTIONARY: PACKAGE_DICTIONARY,\n  PACKAGE_LANGPACK: PACKAGE_LANGPACK,\n  PACKAGE_SEARCHPROV: PACKAGE_SEARCHPROV,\n  PACKAGE_MULTI: PACKAGE_MULTI,\n  PACKAGE_SUBPACKAGE: PACKAGE_SUBPACKAGE,\n};\n\n// Types from install.rdf don't match the types\n// we use internally. This provides a mapping.\nexport const ADDON_TYPE_MAP = {\n  2: PACKAGE_EXTENSION,\n  4: PACKAGE_THEME,\n  8: PACKAGE_LANGPACK,\n  32: PACKAGE_MULTI,\n  64: PACKAGE_DICTIONARY,\n  // New \"experiment\" type: see bug 1220097\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1220583\n  128: PACKAGE_EXTENSION,\n};\n\nexport const LOCAL_PROTOCOLS = ['chrome:', 'resource:'];\n\n// If you add to this you'll need to additionally\n// update _BANNED_IDENTIFIERS_MAP with details in\n// messages/javascript.\nexport const BANNED_IDENTIFIERS = [\n  'newThread',\n  'processNextEvent',\n];\n\nexport const LOW_LEVEL_MODULES = [\n  // Added from bugs 689340, 731109\n  'chrome', 'window-utils', 'observer-service',\n  // Added from bug 845492\n  'window/utils', 'sdk/window/utils', 'sdk/deprecated/window-utils',\n  'tab/utils', 'sdk/tab/utils',\n  'system/events', 'sdk/system/events',\n];\n\nexport const INSTALL_RDF = 'install.rdf';\nexport const MANIFEST_JSON = 'manifest.json';\nexport const CHROME_MANIFEST = 'chrome.manifest';\n\nexport const VALID_MANIFEST_VERSION = 2;\n\n// The max file size in MB that the\n// io classes will open as strings or streams.\nexport const MAX_FILE_SIZE_MB = 100;\n// This is the limit in megabytes of a file we will parse (eg. CSS, JS, etc.)\n// A singular CSS/JS file over 4MB seems bad and may actually be full of data\n// best stored in JSON/some other data format rather than code.\n// https://github.com/mozilla/addons-linter/issues/730\n// We increased this limit from 2MB to 4MB as per:\n// https://github.com/mozilla/addons/issues/181\n//\n// We should be careful about increasing this any further.\nexport const MAX_FILE_SIZE_TO_PARSE_MB = 4;\n\nexport const HIDDEN_FILE_REGEX = /^__MACOSX\\//;\nexport const FLAGGED_FILE_REGEX = /thumbs\\.db$|\\.DS_Store$|\\.orig$|\\.old$|\\~$/i;\nexport const ALREADY_SIGNED_REGEX = /^META\\-INF\\/manifest\\.mf/;\n\nexport const FLAGGED_FILE_EXTENSION_REGEX =\n  /\\.exe$|\\.dll$|\\.dylib$|\\.so$|\\.sh$|\\.class$|\\.swf$/i;\n\n// A list of magic numbers that we won't allow.\nexport const FLAGGED_FILE_MAGIC_NUMBERS = [\n  [0x4d, 0x5a], // EXE or DLL,\n  [0x5a, 0x4d], // Alternative EXE or DLL\n  [0x7f, 0x45, 0x4c, 0x46], // UNIX elf\n  [0x23, 0x21], // Shell script\n  [0xca, 0xfe, 0xba, 0xbe], // Java + Mach-O (dylib)\n  [0xca, 0xfe, 0xd0, 0x0d], // Java packed\n  [0x43, 0x57, 0x53], // Compressed SWF\n];\n\n// Based on the above, this is how deep we need to look into a file.\nexport const FLAGGED_FILE_MAGIC_NUMBERS_LENGTH = 4;\n\nexport const DEPRECATED_APIS = [\n  'app.getDetails',\n  'extension.onRequest',\n  'extension.onRequestExternal',\n  'extension.sendRequest',\n  'tabs.getAllInWindow',\n  'tabs.getSelected',\n  'tabs.onActiveChanged',\n  'tabs.onSelectionChanged',\n  'tabs.sendRequest',\n];\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/const.js\n **/","module.exports = {\n\t\"name\": \"addons-linter\",\n\t\"version\": \"0.15.5\",\n\t\"description\": \"Mozilla Add-ons Linter\",\n\t\"main\": \"dist/addons-linter.js\",\n\t\"bin\": {\n\t\t\"addons-linter\": \"bin/addons-linter\"\n\t},\n\t\"scripts\": {\n\t\t\"start\": \"grunt start\",\n\t\t\"build\": \"grunt build\",\n\t\t\"test\": \"grunt test\",\n\t\t\"test-no-coverage\": \"grunt test-no-coverage\",\n\t\t\"publish-rules\": \"grunt copy build-rules-html publish-rules\",\n\t\t\"publish-coverage\": \"grunt coveralls\"\n\t},\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"git+https://github.com/mozilla/addons-linter.git\"\n\t},\n\t\"author\": \"Mozilla Add-ons Team\",\n\t\"license\": \"MPL-2.0\",\n\t\"bugs\": {\n\t\t\"url\": \"https://github.com/mozilla/addons-linter/issues\"\n\t},\n\t\"homepage\": \"https://github.com/mozilla/addons-linter#readme\",\n\t\"devDependencies\": {\n\t\t\"babel-core\": \"6.17.0\",\n\t\t\"babel-eslint\": \"7.0.0\",\n\t\t\"babel-istanbul\": \"0.11.0\",\n\t\t\"babel-istanbul-loader\": \"0.1.0\",\n\t\t\"babel-loader\": \"6.2.5\",\n\t\t\"babel-plugin-transform-class-properties\": \"6.16.0\",\n\t\t\"babel-plugin-transform-es2015-modules-commonjs\": \"6.16.0\",\n\t\t\"babel-preset-es2015\": \"6.16.0\",\n\t\t\"babel-preset-stage-2\": \"6.17.0\",\n\t\t\"chai\": \"3.5.0\",\n\t\t\"coveralls\": \"2.11.14\",\n\t\t\"gfm.css\": \"1.1.1\",\n\t\t\"grunt\": \"1.0.1\",\n\t\t\"grunt-contrib-clean\": \"1.0.0\",\n\t\t\"grunt-contrib-copy\": \"1.0.0\",\n\t\t\"grunt-coveralls\": \"1.0.1\",\n\t\t\"grunt-eslint\": \"19.0.0\",\n\t\t\"grunt-gh-pages\": \"2.0.0\",\n\t\t\"grunt-mocha-test\": \"0.13.2\",\n\t\t\"grunt-newer\": \"1.2.0\",\n\t\t\"grunt-webpack\": \"1.0.18\",\n\t\t\"isparta\": \"4.0.0\",\n\t\t\"json-loader\": \"0.5.4\",\n\t\t\"load-grunt-configs\": \"1.0.0\",\n\t\t\"load-grunt-tasks\": \"3.5.2\",\n\t\t\"lodash.clonedeep\": \"4.5.0\",\n\t\t\"markdown-it\": \"8.0.0\",\n\t\t\"markdown-it-anchor\": \"2.5.0\",\n\t\t\"markdown-it-emoji\": \"1.3.0\",\n\t\t\"mocha\": \"3.1.2\",\n\t\t\"mocha-multi\": \"0.9.1\",\n\t\t\"shelljs\": \"0.7.4\",\n\t\t\"sinon\": \"1.17.6\",\n\t\t\"webpack\": \"1.13.2\",\n\t\t\"webpack-dev-server\": \"1.16.2\"\n\t},\n\t\"dependencies\": {\n\t\t\"ajv\": \"4.7.7\",\n\t\t\"babel-polyfill\": \"6.16.0\",\n\t\t\"bunyan\": \"1.8.1\",\n\t\t\"chalk\": \"1.1.3\",\n\t\t\"cheerio\": \"0.22.0\",\n\t\t\"columnify\": \"1.5.4\",\n\t\t\"crx-parser\": \"0.1.2\",\n\t\t\"dispensary\": \"0.9.0\",\n\t\t\"es6-promisify\": \"5.0.0\",\n\t\t\"eslint\": \"3.7.1\",\n\t\t\"esprima\": \"3.1.0\",\n\t\t\"first-chunk-stream\": \"2.0.0\",\n\t\t\"postcss\": \"5.2.4\",\n\t\t\"relaxed-json\": \"1.0.0\",\n\t\t\"semver\": \"5.3.0\",\n\t\t\"sha.js\": \"2.4.5\",\n\t\t\"source-map-support\": \"0.4.3\",\n\t\t\"strip-bom-stream\": \"2.0.0\",\n\t\t\"url-parse\": \"1.1.6\",\n\t\t\"xmldom\": \"0.1.22\",\n\t\t\"yargs\": \"6.0.0\",\n\t\t\"yauzl\": \"2.6.0\"\n\t}\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/json-loader!./package.json\n ** module id = 10\n ** module chunks = 0\n **/","import { extname } from 'path';\n\nimport columnify from 'columnify';\nimport chalk from 'chalk';\nimport Dispensary from 'dispensary';\n\nimport { lstatPromise } from 'io/utils';\nimport { terminalWidth } from 'cli';\nimport * as constants from 'const';\nimport { CHROME_MANIFEST, INSTALL_RDF, MANIFEST_JSON } from 'const';\nimport { BANNED_LIBRARIES, UNADVISED_LIBRARIES } from 'libraries';\nimport * as messages from 'messages';\nimport { checkMinNodeVersion, gettext as _, singleLineString } from 'utils';\n\nimport log from 'logger';\nimport Collector from 'collector';\nimport InstallRdfParser from 'parsers/installrdf';\nimport ManifestJSONParser from 'parsers/manifestjson';\nimport BinaryScanner from 'scanners/binary';\nimport ChromeManifestScanner from 'scanners/chromemanifest';\nimport CSSScanner from 'scanners/css';\nimport FilenameScanner from 'scanners/filename';\nimport HTMLScanner from 'scanners/html';\nimport JavaScriptScanner from 'scanners/javascript';\nimport JSONScanner from 'scanners/json';\nimport RDFScanner from 'scanners/rdf';\nimport { Crx, Directory, Xpi } from 'io';\n\n\nexport default class Linter {\n\n  constructor(config) {\n    this.config = config;\n    this.packagePath = config._[0];\n    this.io;\n    this.chalk = new chalk.constructor(\n      {enabled: !this.config.boring});\n    this.collector = new Collector();\n    this.addonMetadata = null;\n  }\n\n  colorize(type) {\n    switch (type) {\n      case constants.VALIDATION_ERROR:\n        return this.chalk.red;\n      case constants.VALIDATION_WARNING:\n        return this.chalk.yellow;\n      case constants.VALIDATION_NOTICE:\n        return this.chalk.blue;\n      default:\n        throw new Error(singleLineString`colorize passed invalid type.\n          Should be one of ${constants.MESSAGE_TYPES.join(', ')}`);\n    }\n  }\n\n  handleError(err, _console=console) {\n    if (err.message.includes('DuplicateZipEntry')) {\n      this.collector.addError(messages.DUPLICATE_XPI_ENTRY);\n      this.print(_console);\n    } else if (err.message.includes(\n      'end of central directory record signature not found')) {\n      this.collector.addError(messages.BAD_ZIPFILE);\n      this.print(_console);\n    } else {\n      if (this.config.stack === true) {\n        _console.error(err.stack);\n      } else {\n        _console.error(this.chalk.red(err.message || err));\n      }\n    }\n  }\n\n  print(_console=console) {\n    if (this.config.output === 'json') {\n      _console.log(this.toJSON(this.config.pretty));\n    } else {\n      _console.log(this.textOutput());\n    }\n  }\n\n  toJSON({input=this.output, pretty=this.config.pretty, _JSON=JSON} = {}) {\n    var args = [input];\n    if (pretty === true) {\n      args.push(null);\n      args.push(4);\n    }\n    return _JSON.stringify.apply(null, args);\n  }\n\n  textOutput(_terminalWidth=terminalWidth) {\n    var maxColumns = _terminalWidth();\n    var out = [];\n\n    out.push(_('Validation Summary:'));\n    out.push('');\n    out.push(columnify(this.output.summary, {\n      showHeaders: false,\n      minWidth: 15,\n    }));\n    out.push('');\n\n    for (let type of constants.MESSAGE_TYPES) {\n      var messageType = `${type}s`;\n      if (this.output[messageType].length) {\n        var outputConfig = {\n          code: {\n            dataTransform: (value) => {\n              return this.colorize(type)(value);\n            },\n            headingTransform: () => {\n              return _('Code');\n            },\n            maxWidth: 35,\n          },\n          message: {\n            headingTransform: () => {\n              return _('Message');\n            },\n            maxWidth: (maxColumns - 35) * .25,\n          },\n          description: {\n            headingTransform: () => {\n              return _('Description');\n            },\n            maxWidth: (maxColumns - 35) * .5,\n          },\n          file: {\n            headingTransform: () => {\n              return _('File');\n            },\n            maxWidth: (maxColumns - 35) * .25,\n          },\n          line: {\n            headingTransform: () => {\n              return _('Line');\n            },\n            maxWidth: 6,\n          },\n          column: {\n            headingTransform: () => {\n              return _('Column');\n            },\n            maxWidth: 6,\n          },\n        };\n\n        var outputColumns = [\n          'code',\n          'message',\n          'description',\n          'file',\n          'line',\n          'column',\n        ];\n\n        // If the terminal is this small we cave and don't size things\n        // contextually anymore.\n        if (maxColumns < 60) {\n          delete outputColumns[outputColumns.indexOf('column')];\n          delete outputConfig.column;\n          delete outputColumns[outputColumns.indexOf('description')];\n          delete outputConfig.description;\n          delete outputColumns[outputColumns.indexOf('line')];\n          delete outputConfig.line;\n\n          outputConfig.message.maxWidth = 15;\n          outputConfig.file.maxWidth = 15;\n        } else if (maxColumns < 78) {\n          delete outputColumns[outputColumns.indexOf('description')];\n          delete outputConfig.description;\n\n          outputConfig.message.maxWidth = (maxColumns - 47) * .5;\n          outputConfig.file.maxWidth = (maxColumns - 35) * .5;\n        }\n\n        out.push(`${messageType.toUpperCase()}:`);\n        out.push('');\n        out.push(columnify(this.output[messageType], {\n          maxWidth: 35,\n          columns: outputColumns,\n          columnSplitter: '   ',\n          config: outputConfig,\n        }));\n      }\n    }\n    return out.join('\\n');\n  }\n\n  get output() {\n    var output = {\n      count: this.collector.length,\n      summary: {},\n      metadata: this.addonMetadata,\n    };\n    for (let type of constants.MESSAGE_TYPES) {\n      var messageType = `${type}s`;\n      output[messageType] = this.collector[messageType];\n      output.summary[messageType] = this.collector[messageType].length;\n    }\n    return output;\n  }\n\n  getAddonMetadata(_log=log) {\n    if (this.addonMetadata !== null) {\n      _log.debug('Metadata already set; returning cached metadata.');\n      return Promise.resolve(this.addonMetadata);\n    }\n\n    return this.io.getFiles()\n      .then((files) => {\n        if (files.hasOwnProperty(INSTALL_RDF) &&\n            files.hasOwnProperty(MANIFEST_JSON)) {\n          _log.warn(`Both ${INSTALL_RDF} and ${MANIFEST_JSON} found`);\n          this.collector.addError(messages.MULITPLE_MANIFESTS);\n          return {};\n        } else if (files.hasOwnProperty(INSTALL_RDF)) {\n          _log.info('Retrieving metadata from install.rdf');\n          return this.io.getFileAsString(INSTALL_RDF)\n            .then((rdfString) => {\n              // Gets an xml document object.\n              var rdfScanner = new RDFScanner(rdfString, INSTALL_RDF);\n              return rdfScanner.getContents();\n            })\n            .then((xmlDoc) => {\n              _log.info('Got xmlDoc, running InstallRdfParser.getMetadata()');\n              return new InstallRdfParser(xmlDoc, this.collector).getMetadata();\n            });\n        } else if (files.hasOwnProperty(MANIFEST_JSON)) {\n          _log.info('Retrieving metadata from manifest.json');\n          return this.io.getFileAsString(MANIFEST_JSON)\n            .then((json) => {\n              var manifestParser = new ManifestJSONParser(json, this.collector);\n              return manifestParser.getMetadata();\n            });\n        } else {\n          _log.warn(singleLineString`No ${INSTALL_RDF} or ${MANIFEST_JSON}\n                   was found in the package metadata`);\n          this.collector.addNotice(messages.TYPE_NO_MANIFEST_JSON);\n          this.collector.addNotice(messages.TYPE_NO_INSTALL_RDF);\n          return {};\n        }\n      })\n      .then((addonMetadata) => {\n        this.addonMetadata = addonMetadata;\n\n        // The type must be explcitly defined. This behaviour differs the\n        // historical approach by the amo-validator.\n        // See mozilla/addons-linter#411.\n        // In due course metadata checking code may surpass this error\n        // being added here.\n        if (!this.addonMetadata.type) {\n          _log.error('Addon type lookup failed');\n          this.collector.addError(messages.TYPE_NOT_DETERMINED);\n        }\n\n        return this.addonMetadata;\n      });\n  }\n\n  checkFileExists(filepath, _lstatPromise=lstatPromise) {\n    var invalidMessage = new Error(\n      `Path \"${filepath}\" is not a file or directory or does not exist.`);\n    return _lstatPromise(filepath)\n      .then((stats) => {\n        if (stats.isFile() === true || stats.isDirectory() === true) {\n          return stats;\n        } else {\n          throw invalidMessage;\n        }\n      })\n      .catch((err) => {\n        if (err.code !== 'ENOENT') {\n          throw err;\n        } else {\n          throw invalidMessage;\n        }\n      });\n  }\n\n  scanFiles(files) {\n    var promises = [];\n    for (let filename of files) {\n      promises.push(this.scanFile(filename));\n    }\n    return Promise.all(promises);\n  }\n\n  getScanner(filename) {\n    if (filename === CHROME_MANIFEST) {\n      return ChromeManifestScanner;\n    }\n\n    if (filename.match(constants.HIDDEN_FILE_REGEX) ||\n        filename.match(constants.FLAGGED_FILE_REGEX) ||\n        filename.match(constants.FLAGGED_FILE_EXTENSION_REGEX) ||\n        filename.match(constants.ALREADY_SIGNED_REGEX)) {\n      return FilenameScanner;\n    }\n\n    switch (extname(filename)) {\n      case '.css':\n        return CSSScanner;\n      case '.html':\n      case '.htm':\n        return HTMLScanner;\n      case '.js':\n        return JavaScriptScanner;\n      case '.json':\n        return JSONScanner;\n      case '.rdf':\n        return RDFScanner;\n      default:\n        return BinaryScanner;\n    }\n  }\n\n  scanFile(filename) {\n    var ScannerClass = this.getScanner(filename);\n    return this.io.getFile(filename, ScannerClass.fileResultType)\n      .then((fileData) => {\n        // First: check that this file is under our 2MB parsing limit. Otherwise\n        // it will be very slow and may crash the lint with an out-of-memory\n        // error.\n        let fileSize = typeof this.io.files[filename].size !== 'undefined' ?\n          this.io.files[filename].size :\n          this.io.files[filename].uncompressedSize;\n        var maxSize = 1024 * 1024 * constants.MAX_FILE_SIZE_TO_PARSE_MB;\n\n        if (ScannerClass !== BinaryScanner && fileSize >= maxSize) {\n          let filesizeError = Object.assign({}, messages.FILE_TOO_LARGE, {\n            file: filename,\n            type: constants.VALIDATION_ERROR,\n          });\n          return Promise.resolve([filesizeError]);\n        }\n\n        let scanner = new ScannerClass(fileData, filename, {\n          addonMetadata: this.addonMetadata,\n          // This is for the JSONScanner, which is a bit of an anomaly and\n          // accesses the collector directly.\n          // TODO: Bring this in line with other scanners, see:\n          // https://github.com/mozilla/addons-linter/issues/895\n          collector: this.collector,\n        });\n\n        return scanner.scan();\n      })\n      // messages should be a list of raw message data objects.\n      .then((messages) => {\n        for (let message of messages) {\n          if (typeof message.type === 'undefined') {\n            throw new Error('message.type must be defined');\n          }\n          this.collector._addMessage(message.type, message);\n        }\n        return;\n      });\n  }\n\n  extractMetadata({ _Crx=Crx, _console=console, _Directory=Directory,\n                    _Xpi=Xpi } = {}) {\n    return checkMinNodeVersion()\n      .then(() => {\n        return this.checkFileExists(this.packagePath);\n      })\n      .then((stats) => {\n        if (stats.isFile() === true) {\n          if (this.packagePath.endsWith('.crx')) {\n            log.info('Package is a file ending in .crx; parsing as a CRX');\n            return new _Crx(this.packagePath);\n          } else {\n            log.info('Package is a file. Attempting to parse as an .xpi/.zip');\n            return new _Xpi(this.packagePath);\n          }\n        } else if (stats.isDirectory()) {\n          log.info('Package path is a directory. Parsing as a directory');\n          return new _Directory(this.packagePath);\n        }\n      })\n      .then((io) => {\n        io.setScanFileCallback(this.config.shouldScanFile);\n        this.io = io;\n        return this.getAddonMetadata();\n      })\n      .then((addonMetadata) => {\n        return this.markSpecialFiles(addonMetadata);\n      })\n      .then((addonMetadata) => {\n        log.info('Metadata option is set to %s', this.config.metadata);\n        if (this.config.metadata === true) {\n          var metadataObject = {\n            // Reflects if errors were encountered in extraction\n            // of metadata.\n            hasErrors: this.output.errors.length !== 0,\n            metadata: addonMetadata,\n          };\n\n          // If errors exist the data is available via the\n          // errors list.\n          if (metadataObject.hasErrors) {\n            metadataObject.errors = this.output.errors;\n          }\n\n          _console.log(this.toJSON({input: metadataObject}));\n        }\n\n        return addonMetadata;\n      });\n  }\n\n  scan(deps={}) {\n    return this.extractMetadata(deps)\n      .then(() => {\n        return this.io.getFiles();\n      })\n      .then((files) => {\n        // Known libraries do not need to be scanned\n        let filesWithoutJSLibraries = Object.keys(files).filter((file) => {\n          return !this.addonMetadata.jsLibs.hasOwnProperty(file);\n        }, this);\n        return this.scanFiles(filesWithoutJSLibraries);\n      })\n      .then(() => {\n        this.print();\n        // This is skipped in the code coverage because the\n        // test runs against un-instrumented code.\n        /* istanbul ignore if  */\n        if (this.config.runAsBinary === true) {\n          process.exit(this.output.errors.length > 0 ? 1 : 0);\n        }\n      })\n      .catch((err) => {\n        this.handleError(err, deps._console);\n        throw err;\n      });\n  }\n\n  run(deps={}) {\n    if (this.config.metadata === true) {\n      return this.extractMetadata(deps)\n        .then(() => {\n          // This is skipped in the code coverage because the\n          // test runs against un-instrumented code.\n          /* istanbul ignore if  */\n          if (this.config.runAsBinary === true) {\n            process.exit(this.output.errors.length > 0 ? 1 : 0);\n          }\n        })\n        .catch((err) => {\n          log.debug(err);\n          this.handleError(err, deps._console);\n          throw err;\n        });\n    } else {\n      return this.scan(deps);\n    }\n  }\n\n  markSpecialFiles(addonMetadata) {\n    return this._markEmptyFiles(addonMetadata)\n      .then((addonMetadata) => {\n        return this._markJSLibs(addonMetadata);\n      })\n      .then((addonMetadata) => {\n        return this._markBannedLibs(addonMetadata);\n      });\n  }\n\n  _markBannedLibs(addonMetadata, _unadvisedLibraries = UNADVISED_LIBRARIES) {\n    for (let pathToFile in addonMetadata.jsLibs) {\n      if (BANNED_LIBRARIES.includes(addonMetadata.jsLibs[pathToFile])) {\n        this.collector.addError(\n          Object.assign({}, messages.BANNED_LIBRARY, {\n            file: pathToFile,\n          })\n        );\n      }\n\n      if (_unadvisedLibraries.includes(addonMetadata.jsLibs[pathToFile])) {\n        this.collector.addWarning(\n          Object.assign({}, messages.UNADVISED_LIBRARY, {\n            file: pathToFile,\n          })\n        );\n      }\n    }\n\n    return addonMetadata;\n  }\n\n  _markEmptyFiles(addonMetadata) {\n    var emptyFiles = [];\n\n    return this.io.getFiles()\n      .then((files) => {\n        for (let filename in files) {\n          if (typeof files[filename].size === 'undefined' &&\n              typeof files[filename].uncompressedSize === 'undefined') {\n            throw new Error(`No size available for ${filename}`);\n          }\n\n          if (files[filename].size === 0 ||\n              files[filename].uncompressedSize === 0) {\n            emptyFiles.push(filename);\n          }\n        }\n\n        addonMetadata.emptyFiles = emptyFiles;\n        return addonMetadata;\n      });\n  }\n\n  _markJSLibs(addonMetadata) {\n    var dispensary = new Dispensary();\n    var jsLibs = {};\n    var promises = [];\n\n    return this.io.getFilesByExt('.js')\n      .then((files) => {\n        for (let filename of files) {\n          promises.push(this.io.getFile(filename)\n            .then((file) => {\n              var hashResult = dispensary.match(file);\n\n              if (hashResult !== false) {\n                log.debug(`${hashResult} detected in ${filename}`);\n                jsLibs[filename] = hashResult;\n\n                this.collector.addNotice(\n                  Object.assign({}, messages.KNOWN_LIBRARY, {\n                    file: filename,\n                  })\n                );\n              }\n            }));\n        }\n\n        return Promise.all(promises);\n      }).then(() => {\n        addonMetadata.jsLibs = jsLibs;\n        return addonMetadata;\n      });\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/linter.js\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 12\n ** module chunks = 0\n **/","module.exports = require(\"columnify\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"columnify\"\n ** module id = 13\n ** module chunks = 0\n **/","module.exports = require(\"chalk\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"chalk\"\n ** module id = 14\n ** module chunks = 0\n **/","module.exports = require(\"dispensary\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"dispensary\"\n ** module id = 15\n ** module chunks = 0\n **/","import { lstat, readdir } from 'fs';\nimport * as path from 'path';\n\nimport log from 'logger';\nimport promisify from 'es6-promisify';\n\nexport var lstatPromise = promisify(lstat);\nexport var readdirPromise = promisify(readdir);\n\nexport function walkPromise(curPath, {shouldIncludePath=() => true} = {}) {\n  var result = {};\n  // Set a basePath var with the initial path\n  // so all file paths (the result keys) can\n  // be relative to the starting point.\n  var basePath = curPath;\n\n  return (function walk(curPath) {\n    return lstatPromise(curPath)\n      .then((stat) => {\n        const relPath = path.relative(basePath, curPath);\n        if (!shouldIncludePath(relPath)) {\n          log.debug(`Skipping file path: ${relPath}`);\n          return result;\n        } else if (stat.isFile()) {\n          const { size } = stat;\n          result[relPath] = { size };\n        } else if (stat.isDirectory()) {\n          return readdirPromise(curPath)\n            .then((files) => {\n              // Map the list of files and make a list of readdir\n              // promises to pass to Promise.all so we can recursively\n              // get the data on all the files in the directory.\n              return Promise.all(files.map((fileName) => {\n                return walk(path.join(curPath, fileName));\n              }));\n            })\n            .then(() => {\n              return result;\n            });\n        }\n      });\n  })(curPath);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/io/utils.js\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 17\n ** module chunks = 0\n **/","module.exports = require(\"es6-promisify\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"es6-promisify\"\n ** module id = 18\n ** module chunks = 0\n **/","export const BANNED_LIBRARIES = [\n  'angularjs.1.0.1.angular.js',\n  'angularjs.1.0.1.angular.min.js',\n  'angularjs.1.0.2.angular.js',\n  'angularjs.1.0.2.angular.min.js',\n  'angularjs.1.0.3.angular.js',\n  'angularjs.1.0.3.angular.min.js',\n  'angularjs.1.0.4.angular.js',\n  'angularjs.1.0.4.angular.min.js',\n  'angularjs.1.0.5.angular.js',\n  'angularjs.1.0.5.angular.min.js',\n  'angularjs.1.0.6.angular.js',\n  'angularjs.1.0.6.angular.min.js',\n  'angularjs.1.0.7.angular.js',\n  'angularjs.1.0.7.angular.min.js',\n  'angularjs.1.0.8.angular.js',\n  'angularjs.1.0.8.angular.min.js',\n  'angularjs.1.1.1.angular.js',\n  'angularjs.1.1.1.angular.min.js',\n  'angularjs.1.1.3.angular.js',\n  'angularjs.1.1.3.angular.min.js',\n  'angularjs.1.1.4.angular.js',\n  'angularjs.1.1.4.angular.min.js',\n  'angularjs.1.1.5.angular.js',\n  'angularjs.1.1.5.angular.min.js',\n  'angularjs.1.2.0.angular.js',\n  'angularjs.1.2.0.angular.min.js',\n  'angularjs.1.2.1.angular.js',\n  'angularjs.1.2.1.angular.min.js',\n  'angularjs.1.2.2.angular.min.js',\n  'angularjs.1.2.10.angular.js',\n  'angularjs.1.2.10.angular.min.js',\n  'angularjs.1.2.11.angular.js',\n  'angularjs.1.2.11.angular.min.js',\n  'angularjs.1.2.12.angular.js',\n  'angularjs.1.2.12.angular.min.js',\n  'angularjs.1.2.13.angular.js',\n  'angularjs.1.2.13.angular.min.js',\n  'angularjs.1.2.14.angular.js',\n  'angularjs.1.2.14.angular.min.js',\n  'angularjs.1.2.15.angular.js',\n  'angularjs.1.2.15.angular.min.js',\n  'angularjs.1.2.16.angular.js',\n  'angularjs.1.2.16.angular.min.js',\n  'angularjs.1.2.17.angular.js',\n  'angularjs.1.2.17.angular.min.js',\n  'angularjs.1.2.18.angular.js',\n  'angularjs.1.2.18.angular.min.js',\n  'angularjs.1.2.19.angular.js',\n  'angularjs.1.2.19.angular.min.js',\n  'angularjs.1.2.20.angular.js',\n  'angularjs.1.2.20.angular.min.js',\n  'angularjs.1.2.21.angular.js',\n  'angularjs.1.2.21.angular.min.js',\n  'angularjs.1.2.22.angular.js',\n  'angularjs.1.2.22.angular.min.js',\n  'angularjs.1.2.23.angular.js',\n  'angularjs.1.2.23.angular.min.js',\n  'angularjs.1.2.24.angular.js',\n  'angularjs.1.2.24.angular.min.js',\n  'angularjs.1.2.25.angular.js',\n  'angularjs.1.2.25.angular.min.js',\n  'angularjs.1.2.26.angular.js',\n  'angularjs.1.2.26.angular.min.js',\n  'angularjs.1.2.27.angular.js',\n  'angularjs.1.2.27.angular.min.js',\n  'angularjs.1.2.28.angular.js',\n  'angularjs.1.2.28.angular.min.js',\n  'angularjs.1.2.29.angular.js',\n  'angularjs.1.2.29.angular.min.js',\n  'angularjs.1.2.3.angular.js',\n  'angularjs.1.2.3.angular.min.js',\n  'angularjs.1.2.4.angular.js',\n  'angularjs.1.2.4.angular.min.js',\n  'angularjs.1.2.5.angular.js',\n  'angularjs.1.2.5.angular.min.js',\n  'angularjs.1.2.6.angular.js',\n  'angularjs.1.2.6.angular.min.js',\n  'angularjs.1.2.7.angular.js',\n  'angularjs.1.2.7.angular.min.js',\n  'angularjs.1.2.8.angular.js',\n  'angularjs.1.2.8.angular.min.js',\n  'angularjs.1.2.9.angular.js',\n  'angularjs.1.2.9.angular.min.js',\n  'angularjs.1.3.0.angular.js',\n  'angularjs.1.3.0.angular.min.js',\n  'angularjs.1.3.1.angular.js',\n  'angularjs.1.3.1.angular.min.js',\n  'angularjs.1.3.2.angular.js',\n  'angularjs.1.3.2.angular.min.js',\n  'angularjs.1.3.3.angular.js',\n  'angularjs.1.3.3.angular.min.js',\n  'angularjs.1.3.4.angular.js',\n  'angularjs.1.3.4.angular.min.js',\n  'angularjs.1.3.5.angular.js',\n  'angularjs.1.3.5.angular.min.js',\n  'angularjs.1.3.6.angular.js',\n  'angularjs.1.3.6.angular.min.js',\n  'angularjs.1.3.7.angular.js',\n  'angularjs.1.3.7.angular.min.js',\n  'angularjs.1.3.8.angular.js',\n  'angularjs.1.3.8.angular.min.js',\n  'angularjs.1.3.9.angular.js',\n  'angularjs.1.3.9.angular.min.js',\n  'angularjs.1.3.10.angular.js',\n  'angularjs.1.3.10.angular.min.js',\n  'angularjs.1.3.11.angular.js',\n  'angularjs.1.3.11.angular.min.js',\n  'angularjs.1.3.12.angular.js',\n  'angularjs.1.3.12.angular.min.js',\n  'angularjs.1.3.13.angular.js',\n  'angularjs.1.3.13.angular.min.js',\n  'angularjs.1.3.14.angular.js',\n  'angularjs.1.3.14.angular.min.js',\n  'angularjs.1.3.15.angular.js',\n  'angularjs.1.3.15.angular.min.js',\n  'angularjs.1.3.16.angular.js',\n  'angularjs.1.3.16.angular.min.js',\n  'angularjs.1.3.17.angular.js',\n  'angularjs.1.3.17.angular.min.js',\n  'angularjs.1.3.18.angular.js',\n  'angularjs.1.3.18.angular.min.js',\n  'angularjs.1.3.19.angular.js',\n  'angularjs.1.3.19.angular.min.js',\n  'angularjs.1.3.20.angular.js',\n  'angularjs.1.3.20.angular.min.js',\n  'angularjs.1.4.0.angular.js',\n  'angularjs.1.4.0.angular.min.js',\n  'angularjs.1.4.1.angular.js',\n  'angularjs.1.4.1.angular.min.js',\n  'angularjs.1.4.2.angular.js',\n  'angularjs.1.4.2.angular.min.js',\n  'angularjs.1.4.3.angular.js',\n  'angularjs.1.4.3.angular.min.js',\n  'angularjs.1.4.4.angular.js',\n  'angularjs.1.4.4.angular.min.js',\n  'angularjs.1.4.5.angular.js',\n  'angularjs.1.4.5.angular.min.js',\n  'angularjs.1.4.6.angular.js',\n  'angularjs.1.4.6.angular.min.js',\n  'angularjs.1.4.7.angular.js',\n  'angularjs.1.4.7.angular.min.js',\n  'angularjs.1.4.8.angular.js',\n  'angularjs.1.4.8.angular.min.js',\n  'angularjs.1.4.9.angular.js',\n  'angularjs.1.4.9.angular.min.js',\n  'angularjs.1.4.10.angular.js',\n  'angularjs.1.4.10.angular.min.js',\n  'angularjs.1.5.0.angular.js',\n  'angularjs.1.5.0.angular.min.js',\n  'angularjs.1.5.1.angular.js',\n  'angularjs.1.5.1.angular.min.js',\n  'angularjs.1.5.2.angular.js',\n  'angularjs.1.5.2.angular.min.js',\n  'angularjs.1.5.3.angular.js',\n  'angularjs.1.5.3.angular.min.js',\n  'angularjs.1.5.4.angular.js',\n  'angularjs.1.5.4.angular.min.js',\n  'angularjs.1.5.5.angular.js',\n  'angularjs.1.5.5.angular.min.js',\n  'angularjs.1.5.6.angular.js',\n  'angularjs.1.5.6.angular.min.js',\n  'angularjs.1.5.7.angular.js',\n  'angularjs.1.5.7.angular.min.js',\n  'angularjs.1.5.8.angular.js',\n  'angularjs.1.5.8.angular.min.js',\n  'jquery.1.0.1.jquery.js',\n  'jquery.1.0.2.jquery.js',\n  'jquery.1.0.3.jquery.js',\n  'jquery.1.0.4.jquery.js',\n  'jquery.1.1.1.jquery.js',\n  'jquery.1.1.2.jquery.js',\n  'jquery.1.1.jquery.js',\n  'jquery.1.4.1.jquery.js',\n  'jquery.1.4.1.jquery.min.js',\n  'jquery.1.4.2.jquery.js',\n  'jquery.1.4.2.jquery.min.js',\n  'jquery.1.4.4.jquery.js',\n  'jquery.1.4.4.jquery.min.js',\n  'jquery.1.4.jquery.js',\n  'jquery.1.4.jquery.min.js',\n  'jquery.1.5.1.jquery.js',\n  'jquery.1.5.1.jquery.min.js',\n  'jquery.1.5.2.jquery.js',\n  'jquery.1.5.2.jquery.min.js',\n  'jquery.1.5.jquery.js',\n  'jquery.1.5.jquery.min.js',\n  'jquery.1.6.1.jquery.js',\n  'jquery.1.6.1.jquery.min.js',\n  'jquery.1.6.2.jquery.js',\n  'jquery.1.6.2.jquery.min.js',\n  'jquery.1.6.3.jquery.js',\n  'jquery.1.6.3.jquery.min.js',\n  'jquery.1.6.4.jquery.js',\n  'jquery.1.6.4.jquery.min.js',\n  'jquery.1.6.jquery.js',\n  'jquery.1.6.jquery.min.js',\n  'jquery.1.7.jquery.js',\n  'jquery.1.7.jquery.min.js',\n  'jquery.1.7.1.jquery.js',\n  'jquery.1.7.1.jquery.min.js',\n  'jquery.1.7.2.jquery.js',\n  'jquery.1.7.2.jquery.min.js',\n  'jquery.1.8.0.jquery.js',\n  'jquery.1.8.0.jquery.min.js',\n  'jquery.1.8.1.jquery.js',\n  'jquery.1.8.1.jquery.min.js',\n  'jquery.1.8.2.jquery.js',\n  'jquery.1.8.2.jquery.min.js',\n  'jquery.1.8.3.jquery.js',\n  'jquery.1.8.3.jquery.min.js',\n  'jquery.1.9.0.jquery.js',\n  'jquery.1.9.0.jquery.min.js',\n  'jquery.1.9.1.jquery.js',\n  'jquery.1.9.1.jquery.min.js',\n  'jquery.1.10.0.jquery.js',\n  'jquery.1.10.0.jquery.min.js',\n  'jquery.1.10.1.jquery.js',\n  'jquery.1.10.1.jquery.min.js',\n  'jquery.1.10.2.jquery.js',\n  'jquery.1.10.2.jquery.min.js',\n  'jquery.1.11.0.jquery.js',\n  'jquery.1.11.0.jquery.min.js',\n  'jquery.1.11.1.jquery.js',\n  'jquery.1.11.1.jquery.min.js',\n  'jquery.1.11.2.jquery.js',\n  'jquery.1.11.2.jquery.min.js',\n  'jquery.1.11.3.jquery.js',\n  'jquery.1.11.3.jquery.min.js',\n  'jquery.1.12.0.jquery.js',\n  'jquery.1.12.0.jquery.min.js',\n  'jquery.1.12.1.jquery.js',\n  'jquery.1.12.1.jquery.min.js',\n  'jquery.1.12.2.jquery.js',\n  'jquery.1.12.2.jquery.min.js',\n  'jquery.1.12.3.jquery.js',\n  'jquery.1.12.3.jquery.min.js',\n  'jquery.1.12.4.jquery.js',\n  'jquery.1.12.4.jquery.min.js',\n];\n\nexport const UNADVISED_LIBRARIES = [\n];\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/libraries.js\n **/","// Here we can re-export all our message so one can just do\n// import * as messages from 'messages';\n\nexport * from './chromemanifest';\nexport * from './css';\nexport * from './html';\nexport * from './javascript';\nexport * from './json';\nexport * from './layout';\nexport * from './manifestjson';\nexport * from './rdf';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/messages/index.js\n **/","import { gettext as _, singleLineString } from 'utils';\n\n\nexport const DANGEROUS_CATEGORY = {\n  code: 'DANGEROUS_CATEGORY',\n  legacyCode: [\n    'testcases_chromemanifest',\n    'test_resourcemodules',\n    'resource_modules',\n  ],\n  message: 'Potentially dangerous category entry',\n  description: _(singleLineString`Add-ons defining global properties via\n    category entries require careful review by an administrative reviewer.`),\n  // TODO: signing_help is not yet used.\n  signing_help: _(singleLineString`Given the potential security risks of\n    exposing APIs to unprivileged code, extensions which use these APIs must\n    undergo manual code review for at least one submission. If you are not\n    using these APIs to interact with content code, please consider\n    alternatives, such as JavaScript modules (http://mzl.la/1HMH2m9),\n    CommonJS modules (http://mzl.la/1JBMjuU, http://mzl.la/1OBaE8u), the\n    observer service (http://mzl.la/1MLqWdJ), or window listeners which\n    install global properties on privileged windows`),\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/messages/chromemanifest.js\n **/","import { gettext as _, singleLineString } from 'utils';\n\n\nexport const CSS_SYNTAX_ERROR = {\n  code: 'CSS_SYNTAX_ERROR',\n  // This will be overriden by the reason passed from the error.\n  legacyCode: null,\n  message: _('A CSS syntax error was encountered'),\n  description: _(singleLineString`An error was found in the CSS file being\n    processed as a result further processing of that file is not possible`),\n};\n\nexport const INVALID_SELECTOR_NESTING = {\n  code: 'INVALID_SELECTOR_NESTING',\n  legacyCode: null,\n  message: _('Invalid nesting of selectors found'),\n  description: _(singleLineString`Selectors should not be nested`),\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/messages/css.js\n **/","import { gettext as _, singleLineString } from 'utils';\n\n\nexport var _tagRequiresAttribute = (tagName, attribute) => {\n  return {\n    code: `${tagName}_REQUIRES_${attribute}`.toUpperCase(),\n    legacyCode: [\n      'markup',\n      'starttag',\n      `${tagName}_${attribute}`,\n    ],\n    message: _(`<${tagName}> missing \"${attribute}\"`),\n    description: _(singleLineString`The <${tagName}> tag requires the\n      ${attribute}, but it's missing.`),\n  };\n};\n\nexport const PREFWINDOW_REQUIRES_ID = _tagRequiresAttribute('prefwindow', 'id');\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/messages/html.js\n **/","import { apiToMessage, gettext as _, singleLineString } from 'utils';\n\nexport const JS_SYNTAX_ERROR = {\n  code: 'JS_SYNTAX_ERROR',\n  legacyCode: [\n    'testcases_scripting',\n    'test_js_file',\n    'syntax_error',\n  ],\n  message: _('JavaScript syntax error'),\n  description: _(singleLineString`There is a JavaScript syntax error in your\n    code; validation cannot continue on this file.`),\n};\n\nexport const EVENT_LISTENER_FOURTH = {\n  code: 'EVENT_LISTENER_FOURTH',\n  message: _('addEventListener` called with truthy fourth argument.'),\n  description: _(singleLineString`When called with a truthy forth argument,\n    listeners can be triggered potentially unsafely by untrusted code. This\n    requires careful review.`),\n  legacyCode: ['js', 'instanceactions', 'addEventListener_fourth'],\n};\n\nexport const MOZINDEXEDDB = {\n  code: 'MOZINDEXEDDB',\n  // Original code appeared to have a non-unique err_id which is no\n  // use for comparsions. ('testcases_regex', 'generic', '_generated')\n  legacyCode: null,\n  message: _('mozIndexedDB has been removed; use indexedDB instead'),\n  description: _('mozIndexedDB has been removed; use indexedDB instead.'),\n};\n\nexport const MOZINDEXEDDB_PROPERTY = {\n  code: 'MOZINDEXEDDB_PROPERTY',\n  // Original code appeared to have a non-unique err_id which is no\n  // use for comparsions. ('testcases_regex', 'generic', '_generated')\n  legacyCode: null,\n  message: _('mozIndexedDB used as an object key/property'),\n  description: _('mozIndexedDB has been removed; use indexedDB instead.'),\n};\n\nexport const SHALLOW_WRAPPER = {\n  code: 'SHALLOW_WRAPPER',\n  legacyCode: [\n    'testcases_js_xpcom',\n    'xpcnativewrapper',\n    'shallow',\n  ],\n  message: _('Shallow XPCOM wrappers should not be used'),\n  description: _(singleLineString`Extensions using shallow XPCOM wrappers\n    cannot be automatically signed.`),\n};\n\nexport function _nonLiteralUri(method) {\n  return {\n    code: `${method}_NONLIT_URI`.toUpperCase(),\n    legacyCode: [\n      'js',\n      'instanceactions',\n      `${method}_nonliteral`,\n    ],\n    message: _(`'${method}' called with a non-literal uri`),\n    description: _(singleLineString`Calling '${method}' with variable\n      parameters can result in potential security vulnerabilities if the\n      variable contains a remote URI. Consider using 'window.open' with\n      the 'chrome=no' flag.`),\n  };\n}\n\nexport function _methodPassedRemoteUri(method) {\n  return {\n    code: `${method}_REMOTE_URI`.toUpperCase(),\n    legacyCode: [\n      'js',\n      'instanceactions',\n      `${method}_remote_uri`,\n    ],\n    message: _(`'${method}' called with non-local URI`),\n    description: _(singleLineString`Calling '${method}' with a non-local\n      URI will result in the dialog being opened with chrome privileges.`),\n  };\n}\n\nexport const OPENDIALOG_REMOTE_URI = _methodPassedRemoteUri('openDialog');\nexport const OPENDIALOG_NONLIT_URI = _nonLiteralUri('openDialog');\n\nexport const _BANNED_IDENTIFIERS_MAP = {\n  newThread:\n    singleLineString`Creating threads from JavaScript is a common cause\n    of crashes and is unsupported in recent versions of the platform`,\n  processNextEvent:\n    singleLineString`Spinning the event loop with processNextEvent is a\n    common cause of deadlocks, crashes, and other errors due to unintended\n    reentrancy. Please use asynchronous callbacks instead wherever possible`,\n};\n\nexport function _bannedIdentifier(name) {\n  return {\n    code: `BANNED_${name.toUpperCase()}`,\n    legacyCode: [\n      'js',\n      'actions',\n      'banned_identifier',\n    ],\n    message: _('Banned or deprecated JavaScript Identifier'),\n    description: _BANNED_IDENTIFIERS_MAP[name],\n  };\n}\n\nexport const BANNED_NEWTHREAD = _bannedIdentifier('newThread');\nexport const BANNED_PROCESSNEXTEVENT = _bannedIdentifier('processNextEvent');\nexport const EVAL_STRING_ARG = {\n  code: 'EVAL_STRING_ARG',\n  message: _('setTimeout or setInterval must have function as 1st arg'),\n  description: _(singleLineString`setTimeout and setInterval functions should be\n    called only with function expressions as their first argument`),\n  legacyCode: ['javascript', 'dangerous_global', 'eval'],\n};\n\nexport const DEPREC_SDK_MOD_WIDGET = {\n  code: 'DEPREC_SDK_MOD_WIDGET',\n  message: _('Use of deprecated SDK module'),\n  description: _(singleLineString`The 'widget' module has been deprecated\n    due to a number of performance and usability issues, and has been\n    removed from the SDK as of Firefox 40. Please use the\n    'sdk/ui/button/action' or 'sdk/ui/button/toggle' module instead.\n    See https://developer.mozilla.org/Add-ons/SDK/High-Level_APIs/ui\n    for more information.`),\n  legacyCode: null,\n};\n\nexport const UNEXPECTED_GLOGAL_ARG = {\n  code: 'UNEXPECTED_GLOGAL_ARG',\n  message: _('Unexpected global passed as an argument'),\n  description: _(singleLineString`Passing a global as an argument\n    is not recommended. Please make this a var instead.`),\n  legacyCode: null,\n};\n\nexport const ONLY_PREFS_IN_DEFAULTS = {\n  code: 'ONLY_PREFS_IN_DEFAULTS',\n  message: _('Complex code should not appear in preference defaults files'),\n  description: _(singleLineString`Preference files are only allowed to call the\n    pref() and user_pref() functions. Please move other code outside preference\n    defaults file.`),\n  legacyCode: [\n    'testcases_javascript_actions',\n    '_call_expression',\n    'complex_prefs_defaults_code',\n  ],\n};\n\nexport const NO_DOCUMENT_WRITE = {\n  code: 'NO_DOCUMENT_WRITE',\n  message: _('Use of document.write strongly discouraged.'),\n  description: _(singleLineString`document.write will fail in many\n    circumstances when used in extensions, and has potentially severe security\n    repercussions when used improperly. Therefore, it should not be used.`),\n  legacyCode: [\n    'js', 'document.write', 'evil',\n  ],\n};\n\nexport const NSI_DNS_SERVICE_RESOLVE = {\n  code: 'NSI_DNS_SERVICE_RESOLVE',\n  message: _('nsIDNSService.resolve() should not be used.'),\n  description: _(singleLineString`The 'nsIDNSService.resolve' method performs a\n    synchronous DNS lookup, which will freeze the UI. This can result in severe\n    performance issues. 'nsIDNSService.asyncResolve()' should be used\n    instead.`),\n  legacyCode: [\n    'testcases_javascript_entity_values', 'nsIDNSServiceResolve', null,\n  ],\n};\n\nexport const INIT_NULL_ARG = {\n  code: 'INIT_NULL_ARG',\n  message: _('`init` should not be called with a null first argument'),\n  description: _(singleLineString`Calling 'nsITransferable.init()' with a null\n    first argument has the potential to leak data across private browsing mode\n    sessions. 'null' is  appropriate only when reading data or writing data\n    which is not associated with a particular window.`),\n  legacyCode: ['js_entity_values', 'nsITransferable', 'init'],\n};\n\nexport const NSI_SOUND_PLAY = {\n  code: 'NSI_SOUND_PLAY',\n  message: _('nsISound.play should not be used.'),\n  description: _(singleLineString`The 'nsISound.play' function is synchronous,\n    and thus freezes the interface while the sound is playing. It should be\n    avoided in favor of the HTML5 audio APIs.`),\n  legacyCode: [\n    'testcases_javascript_entity_values', 'nsISound_play', null,\n  ],\n};\n\nexport const TAB_URL_OVERRIDE = {\n  code: 'TAB_URL_OVERRIDE',\n  message: _(singleLineString`Extensions must not alter user preferences such\n    as the new tab URL without explicit user consent.`),\n  description: _(singleLineString`Extensions must not alter user preferences\n    such as the new tab URL without explicit user consent. Such changes must\n    also be reverted when the extension is disabled or uninstalled.`),\n  legacyCode: ['js_entity_values', 'NewTabURL', 'override'],\n};\n\nexport const LOW_LEVEL_MODULE = {\n  code: 'LOW_LEVEL_MODULE',\n  message: _('Usage of low-level or non-SDK interface'),\n  description: _(singleLineString`Your add-on uses an interface which\n    bypasses the high-level protections of the add-on SDK. This interface\n    should be avoided, and its use may significantly complicate\n    your review process`),\n  legacyCode: null,\n};\n\nexport const BANNED_LIBRARY = {\n  code: 'BANNED_LIBRARY',\n  message: _('Banned 3rd-party JS library'),\n  description: _(singleLineString`Your add-on uses a JavaScript library we\n    consider unsafe. Read more: https://bit.ly/1TRIyZY`),\n  legacyCode: null,\n};\n\nexport const UNADVISED_LIBRARY = {\n  code: 'UNADVISED_LIBRARY',\n  message: _('Unadvised 3rd-party JS library'),\n  description: _(singleLineString`Your add-on uses a JavaScript library we do\n    not recommend. Read more: https://bit.ly/1TRIyZY`),\n  legacyCode: null,\n};\n\nexport const KNOWN_LIBRARY = {\n  code: 'KNOWN_LIBRARY',\n  message: _('Known JS library detected'),\n  description: _(singleLineString`JavaScript libraries are discouraged for\n    simple add-ons, but are generally accepted.`),\n  legacyCode: [\n    'testcases_content', 'test_packed_packages', 'blacklisted_js_library',\n  ],\n};\n\nfunction deprecatedAPI(api) {\n  return {\n    code: apiToMessage(api),\n    legacyCode: [\n      'js',\n      'deprecated',\n      api,\n    ],\n    message: _(`\"${api}\" is deprecated or unimplemented`),\n    description: _(singleLineString`This API has been deprecated by Chrome\n      and has not been implemented by Firefox.`),\n  };\n}\n\nexport const APP_GETDETAILS = deprecatedAPI('app.getDetails');\nexport const EXT_ONREQUEST = deprecatedAPI('extension.onRequest');\nexport const EXT_ONREQUESTEXTERNAL = deprecatedAPI(\n  'extension.onRequestExternal');\nexport const EXT_SENDREQUEST = deprecatedAPI('extension.sendRequest');\nexport const TABS_GETALLINWINDOW = deprecatedAPI('tabs.getAllInWindow');\nexport const TABS_GETSELECTED = deprecatedAPI('tabs.getSelected');\nexport const TABS_ONACTIVECHANGED = deprecatedAPI('tabs.onActiveChanged');\nexport const TABS_ONSELECTIONCHANGED = deprecatedAPI(\n  'tabs.onSelectionChanged');\nexport const TABS_SENDREQUEST = deprecatedAPI('tabs.sendRequest');\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/messages/javascript.js\n **/","import { gettext as _, singleLineString } from 'utils';\n\nexport const JSON_INVALID = {\n  code: 'JSON_INVALID',\n  legacyCode: null,\n  message: _('Your JSON is not valid.'),\n  description: _('Your JSON file could not be parsed.'),\n};\n\nexport const JSON_BLOCK_COMMENTS = {\n  code: 'JSON_BLOCK_COMMENTS',\n  legacyCode: null,\n  message: _('Your JSON contains block comments.'),\n  description: _(singleLineString`Only line comments (comments beginning with\n    \"//\") are allowed in JSON files. Please remove block comments (comments\n    beginning with \"/*\")`),\n};\n\nexport const JSON_DUPLICATE_KEY = {\n  code: 'JSON_DUPLICATE_KEY',\n  legacyCode: null,\n  message: _('Duplicate keys are not allowed in JSON files.'),\n  description: _(singleLineString`Duplicate key found in JSON file.`),\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/messages/json.js\n **/","import { MAX_FILE_SIZE_TO_PARSE_MB } from 'const';\nimport { gettext as _, singleLineString } from 'utils';\n\n\nexport const DUPLICATE_XPI_ENTRY = {\n  code: 'DUPLICATE_XPI_ENTRY',\n  legacyCode: [\n    'testcases_packagelayout',\n    'test_layout_all',\n    'duplicate_entries',\n  ],\n  message: _('Package contains duplicate entries'),\n  description: _(singleLineString`The package contains multiple entries\n    with the same name. This practice has been banned. Try unzipping\n    and re-zipping your add-on package and try again.`),\n};\n\nexport const BAD_ZIPFILE = {\n  code: 'BAD_ZIPFILE',\n  legacyCode: null,\n  message: 'Corrupt ZIP file',\n  description: _('We were unable to decompress the zip file.'),\n};\n\nexport const TYPE_NO_INSTALL_RDF = {\n  code: 'TYPE_NO_INSTALL_RDF',\n  legacyCode: [\n    'typedetection',\n    'detect_type',\n    'missing_install_rdf',\n  ],\n  message: _('install.rdf was not found'),\n  description: _(singleLineString`The type should be determined by\n    install.rdf if present. As there's no install.rdf, type detection\n    will be attempted to be inferred by package layout.`),\n};\n\nexport const TYPE_NO_MANIFEST_JSON = {\n  code: 'TYPE_NO_MANIFEST_JSON',\n  legacyCode: [\n    'typedetection',\n    'detect_type',\n    'missing_manifest_json',\n  ],\n  message: _('manifest.json was not found'),\n  description: _(singleLineString`The type should be determined by\n    manifest.json if present. As there's no manifest.json, type detection\n    will be attempted to be inferred by package layout.`),\n};\n\nexport const MULITPLE_MANIFESTS = {\n  code: 'MULITPLE_MANIFESTS',\n  legacyCode: [\n    'typedetection',\n    'detect_type',\n    'install_rdf_and_manifest_json',\n  ],\n  message: _('Both install_rdf and manifest.json found'),\n  description: _(singleLineString`The type should be determined by\n    manifest.json if present. Both install_rdf and manifest_json\n    are defined.`),\n};\n\nexport const TYPE_NOT_DETERMINED = {\n  code: 'TYPE_NOT_DETERMINED',\n  legacyCode: [\n    'main',\n    'test_package',\n    'undeterminable_type',\n  ],\n  message: _('Unable to determine add-on type'),\n  description: _(singleLineString`The type detection algorithm could not\n    determine the type of the add-on.`),\n};\n\nexport const FILE_TOO_LARGE = {\n  code: 'FILE_TOO_LARGE',\n  legacyCode: null,\n  message: _('File is too large to parse.'),\n  description: _(singleLineString`This file is not binary and is too large to\n    parse. Files larger than ${MAX_FILE_SIZE_TO_PARSE_MB}MB will not be\n    parsed. If your JavaScript file has a large list, consider removing the\n    list and loading it as a separate JSON file instead.`),\n};\n\nexport const HIDDEN_FILE = {\n  code: 'HIDDEN_FILE',\n  legacyCode: [\n    'testcases_content',\n    'test_packed_packages',\n    'hidden_files',\n  ],\n  message: _('Hidden file flagged'),\n  description: _(singleLineString`Hidden files complicate the\n    review process and can contain sensitive information about the system that\n    generated the add-on. Please modify the packaging process so that these\n    files aren't included.`),\n};\n\nexport const FLAGGED_FILE = {\n  code: 'FLAGGED_FILE',\n  legacyCode: [\n    'testcases_content',\n    'test_packaged_packages',\n    'flagged_files',\n  ],\n  message: _('Flagged filename found'),\n  description: _(singleLineString`Files were found that are either unnecessary\n    or have been included unintentionally. They should be removed.`),\n};\n\nexport const FLAGGED_FILE_EXTENSION = {\n  code: 'FLAGGED_FILE_EXTENSION',\n  legacyCode: [\n    'testcases_content',\n    'test_blacklisted_files',\n    'disallowed_extension',\n  ],\n  message: _('Flagged file extensions found'),\n  description: _(singleLineString`Files were found that are either unnecessary\n    or have been included unintentionally. They should be removed.`),\n};\n\nexport const FLAGGED_FILE_TYPE = {\n  code: 'FLAGGED_FILE_TYPE',\n  legacyCode: [\n    'testcases_packagelayout',\n    'test_blacklisted_files',\n    'disallowed_file_type',\n  ],\n  message: _('Flagged file type found'),\n  description: _(singleLineString`Files whose names end with flagged extensions\n    have been found in the add-on. The extension of these files are flagged\n    because they usually identify binary components. Please see\n    https://bit.ly/review-policy for more information on the binary content\n    review process.`),\n};\n\nexport const ALREADY_SIGNED = {\n  code: 'ALREADY_SIGNED',\n  legacyCode: null,\n  message: _('Package already signed'),\n  description: _(singleLineString`Add-ons which are already signed will be\n    re-signed when published on AMO. This will replace any existing signatures\n    on the add-on.`),\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/messages/layout.js\n **/","import { gettext as _, singleLineString } from 'utils';\nimport { MANIFEST_JSON } from 'const';\n\n\nexport const MANIFEST_FIELD_REQUIRED = {\n  code: 'MANIFEST_FIELD_REQUIRED',\n  legacyCode: null,\n  message: _('The field is required.'),\n  description: _('See https://mzl.la/1ZOhoEN (MDN Docs) for more information.'),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_FIELD_INVALID = {\n  code: 'MANIFEST_FIELD_INVALID',\n  legacyCode: null,\n  message: _('The field is invalid.'),\n  description: _('See https://mzl.la/1ZOhoEN (MDN Docs) for more information.'),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_BAD_PERMISSION = {\n  code: 'MANIFEST_BAD_PERMISSION',\n  legacyCode: null,\n  message: _('The permission type is unsupported.'),\n  description: _(singleLineString`Permissions must be strings. If a permission\n    is an object, it's likely from a Chrome App Extension and will not work in\n    Firefox. See https://mzl.la/1R1n1t0 (MDN Docs) for more information.`),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_PERMISSIONS = {\n  code: 'MANIFEST_PERMISSIONS',\n  legacyCode: null,\n  message: _('Unknown permission.'),\n  description: _('See https://mzl.la/1R1n1t0 (MDN Docs) for more information.'),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_VERSION_INVALID = {\n  code: 'MANIFEST_VERSION_INVALID',\n  legacyCode: null,\n  message: _('\"manifest_version\" in the manifest.json is not a valid value'),\n  description: _('See https://mzl.la/20PenXl (MDN Docs) for more information.'),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_CSP = {\n  code: 'MANIFEST_CSP',\n  legacyCode: null,\n  message: _('\"content_security_policy\" is defined in the manifest.json'),\n  description: _('A custom content_security_policy needs additional review.'),\n  file: MANIFEST_CSP,\n};\n\nexport const PROP_NAME_INVALID = {\n  code: 'PROP_NAME_INVALID',\n  legacyCode: null,\n  message: _('The \"name\" property must be a string.'),\n  description: _('See http://mzl.la/1STmr48 (MDN Docs) for more information.'),\n  file: MANIFEST_JSON,\n};\n\nexport const PROP_VERSION_INVALID = {\n  code: 'PROP_VERSION_INVALID',\n  legacyCode: null,\n  message: _('The \"version\" property must be a string.'),\n  description: _('See http://mzl.la/1kXIADa (MDN Docs) for more information.'),\n  file: MANIFEST_JSON,\n};\n\nexport const PROP_VERSION_TOOLKIT_ONLY = {\n  code: 'PROP_VERSION_TOOLKIT_ONLY',\n  legacyCode: null,\n  message: _('The \"version\" property uses a Firefox-specific format.'),\n  description: _('See http://mzl.la/1kXIADa (MDN Docs) for more information.'),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_UPDATE_URL = {\n  code: 'MANIFEST_UPDATE_URL',\n  legacyCode: null,\n  message: _('\"update_url\" is not allowed.'),\n  description: _(singleLineString`\"applications.gecko.update_url\" is not allowed\n    for Mozilla-hosted add-ons.`),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_UNUSED_UPDATE = {\n  code: 'MANIFEST_UNUSED_UPDATE',\n  legacyCode: null,\n  message: _('The \"update_url\" property is not used by Firefox.'),\n  description: _(singleLineString`The \"update_url\" is not used by Firefox in\n    the root of a manifest; your add-on will be updated via the Add-ons\n    site and not your \"update_url\". See: https://mzl.la/25zqk4O`),\n  file: MANIFEST_JSON,\n};\n\nexport function manifestPropMissing(property) {\n  return {\n    code: `PROP_${property.toUpperCase()}_MISSING`,\n    legacyCode: null,\n    message: _(`No \"${property}\" property found in manifest.json`),\n    description: _(`\"${property}\" is required`),\n    file: MANIFEST_JSON,\n  };\n}\n\nexport const PROP_NAME_MISSING = manifestPropMissing('name');\nexport const PROP_VERSION_MISSING = manifestPropMissing('version');\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/messages/manifestjson.js\n **/","import { gettext as _, singleLineString } from 'utils';\nimport { INSTALL_RDF } from 'const';\n\n\nexport var _tagNotAllowed = (tagName) => {\n  return {\n    code: `TAG_NOT_ALLOWED_${tagName.toUpperCase()}`,\n    // Non-unique err_id so setting to null\n    // ('testcases_installrdf', '_test_rdf', 'shouldnt_exist')\n    legacyCode: null,\n    message: _(`<${tagName}> tag is not allowed`),\n    description: _(singleLineString`Your RDF file contains the <${tagName}> tag,\n      which is not allowed in an Add-on.`),\n  };\n};\n\nexport var _tagNotAllowedIfTag = (tagName, otherTag) => {\n  return {\n    code: `TAG_NOT_ALLOWED_${tagName.toUpperCase()}`,\n    // Non-unique err_id so setting to null\n    // ('testcases_installrdf', '_test_rdf', 'shouldnt_exist')\n    legacyCode: null,\n    message: _(`<${tagName}> cannot be used with <${otherTag}>`),\n    description: _(singleLineString`Your RDF file contains the <${tagName}> tag,\n      which cannot be used with a <${otherTag}> tag.`),\n  };\n};\n\nexport var _tagObsolete = (tagName) => {\n  return {\n    code: `TAG_OBSOLETE_${tagName.toUpperCase()}`,\n    // Non-unique err_id so setting to null\n    // ('testcases_installrdf', '_test_rdf', 'shouldnt_exist')\n    legacyCode: null,\n    message: _(`<${tagName}> tag is obsolete`),\n    description: _(singleLineString`Your RDF file contains the <${tagName}> tag,\n      which is obsolete.`),\n  };\n};\n\nexport const RDF_GUID_TOO_LONG = {\n  code: 'RDF_GUID_TOO_LONG',\n  legacyCode: null,\n  message: _('GUID is too long (over 255 chars)'),\n  description: _(singleLineString`A GUID must be 255 characters or less.\n    Please use a shorter GUID.`),\n  file: INSTALL_RDF,\n};\n\nexport const TAG_NOT_ALLOWED_HIDDEN = _tagNotAllowed('hidden');\nexport const TAG_NOT_ALLOWED_UPDATEKEY = _tagNotAllowedIfTag('updateKey',\n                                                             'listed');\nexport const TAG_NOT_ALLOWED_UPDATEURL = _tagNotAllowedIfTag('updateURL',\n                                                             'listed');\nexport const TAG_OBSOLETE_FILE = _tagObsolete('file');\nexport const TAG_OBSOLETE_REQUIRES = _tagObsolete('requires');\nexport const TAG_OBSOLETE_SKIN = _tagObsolete('skin');\n\nexport const RDF_TYPE_INVALID = {\n  code: 'RDF_TYPE_INVALID',\n  legacyCode: [\n    'typedetection',\n    'detect_type',\n    'invalid_em_type',\n  ],\n  message: _('Invalid <em:type> value'),\n  description: _(singleLineString`The only valid values for <em:type>\n    are 2, 4, 8, and 32. Any other values are either invalid or\n    deprecated.`),\n  file: INSTALL_RDF,\n};\n\nexport const RDF_TYPE_MISSING = {\n  code: 'RDF_TYPE_MISSING',\n  legacyCode: [\n    'typedetection',\n    'detect_type',\n    'no_em:type',\n  ],\n  message: _('No <em:type> element found in install.rdf'),\n  description: _(singleLineString`It isn't always required, but it is\n    the most reliable method for determining add-on type.`),\n  file: INSTALL_RDF,\n};\n\nexport function rdfTopLevelTagMissing(tagName) {\n  return {\n    code: `RDF_${tagName.toUpperCase()}_MISSING`,\n    legacyCode: null,\n    message: _(`No <em:${tagName}> element at the top level of install.rdf`),\n    description: _(`<em:${tagName}> at the top level is required`),\n    file: INSTALL_RDF,\n  };\n}\n\nexport const RDF_NAME_MISSING = rdfTopLevelTagMissing('name');\nexport const RDF_VERSION_MISSING = rdfTopLevelTagMissing('version');\nexport const RDF_ID_MISSING = rdfTopLevelTagMissing('id');\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/messages/rdf.js\n **/","import { default as Message } from 'message';\nimport * as constants from 'const';\n\n// \"I have a display case ready and waiting for our newest acquisitions!\"\n// --Taneleer Tivan\n\n\nexport default class Collector {\n\n  constructor() {\n    for (let type of constants.MESSAGE_TYPES) {\n      this[`${type}s`] = [];\n    }\n  }\n\n  get length() {\n    var len = 0;\n    for (let type of constants.MESSAGE_TYPES) {\n      len += this[`${type}s`].length;\n    }\n    return len;\n  }\n\n  _addMessage(type, opts, _Message=Message) {\n    // Message will throw for incorrect types.\n    // we have a test to ensure that is the case.\n    var message = new _Message(type, opts);\n    var list = this[`${type}s`];\n    if (typeof list === 'undefined') {\n      throw new Error(`Message type \"${type}\" not currently collected`);\n    }\n    list.push(message);\n  }\n\n  addError(opts) {\n    this._addMessage(constants.VALIDATION_ERROR, opts);\n  }\n\n  addNotice(opts) {\n    this._addMessage(constants.VALIDATION_NOTICE, opts);\n  }\n\n  addWarning(opts) {\n    this._addMessage(constants.VALIDATION_WARNING, opts);\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/collector.js\n **/","import { MESSAGE_TYPES } from 'const';\nimport { singleLineString } from 'utils';\n\n\n// These are the props we expect to pull out of\n// the data object passed to the Message constructor.\nexport var props = [\n  'code',\n  'message',\n  'description',\n  'column',\n  'file',\n  'line',\n];\n\nexport var requiredProps = [\n  'code',\n  'message',\n  'description',\n];\n\nexport default class Message {\n\n  constructor(type, data={}) {\n    this.type = type;\n\n    if (data.hasOwnProperty('filename')) {\n      throw new Error('The key for the file is \"file\" not \"filename\"');\n    }\n\n    for (let prop of props) {\n      this[prop] = data[prop];\n    }\n    var missingProps = [];\n    for (let prop of requiredProps) {\n      if (typeof this[prop] === 'undefined') {\n        missingProps.push(prop);\n      }\n    }\n    if (missingProps.length) {\n      throw new Error(singleLineString`Message data object is missing the\n        following props: ${missingProps.join(', ')}`);\n    }\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  set type(type) {\n    if (!MESSAGE_TYPES.includes(type)) {\n      throw new Error(singleLineString`Message type \"${type}\"\n        is not one of ${MESSAGE_TYPES.join(', ')}`);\n    }\n    this._type = type;\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/message.js\n **/","import { ADDON_TYPE_MAP, RDF_DEFAULT_NAMESPACE } from 'const';\nimport * as messages from 'messages';\nimport log from 'logger';\nimport { singleLineString } from 'utils';\n\n\nexport default class InstallRdfParser {\n\n  constructor(xmlDoc, collector, {namespace=RDF_DEFAULT_NAMESPACE}={}) {\n    this.xmlDoc = xmlDoc;\n    // Provides ability to directly add messages to\n    // the collector.\n    this.collector = collector;\n    this.namespace = namespace;\n  }\n\n  getMetadata() {\n    return Promise.resolve({\n      guid: this._getGUID(),\n      name: this._getName(),\n      type: this._getAddonType(),\n      version: this._getVersion(),\n      restartless: this._getIsBootstrapped(),\n    });\n  }\n\n  /*\n   * Convert a nodeList to an Array.\n   */\n  _makeArray(nodeList) {\n    return Array.prototype.slice.call(nodeList);\n  }\n\n  /*\n   * Gets topLevel tags e.g. RDF -> Description -> tag\n   */\n  _getTopLevelNodesByTag(tagName) {\n    var descriptionTag = this._getDescriptionNode();\n    return this._makeArray(descriptionTag.childNodes)\n      .filter((node) => node.nodeName === tagName);\n  }\n\n  _getTopLevelNodeByTag(tag) {\n    var nodes = this._getTopLevelNodesByTag(tag);\n    // Throw an error if there's more than one node as these\n    // should be unique.\n    if (nodes.length > 1) {\n      throw new Error(`Multiple <${tag}> elements found`);\n    }\n    return nodes[0];\n  }\n\n  _getRDFNode() {\n    var rdfNodes = this.xmlDoc.getElementsByTagName('RDF');\n    if (!rdfNodes.length) {\n      throw new Error('RDF Node is not defined');\n    }\n    if (rdfNodes.length > 1) {\n      throw new Error('Multiple RDF tags found');\n    }\n    return rdfNodes[0];\n  }\n\n  _getDescriptionNode() {\n    var rdfNode = this._getRDFNode();\n    var descriptionNodes = Array.prototype.slice.call(rdfNode.childNodes)\n      .filter((node) => node.nodeName === 'Description');\n    if (descriptionNodes.length > 1) {\n      throw new Error(singleLineString`RDF node should only have a\n        single descendant <Description>`);\n    }\n    return descriptionNodes[0];\n  }\n\n  _getNodeValue(node) {\n    if (node && node.firstChild && node.firstChild.nodeValue) {\n      return node.firstChild.nodeValue;\n    }\n    return null;\n  }\n\n  _getAddonType() {\n    var addonType = null;\n    var node = this._getTopLevelNodeByTag('em:type');\n\n    if (node && node.firstChild && node.firstChild.nodeValue) {\n      var typeValue = node.firstChild.nodeValue;\n      if (!ADDON_TYPE_MAP.hasOwnProperty(typeValue)) {\n        log.debug('Invalid type value \"%s\"', typeValue);\n        this.collector.addError(messages.RDF_TYPE_INVALID);\n      } else {\n        addonType = ADDON_TYPE_MAP[typeValue];\n        log.debug('Mapping original <em:type> value \"%s\" -> \"%s\"',\n                  typeValue, addonType);\n      }\n    } else {\n      log.warn('<em:type> was not found in install.rdf');\n      this.collector.addNotice(messages.RDF_TYPE_MISSING);\n    }\n    return addonType;\n  }\n\n  _getIsBootstrapped() {\n    return this._getNodeValue(\n      this._getTopLevelNodeByTag('em:bootstrap')) === 'true';\n  }\n\n  _getGUID() {\n    // Install.rdf only.\n    var guid = this._getNodeValue(this._getTopLevelNodeByTag('em:id'));\n    if (!guid) {\n      this.collector.addError(messages.RDF_ID_MISSING);\n    }\n    if (guid && guid.length > 255) {\n      this.collector.addError(messages.RDF_GUID_TOO_LONG);\n    }\n    return guid;\n  }\n\n  _getName() {\n    var name = this._getNodeValue(this._getTopLevelNodeByTag('em:name'));\n    if (name === null) {\n      this.collector.addError(messages.RDF_NAME_MISSING);\n    }\n    return name;\n  }\n\n  _getVersion() {\n    var version = this._getNodeValue(this._getTopLevelNodeByTag('em:version'));\n    if (version === null) {\n      this.collector.addError(messages.RDF_VERSION_MISSING);\n    }\n    return version;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/parsers/installrdf.js\n **/","import RJSON from 'relaxed-json';\nimport validate from 'schema/validator';\n\nimport { getConfig } from 'cli';\nimport { MANIFEST_JSON, PACKAGE_EXTENSION } from 'const';\nimport log from 'logger';\nimport * as messages from 'messages';\nimport JSONParser from 'parsers/json';\nimport { isToolkitVersionString } from 'schema/formats';\nimport { singleLineString } from 'utils';\n\n\nexport default class ManifestJSONParser extends JSONParser {\n\n  constructor(jsonString, collector, {\n    filename=MANIFEST_JSON, RelaxedJSON=RJSON,\n    selfHosted=getConfig().argv.selfHosted,\n  }={}) {\n    super(jsonString, collector, { filename: filename });\n\n    this.parse(RelaxedJSON);\n\n    // Set up some defaults in case parsing fails.\n    if (typeof this.parsedJSON === 'undefined' || this.isValid === false) {\n      this.parsedJSON = {\n        manifestVersion: null,\n        name: null,\n        type: PACKAGE_EXTENSION,\n        version: null,\n      };\n    } else {\n      // We've parsed the JSON; now we can validate the manifest.\n      this.selfHosted = selfHosted;\n\n      this._validate();\n    }\n  }\n\n  errorLookup(error) {\n    // This is the default message.\n    var baseObject = messages.JSON_INVALID;\n\n    // This is the default from webextension-manifest-schema, but it's not a\n    // super helpful error. We'll tidy it up a bit:\n    if (error && error.message) {\n      let lowerCaseMessage = error.message.toLowerCase();\n      if (lowerCaseMessage === 'should not have additional properties') {\n        error.message = 'is not a valid key or has invalid extra properties';\n      }\n    }\n\n    var overrides = {\n      message: `\"${error.dataPath}\" ${error.message}`,\n    };\n\n    if (error.keyword === 'required') {\n      baseObject = messages.MANIFEST_FIELD_REQUIRED;\n    } else if (error.dataPath.startsWith('/permissions') &&\n               typeof error.data !== 'undefined' &&\n               typeof error.data !== 'string') {\n      // Check for non-strings in the manifest permissions; these indicate\n      // a Chrome app extension. This means an error.\n      baseObject = messages.MANIFEST_BAD_PERMISSION;\n      overrides = {};\n    } else if (error.keyword === 'type') {\n      baseObject = messages.MANIFEST_FIELD_INVALID;\n    }\n\n    // Arrays can be extremely verbose, this tries to make them a little\n    // more sane. Using a regex because there will likely be more as we\n    // expand the schema.\n    var match = error.dataPath.match(/^\\/(permissions)\\/([\\d+])/);\n    if (match && baseObject.code !== messages.MANIFEST_BAD_PERMISSION.code) {\n      baseObject = messages[`MANIFEST_${match[1].toUpperCase()}`];\n      overrides.message = singleLineString`/${match[1]}: Unknown ${match[1]}\n          \"${error.data}\" at ${match[2]}.`;\n    }\n\n    return Object.assign({}, baseObject, overrides);\n  }\n\n  _validate() {\n    // Not all messages returned by the schema are fatal to Firefox, messages\n    // that are just warnings should be added to this array.\n    var warnings = [messages.MANIFEST_PERMISSIONS.code];\n\n    this.isValid = validate(this.parsedJSON);\n    if (!this.isValid) {\n      log.debug('Schema Validation messages', validate.errors);\n      var errorsFound = [];\n\n      for (let error of validate.errors) {\n        // Ensure that we only add one error on a field. This runs the risk\n        // of hiding errors, but means that we can aim to get to a more\n        // helpful error in the case of some rather verbose schema errors.\n        if (errorsFound.indexOf(error.dataPath) > -1) {\n          continue;\n        }\n\n        var message = this.errorLookup(error);\n        errorsFound.push(error.dataPath);\n\n        if (warnings.includes(message.code)) {\n          this.collector.addWarning(message);\n        } else {\n          this.collector.addError(message);\n        }\n\n        // Add-ons with bad permissions will fail to install in Firefox, so\n        // we consider them invalid.\n        if (message.code === messages.MANIFEST_BAD_PERMISSION.code) {\n          this.isValid = false;\n        }\n      }\n    }\n\n    if (this.parsedJSON.content_security_policy) {\n      this.collector.addWarning(messages.MANIFEST_CSP);\n    }\n\n    if (this.parsedJSON.update_url) {\n      this.collector.addNotice(messages.MANIFEST_UNUSED_UPDATE);\n    }\n\n    if (!this.selfHosted && this.parsedJSON.applications &&\n        this.parsedJSON.applications.gecko &&\n        this.parsedJSON.applications.gecko.update_url) {\n      this.collector.addError(messages.MANIFEST_UPDATE_URL);\n      this.isValid = false;\n    }\n\n    if (isToolkitVersionString(this.parsedJSON.version)) {\n      this.collector.addNotice(messages.PROP_VERSION_TOOLKIT_ONLY);\n    }\n  }\n\n  getAddonId() {\n    try {\n      var id = this.parsedJSON.applications.gecko.id;\n      return typeof id === 'undefined' ? null : id;\n    } catch (e) {\n      log.error('Failed to get the id from the manifest.');\n      return null;\n    }\n  }\n\n  getMetadata() {\n    return {\n      id: this.getAddonId(),\n      manifestVersion: this.parsedJSON.manifest_version,\n      name: this.parsedJSON.name,\n      type: PACKAGE_EXTENSION,\n      version: this.parsedJSON.version,\n    };\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/parsers/manifestjson.js\n **/","module.exports = require(\"relaxed-json\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"relaxed-json\"\n ** module id = 33\n ** module chunks = 0\n **/","import ajv from 'ajv';\nimport { isRelativeURL, isValidVersionString } from './formats';\n\nexport var schemaObject = require('json!schema/manifest-schema');\n\nvar validator = ajv({\n  allErrors: true,\n  errorDataPath: 'property',\n  jsonPointers: true,\n  verbose: true,\n});\nvalidator.addFormat('versionString', isValidVersionString);\nvalidator.addFormat('relativeURL', isRelativeURL);\n\nexport default validator.compile(schemaObject);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/schema/validator.js\n **/","module.exports = require(\"ajv\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ajv\"\n ** module id = 35\n ** module chunks = 0\n **/","import parse from 'url-parse';\n\nconst VALIDNUMRX = /^[0-9]{1,5}$/;\n\n// Firefox's version format is laxer than Chrome's, it accepts:\n// https://developer.mozilla.org/en-US/docs/Toolkit_version_format\n// We choose a slightly restricted version of that format (but still more\n// permissive than Chrome) to allow Beta addons, per:\n// https://developer.mozilla.org/en-US/Add-ons/AMO/Policy/Maintenance\nconst TOOLKIT_VERSION_REGEX = /^(\\d+\\.?){1,3}\\.(\\d+([A-z]+(\\-?[\\dA-z]+)?))$/;\n\nexport function isToolkitVersionString(version) {\n  return TOOLKIT_VERSION_REGEX.test(version) && isValidVersionString(version);\n}\n\nexport function isValidVersionString(version) {\n  // We should be starting with a string.\n  if (typeof version !== 'string') {\n    return false;\n  }\n  // If valid toolkit version string, return true early\n  if (TOOLKIT_VERSION_REGEX.test(version)) {\n    return true;\n  }\n  var parts = version.split('.');\n  if (parts.length > 4) {\n    return false;\n  }\n  for (var part of parts) {\n    // Leading or multiple zeros not allowed.\n    if (part.startsWith('0') && part.length > 1) {\n      return false;\n    }\n    // Disallow things like 123e5 which parseInt will convert.\n    if (!VALIDNUMRX.test(part)) {\n      return false;\n    }\n    part = parseInt(part, 10);\n    if (Number.isNaN(part) || part < 0 || part > 65535) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function isRelativeURL(url) {\n  let parsed = parse(url);\n\n  if (parsed.protocol !== '' || parsed.href.startsWith('//')) {\n    return false;\n  }\n\n  return true;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/schema/formats.js\n **/","module.exports = require(\"url-parse\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"url-parse\"\n ** module id = 37\n ** module chunks = 0\n **/","module.exports = {\n\t\"$schema\": \"http://json-schema.org/draft-04/schema#\",\n\t\"id\": \"http://jsonschema.net\",\n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"applications\": {\n\t\t\t\"type\": \"object\",\n\t\t\t\"properties\": {\n\t\t\t\t\"gecko\": {\n\t\t\t\t\t\"type\": \"object\",\n\t\t\t\t\t\"properties\": {\n\t\t\t\t\t\t\"id\": {\n\t\t\t\t\t\t\t\"description\": \"id is the extension ID. Optional. See https://developer.mozilla.org/Add-ons/Install_Manifests#id\",\n\t\t\t\t\t\t\t\"pattern\": \"^{[A-Fa-f0-9]{8}-([A-Fa-f0-9]{4}-){3}[A-Fa-f0-9]{12}}$|^[A-Za-z0-9-._]*\\\\@[A-Za-z0-9-._]+$\",\n\t\t\t\t\t\t\t\"type\": \"string\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"strict_min_version\": {\n\t\t\t\t\t\t\t\"default\": \"42a1\",\n\t\t\t\t\t\t\t\"description\": \"Minimum version of Gecko to support. Defaults to '42a1'. (Requires Gecko 45)\",\n\t\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\t\"pattern\": \"^[0-9]{1,3}(\\\\.[a-z0-9]+)+$\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"strict_max_version\": {\n\t\t\t\t\t\t\t\"default\": \"*\",\n\t\t\t\t\t\t\t\"description\": \"Maximum version of Gecko to support. Defaults to '*'. (Requires Gecko 45)\",\n\t\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\t\"pattern\": \"^[0-9]{1,3}(\\\\.[a-z0-9*]+)+$\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"update_url\": {\n\t\t\t\t\t\t\t\"description\": \"Link to an add-on update manifest. (Requires Gecko 45)\",\n\t\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\t\"pattern\": \"^https://.*$\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"name\": {\n\t\t\t\"description\": \"Name of the extension. This is used to identify the extension in the browser's user interface and on sites like addons.mozilla.org.\",\n\t\t\t\"type\": \"string\",\n\t\t\t\"minLength\": 2,\n\t\t\t\"maxLength\": 45\n\t\t},\n\t\t\"homepage_url\": {\n\t\t\t\"description\": \"The URL of the homepage for this add-on. The add-on management page will contain a link to this URL.\",\n\t\t\t\"type\": \"string\",\n\t\t\t\"oneOf\": [\n\t\t\t\t{\n\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\"format\": \"uri\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\"pattern\": \"^__MSG_.*?__$\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t\"icons\": {\n\t\t\t\"description\": \"Icons to be shown in buttons and the add-on management page.\",\n\t\t\t\"type\": \"object\",\n\t\t\t\"patternProperties\": {\n\t\t\t\t\"^[1-9]\\\\d*$\": {\n\t\t\t\t\t\"type\": \"string\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"additionalProperties\": false\n\t\t},\n\t\t\"background\": {\n\t\t\t\"description\": \"This key specifies how background scripts will work.\",\n\t\t\t\"type\": \"object\",\n\t\t\t\"properties\": {\n\t\t\t\t\"scripts\": {\n\t\t\t\t\t\"type\": \"array\",\n\t\t\t\t\t\"items\": {\n\t\t\t\t\t\t\"format\": \"relativeURL\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"page\": {\n\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\"format\": \"relativeURL\"\n\t\t\t\t},\n\t\t\t\t\"persistent\": {\n\t\t\t\t\t\"type\": \"boolean\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"additionalProperties\": false\n\t\t},\n\t\t\"manifest_version\": {\n\t\t\t\"description\": \"This key specifies the version of manifest.json used by this extension. Currently, this must always be 2.\",\n\t\t\t\"minimum\": 2,\n\t\t\t\"maximum\": 2,\n\t\t\t\"type\": \"integer\"\n\t\t},\n\t\t\"version\": {\n\t\t\t\"$ref\": \"#/definitions/versionString\"\n\t\t},\n\t\t\"permissions\": {\n\t\t\t\"description\": \"Permissions allowed for the extension\",\n\t\t\t\"type\": \"array\",\n\t\t\t\"uniqueItems\": true,\n\t\t\t\"items\": {\n\t\t\t\t\"anyOf\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\"enum\": [\n\t\t\t\t\t\t\t\"activeTab\",\n\t\t\t\t\t\t\t\"alarms\",\n\t\t\t\t\t\t\t\"bookmarks\",\n\t\t\t\t\t\t\t\"contextMenus\",\n\t\t\t\t\t\t\t\"cookies\",\n\t\t\t\t\t\t\t\"downloads\",\n\t\t\t\t\t\t\t\"downloads.open\",\n\t\t\t\t\t\t\t\"downloads.shelf\",\n\t\t\t\t\t\t\t\"idle\",\n\t\t\t\t\t\t\t\"nativeMessaging\",\n\t\t\t\t\t\t\t\"notifications\",\n\t\t\t\t\t\t\t\"storage\",\n\t\t\t\t\t\t\t\"tabs\",\n\t\t\t\t\t\t\t\"webNavigation\",\n\t\t\t\t\t\t\t\"webRequest\",\n\t\t\t\t\t\t\t\"webRequestBlocking\",\n\t\t\t\t\t\t\t\"<all_urls>\"\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\"pattern\": \"^(https?|file|ftp|app|\\\\*)://(\\\\*|\\\\*\\\\.[^*/]+|[^*/]+)/.*$\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\"pattern\": \"^file:///.*$\"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\t\"web_accessible_resources\": {\n\t\t\t\"description\": \"Resources accessible to the extension\",\n\t\t\t\"type\": \"array\",\n\t\t\t\"items\": {\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t},\n\t\t\"incognito\": {\n\t\t\t\"description\": \"The behaviour in incognito or private browsing mode\",\n\t\t\t\"type\": \"string\",\n\t\t\t\"pattern\": \"^spanning$\"\n\t\t}\n\t},\n\t\"required\": [\n\t\t\"name\",\n\t\t\"manifest_version\",\n\t\t\"version\"\n\t],\n\t\"definitions\": {\n\t\t\"versionString\": {\n\t\t\t\"format\": \"versionString\",\n\t\t\t\"type\": \"string\",\n\t\t\t\"description\": \"Version string must be a string comprising one to four dot-separated integers (0-65535). E.g: 1.2.3.\"\n\t\t}\n\t}\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/json-loader!./src/schema/manifest-schema.json\n ** module id = 38\n ** module chunks = 0\n **/","import esprima from 'esprima';\nimport RJSON from 'relaxed-json';\n\nimport * as messages from 'messages';\n\nexport default class JSONParser {\n\n  constructor(jsonString, collector, {filename=null}={}) {\n    // Add the JSON string to the object; we'll use this for testing.\n    this._jsonString = jsonString;\n\n    // Provides ability to directly add messages to\n    // the collector.\n    this.collector = collector;\n\n    // Set the filename for this file\n    this.filename = filename;\n\n    // This marks whether a JSON file is valid; in the case of the base JSON\n    // parser, that's just whether it can be parsed and has duplicate keys.\n    this.isValid = null;\n  }\n\n  parse(RelaxedJSON=RJSON) {\n    try {\n      this.parsedJSON = JSON.parse(this._jsonString);\n    } catch (originalError) {\n      // First we'll try to remove comments with esprima;\n      // WebExtension manifests can contain comments, so we'll strip\n      // them out and see if we can parse the JSON.\n      // If not it's just garbage JSON and we error.\n      //\n      // Originally from https://github.com/abarreir/crx2ff/blob/d2b882056f902d751ad05e329efda7eddcb9d268/libs/ext-converter.js#L19-L37\n      var manifestString = `var o = ${this._jsonString}`;\n      try {\n        // This converts the JSON into a real JS object, and removes any\n        // comments from the JS code.\n        // This has some drawbacks because JSON and JS are not _100%_\n        // compatible. This is largely to do with Unicode characters we\n        // wouldn't expect to see in manifests anyway, and it should simply be\n        // a JSON parse error anyway.\n        // See:\n        // http://stackoverflow.com/questions/23752156/are-all-json-objects-also-valid-javascript-objects/23753148#23753148\n        // https://github.com/judofyr/timeless/issues/57#issuecomment-31872462\n        var tokens = esprima.tokenize(manifestString, {comment: true}).slice(3);\n        this._jsonString = tokens.reduce((json, token) => {\n          // Ignore line comments (`// comments`) and just return the existing\n          // json we've built.\n          if (token.type === 'LineComment') {\n            return json;\n          }\n\n          // Block comments are not allowed, so this is an error.\n          if (token.type === 'BlockComment') {\n            this.collector.addError(messages.JSON_BLOCK_COMMENTS);\n            this.isValid = false;\n          }\n\n          return `${json}${token.value}`;\n        }, '');\n\n        // We found block-level comments, so this manifest is not valid.\n        // Don't bother parsing it again.\n        if (this.isValid === false) {\n          return;\n        }\n\n        this.parsedJSON = JSON.parse(this._jsonString);\n      } catch (error) {\n        // There was still an error, so looks like this manifest is actually\n        // invalid.\n        var errorData = Object.assign({}, messages.JSON_INVALID, {\n          file: this.filename,\n          description: error.message,\n        });\n        this.collector.addError(errorData);\n        this.isValid = false;\n        return;\n      }\n    }\n\n    // Check for duplicate keys, which renders the manifest invalid.\n    this._checkForDuplicateKeys(RelaxedJSON);\n\n    // If never marked as invalid, this is a valid JSON file.\n    if (this.isValid !== false) {\n      this.isValid = true;\n    }\n  }\n\n  _checkForDuplicateKeys(RelaxedJSON=RJSON) {\n    try {\n      RelaxedJSON.parse(this._jsonString, { duplicate: true, tolerant: true });\n    } catch (err) {\n      if (err.warnings && err.warnings.length > 0) {\n        for (let error of err.warnings) {\n          if (error.message.startsWith('Duplicate key:')) {\n            let message = Object.assign({}, messages.JSON_DUPLICATE_KEY, {\n              file: this.filename,\n              line: error.line,\n              description: `${error.message} found in JSON`,\n            });\n            this.collector.addError(message);\n            this.isValid = false;\n          }\n        }\n      }\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/parsers/json.js\n **/","module.exports = require(\"esprima\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"esprima\"\n ** module id = 40\n ** module chunks = 0\n **/","import BaseScanner from 'scanners/base';\nimport * as messages from 'messages';\nimport * as constants from 'const';\n\n\nexport default class BinaryScanner extends BaseScanner {\n  static get fileStreamType() {\n    return 'chunk';\n  }\n\n  check(buffer, values) {\n    for (let v in values) {\n      if (values[v] !== buffer[v]) {\n        return;\n      }\n    }\n    this.linterMessages.push(\n      Object.assign({}, messages.FLAGGED_FILE_TYPE, {\n        type: constants.VALIDATION_NOTICE,\n        file: this.filename,\n      })\n    );\n  }\n\n  scan() {\n    var buffer = this.contents;\n    for (let entry of constants.FLAGGED_FILE_MAGIC_NUMBERS) {\n      this.check(buffer, entry);\n    }\n    return Promise.resolve(this.linterMessages);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/scanners/binary.js\n **/","import { ensureFilenameExists, ignorePrivateFunctions } from 'utils';\n\n\nexport default class BaseScanner {\n\n  static get fileResultType() {\n    /*\n    Because each scanner expects a certain kind of data from the\n    io libraries, a string or stream for example, we'll let the\n    scanner define the type of data it expects. Most default to\n    string.\n\n    This can be overridden on the class.\n\n    Because contents is passed to the constructor, we need to be\n    able to access this before the constructor.\n    */\n    return 'string';\n  }\n\n  constructor(contents, filename, options={}) {\n    this.contents = contents;\n    this.filename = filename;\n    this.options = options;\n    this.linterMessages = [];\n    this._defaultRules = [];\n    this._parsedContent = null;\n    this._rulesProcessed = 0;\n\n    ensureFilenameExists(this.filename);\n  }\n\n  scan(_rules=this._defaultRules) {\n    return new Promise((resolve, reject) => {\n      this.getContents()\n        .then((contents) => {\n          var promises = [];\n          // Ignore private functions exported in rule files.\n          //\n          // (These are exported for testing purposes, but we don't want\n          // to include them in our linter's rules.)\n          var rules = ignorePrivateFunctions(_rules);\n\n          for (let rule in rules) {\n            this._rulesProcessed++;\n\n            promises.push(rules[rule](contents, this.filename,\n                                      this.options));\n          }\n\n          return Promise.all(promises);\n        })\n        .then((ruleResults) => {\n          for (let messages of ruleResults) {\n            this.linterMessages = this.linterMessages.concat(messages);\n          }\n\n          resolve(this.linterMessages);\n        })\n        .catch(reject);\n    });\n  }\n\n  getContents() {\n    return new Promise((resolve, reject) => {\n      if (this._parsedContent !== null) {\n        return resolve(this._parsedContent);\n      }\n\n      this._getContents()\n        .then((contents) => {\n          this._parsedContent = contents;\n\n          resolve(this._parsedContent);\n        })\n        .catch(reject);\n    });\n  }\n\n  _getContents() {\n    return Promise.reject(\n      new Error('_getContents is not implemented'));\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/scanners/base.js\n **/","import BaseScanner from 'scanners/base';\nimport ChromeManifestParser from 'parsers/chromemanifest';\nimport * as rules from 'rules/chromemanifest';\n\n\nexport default class ChromeManifestScanner extends BaseScanner {\n\n  _defaultRules = rules;\n\n  static get fileResultType() {\n    return 'stream';\n  }\n\n  _getContents(_ChromeManifestParser=ChromeManifestParser) {\n    var cmParser = new _ChromeManifestParser(this.contents, this.filename);\n    return cmParser.parse();\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/scanners/chromemanifest.js\n **/","import readline from 'readline';\n\n\nexport default class ChromeManifestParser {\n\n  constructor(stream, filename) {\n    this.stream = stream;\n    this.filename = filename;\n    this.triples = null;\n  }\n\n  filterTriples({subject, predicate, object} = {}) {\n    return this.parse()\n      .then((triples) => {\n        return new Promise((resolve) => {\n          var filteredTriples = triples.filter((triple) => {\n            var searches = {subject, predicate, object};\n            for (let key in searches) {\n              let val = searches[key];\n              if (typeof val !== undefined && val === triple[key]) {\n                return true;\n              }\n            }\n          });\n\n          resolve(filteredTriples);\n        });\n      });\n  }\n\n  parse() {\n    return new Promise((resolve) => {\n      if (this.triples !== null) {\n        resolve(this.triples);\n      } else {\n        this.triples = [];\n      }\n\n      var lineCount = 0;\n\n      var rl = readline.createInterface({\n        input: this.stream,\n      });\n\n      rl.on('line', (line) => {\n        lineCount += 1;\n\n        if (line.trim().startsWith('#', 0) === true) {\n          return;\n        }\n\n        var triple = line.split(/\\s+/, 3);\n        if (triple.length === 2) {\n          triple.push('');\n        } else if (triple.length < 3) {\n          return;\n        }\n\n        this.triples.push({\n          subject: triple[0],\n          predicate: triple[1],\n          object: triple[2],\n          line: lineCount,\n          filename: this.filename,\n        });\n      });\n\n      rl.on('close', () => {\n        resolve(this.triples);\n      });\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/parsers/chromemanifest.js\n **/","module.exports = require(\"readline\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"readline\"\n ** module id = 45\n ** module chunks = 0\n **/","export * from './categories';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/chromemanifest/index.js\n **/","import { DANGEROUS_CATEGORY } from 'messages';\nimport { VALIDATION_WARNING } from 'const';\n\n\nexport const DANGEROUS_CATEGORIES = [\n  'JavaScript-global-constructor',\n  'JavaScript-global-constructor-prototype-alias',\n  'JavaScript-global-property',\n  'JavaScript-global-privileged-property',\n  'JavaScript-global-static-nameset',\n  'JavaScript-global-dynamic-nameset',\n  'JavaScript-DOM-class',\n  'JavaScript-DOM-interface',\n];\n\n\nexport function checkCategories(triples, filename) {\n  var validationMessages = [];\n\n  for (let triple of triples) {\n    if (triple.subject === 'category' &&\n        (DANGEROUS_CATEGORIES.includes(triple.predicate) ||\n         (triple.predicate === 'JavaScript' &&\n          triple.object.startsWith('global ') ||\n          triple.object.startsWith('DOM ')))) {\n      var message = Object.assign({}, DANGEROUS_CATEGORY, {\n        file: filename,\n        line: triple.line,\n        type: VALIDATION_WARNING,\n      });\n      validationMessages.push(message);\n    }\n  }\n  return validationMessages;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/chromemanifest/categories.js\n **/","import * as rules from 'rules/css';\nimport * as postcss from 'postcss';\n\nimport BaseScanner from 'scanners/base';\nimport log from 'logger';\nimport { CSS_SYNTAX_ERROR } from 'messages';\nimport { VALIDATION_WARNING } from 'const';\nimport { ignorePrivateFunctions } from 'utils';\n\n\nexport default class CSSScanner extends BaseScanner {\n\n  _defaultRules = rules;\n\n  processCode(cssNode, cssInstruction, _rules=this._defaultRules) {\n\n    var file = this.filename;\n    var cssOptions = Object.assign({}, this.options, {\n      startLine: cssNode.source.start.line,\n      startColumn: cssNode.source.start.column,\n    });\n\n    var info = {\n      file: file,\n      startLine: cssOptions.startLine,\n      startColumn: cssOptions.startColumn,\n    };\n\n    if (cssNode.type === 'comment') {\n      log.debug('Found CSS comment. Skipping', info);\n      return;\n    }\n\n    if (cssNode.type === 'atrule') {\n      log.debug('Processing media rules');\n      if (cssNode.nodes && cssNode.nodes.length) {\n        for (let mediaCssNode of cssNode.nodes) {\n          this.processCode(mediaCssNode, cssInstruction, _rules);\n        }\n      } else {\n        log.debug('No media rules found');\n      }\n      return;\n    }\n\n    log.debug('Passing CSS code to rule function \"%s\"',\n      cssInstruction, info);\n\n    this.linterMessages = this.linterMessages.concat(\n      _rules[cssInstruction](cssNode, file, cssOptions));\n  }\n\n  scan(_rules=this._defaultRules) {\n    return new Promise((resolve, reject) => {\n      this.getContents()\n        .then((ast) => {\n          if (ast && ast.nodes) {\n            var rules = ignorePrivateFunctions(_rules);\n            var nodes = ast.nodes;\n\n            for (let cssInstruction in rules) {\n              this._rulesProcessed++;\n              for (let cssNode of nodes) {\n                this.processCode(cssNode, cssInstruction, rules);\n              }\n            }\n          }\n\n          resolve(this.linterMessages);\n        })\n        .catch(reject);\n    });\n  }\n\n  _getContents(_cssParser=postcss) {\n    return new Promise((resolve, reject) => {\n      try {\n        var rootNode = _cssParser.parse(this.contents, {from: this.filename});\n        return resolve(rootNode);\n      } catch (e) {\n        if (!e.reason || e.name !== 'CssSyntaxError') {\n          return reject(e);\n        } else {\n          this.linterMessages.push(Object.assign({}, CSS_SYNTAX_ERROR, {\n            type: VALIDATION_WARNING,\n            // Use the reason for the error as the message.\n            // e.message includes an absolute path.\n            message: e.reason,\n            column: e.column,\n            line: e.line,\n            // We use our own ref to the file as postcss outputs\n            // absolute paths.\n            file: this.filename,\n          }));\n        }\n\n        // A syntax error has been encounted so it's game over.\n        return resolve(null);\n      }\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/scanners/css.js\n **/","export * from './invalidNesting';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/css/index.js\n **/","import * as messages from 'messages';\n\n\nexport function invalidNesting(cssNode, filename,\n                              {startLine, startColumn}={}) {\n  var messageList = [];\n  if (cssNode.type === 'rule') {\n    for (let node of cssNode.nodes) {\n      if (node.type === 'rule') {\n        messageList.push(\n          Object.assign({}, messages.INVALID_SELECTOR_NESTING, {\n            type: 'warning',\n            line: startLine,\n            column: startColumn,\n            file: filename,\n          }));\n        break;\n      }\n    }\n  }\n  return messageList;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/css/invalidNesting.js\n **/","module.exports = require(\"postcss\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"postcss\"\n ** module id = 51\n ** module chunks = 0\n **/","import BaseScanner from 'scanners/base';\nimport * as messages from 'messages';\nimport * as constants from 'const';\n\n\nexport default class FilenameScanner extends BaseScanner {\n\n  scan() {\n    return new Promise((resolve) => {\n      if (this.filename.match(constants.ALREADY_SIGNED_REGEX)) {\n        this.linterMessages.push(\n          Object.assign({}, messages.ALREADY_SIGNED, {\n            type: constants.VALIDATION_WARNING,\n            file: this.filename,\n          })\n        );\n      } else if (this.filename.match(constants.HIDDEN_FILE_REGEX)) {\n        this.linterMessages.push(\n          Object.assign({}, messages.HIDDEN_FILE, {\n            type: constants.VALIDATION_WARNING,\n            file: this.filename,\n          })\n        );\n      } else if (this.filename.match(constants.FLAGGED_FILE_REGEX)) {\n        this.linterMessages.push(\n          Object.assign({}, messages.FLAGGED_FILE, {\n            type: constants.VALIDATION_WARNING,\n            file: this.filename,\n          })\n        );\n      } else if (this.filename.match(constants.FLAGGED_FILE_EXTENSION_REGEX)) {\n        this.linterMessages.push(\n          Object.assign({}, messages.FLAGGED_FILE_EXTENSION, {\n            type: constants.VALIDATION_WARNING,\n            file: this.filename,\n          })\n        );\n      } else {\n        throw new Error(`Filename didn't match a regex: ${this.filename}.`);\n      }\n      return resolve(this.linterMessages);\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/scanners/filename.js\n **/","import cheerio from 'cheerio';\n\nimport BaseScanner from 'scanners/base';\nimport * as rules from 'rules/html';\n\n\nexport default class HTMLScanner extends BaseScanner {\n\n  _defaultRules = rules;\n\n  _getContents() {\n    return new Promise((resolve) => {\n      var htmlDoc = cheerio.load(this.contents);\n\n      resolve(htmlDoc);\n    });\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/scanners/html.js\n **/","module.exports = require(\"cheerio\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"cheerio\"\n ** module id = 54\n ** module chunks = 0\n **/","export * from './ensureRequiredAttributes';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/html/index.js\n **/","import { HTML_TAGS_WITH_REQUIRED_ATTRIBUTES, VALIDATION_ERROR } from 'const';\nimport * as messages from 'messages';\n\n\nexport function ensureRequiredAttributes($, filename) {\n  return new Promise((resolve) => {\n    var linterMessages = [];\n\n    for (let tag in HTML_TAGS_WITH_REQUIRED_ATTRIBUTES) {\n      linterMessages = linterMessages.concat(\n        _ensureAttributesInTag($, tag, HTML_TAGS_WITH_REQUIRED_ATTRIBUTES[tag],\n                               filename));\n    }\n\n    resolve(linterMessages);\n  });\n}\n\nexport function _ensureAttributesInTag($, tag, attributes, filename) {\n  var linterMessages = [];\n\n  $(tag).each((i, element) => {\n    for (let attributeName of attributes) {\n      var errorCode = `${tag}_REQUIRES_${attributeName}`.toUpperCase();\n\n      if ($(element).attr(attributeName) === undefined) {\n        linterMessages.push({\n          code: errorCode,\n          message: messages[errorCode].message,\n          description: messages[errorCode].description,\n          sourceCode: `<${tag}>`,\n          file: filename,\n          type: VALIDATION_ERROR,\n        });\n      }\n    }\n  });\n\n  return linterMessages;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/html/ensureRequiredAttributes.js\n **/","import ESLint from 'eslint';\n\nimport { ESLINT_RULE_MAPPING, ESLINT_TYPES } from 'const';\nimport * as messages from 'messages';\nimport * as rules from 'rules/javascript';\nimport { ensureFilenameExists, ignorePrivateFunctions,\n         singleLineString } from 'utils';\n\n\nexport default class JavaScriptScanner {\n\n  _defaultRules = rules;\n\n  constructor(code, filename, options={}) {\n    this.code = code;\n    this.filename = filename;\n    this.options = options;\n    this.linterMessages = [];\n    this._rulesProcessed = 0;\n\n    ensureFilenameExists(this.filename);\n  }\n\n  static get fileResultType() {\n    return 'string';\n  }\n\n  scan(_ESLint=ESLint, {\n    _rules=this._defaultRules,\n    _ruleMapping=ESLINT_RULE_MAPPING,\n    _messages=messages,\n  }={}) {\n    return new Promise((resolve) => {\n      // ESLint is synchronous and doesn't accept streams, so we need to\n      // pass it the entire source file as a string.\n      var eslint = _ESLint.linter;\n      var rules = ignorePrivateFunctions(_rules);\n\n      for (let name in rules) {\n        this._rulesProcessed++;\n        eslint.defineRule(name, rules[name]);\n      }\n\n      var report = eslint.verify(this.code, {\n        env: { es6: true },\n        ignore: false,\n        rules: _ruleMapping,\n        settings: {\n          addonMetadata: this.options.addonMetadata,\n        },\n      }, {\n        allowInlineConfig: false,\n        filename: this.filename,\n      });\n\n      for (let message of report) {\n        // Fatal error messages (like SyntaxErrors) are a bit different, we\n        // need to handle them specially.\n        if (message.fatal === true) {\n          message.message = _messages.JS_SYNTAX_ERROR.code;\n        }\n\n        if (typeof message.message === 'undefined') {\n          throw new Error(singleLineString`JS rules must pass a valid message as\n                          the second argument to context.report()`);\n        }\n\n        // Fallback to looking up the message object by the\n        var messageObj = _messages[message.message];\n        var code = message.message;\n\n        this.linterMessages.push({\n          code: code,\n          column: message.column,\n          description: messageObj.description,\n          file: this.filename,\n          line: message.line,\n          message: messageObj.message,\n          sourceCode: message.source,\n          type: ESLINT_TYPES[message.severity],\n        });\n      }\n\n      resolve(this.linterMessages);\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/scanners/javascript.js\n **/","module.exports = require(\"eslint\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"eslint\"\n ** module id = 58\n ** module chunks = 0\n **/","export * from './banned_identifiers';\nexport * from './deprecated_entities';\nexport * from './eval_string_arg';\nexport * from './event_listener_fourth';\nexport * from './global_require_arg';\nexport * from './init_null_arg';\nexport * from './low_level_module';\nexport * from './mozindexeddb';\nexport * from './mozindexeddb_property';\nexport * from './only_prefs_in_defaults';\nexport * from './opendialog_nonlit_uri';\nexport * from './opendialog_remote_uri';\nexport * from './shallow_wrapper';\nexport * from './webextension_api';\nexport * from './widget_module';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/index.js\n **/","import { BANNED_IDENTIFIERS } from 'const';\n\nexport function banned_identifiers(context) {\n  return {\n    Identifier: function(node) {\n      if (BANNED_IDENTIFIERS.includes(node.name)) {\n        return context.report(node, `BANNED_${node.name.toUpperCase()}`);\n      }\n    },\n    MemberExpression: function(node) {\n      if (BANNED_IDENTIFIERS.includes(node.property.name)) {\n        return context.report(node,\n          `BANNED_${node.property.name.toUpperCase()}`);\n      }\n    },\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/banned_identifiers.js\n **/","import { NO_DOCUMENT_WRITE, NSI_DNS_SERVICE_RESOLVE,\n         NSI_SOUND_PLAY, TAB_URL_OVERRIDE } from 'messages';\nimport { getNodeReference } from 'utils';\n\nexport const DEPRECATED_ENTITIES = [\n  {\n    error: NO_DOCUMENT_WRITE,\n    object: 'document',\n    property: 'write',\n  }, {\n    error: NSI_DNS_SERVICE_RESOLVE,\n    object: 'nsIDNSService',\n    property: 'resolve',\n  }, {\n    error: NSI_SOUND_PLAY,\n    object: 'nsISound',\n    property: 'play',\n  }, {\n    error: TAB_URL_OVERRIDE,\n    object: 'NewTabURL',\n    property: 'override',\n  },\n];\n\n\nexport function deprecated_entities(context) {\n  return {\n    CallExpression: function(node) {\n      let referenceNode = getNodeReference(context, node.callee);\n      // We're only looking for calls that look like `foo.bar()`.\n      if (typeof referenceNode.object !== 'undefined' &&\n          referenceNode.property.type === 'Identifier' &&\n          referenceNode.object.type === 'Identifier') {\n\n        let referenceObject = getNodeReference(context, referenceNode.object);\n\n        for (let entity of DEPRECATED_ENTITIES) {\n          // Check to see if the node matches a deprecated entity.\n          if (referenceObject.name === entity.object &&\n              referenceNode.property.name === entity.property) {\n            return context.report(node, entity.error.code);\n          }\n        }\n      }\n    },\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/deprecated_entities.js\n **/","import { EVAL_STRING_ARG } from 'messages/javascript';\nimport { getVariable } from 'utils';\n\nexport function eval_string_arg(context) {\n  return {\n    CallExpression: function(node) {\n      // Check if what's being called is setTimeout or setInterval\n      if (typeof node.callee.property !== 'undefined' &&\n          node.callee.property.type === 'Identifier' &&\n          (node.callee.property.name === 'setTimeout' ||\n           node.callee.property.name === 'setInterval')) {\n\n        // If the first arg is a variable check if it's a function\n        if (node.arguments.length > 0 &&\n            node.arguments[0].type === 'Identifier') {\n          var originalDef = getVariable(context, node.arguments[0].name);\n          if (originalDef && originalDef.type &&\n              originalDef.type !== 'FunctionExpression' &&\n              originalDef.type !== 'ArrowFunctionExpression') {\n            return context.report({node: node, message: EVAL_STRING_ARG.code});\n          } else {\n            return;\n          }\n        // Otherwise just check the type of the variable\n        } else if (node.arguments.length > 0 &&\n            (node.arguments[0].type !== 'FunctionExpression' &&\n             node.arguments[0].type !== 'ArrowFunctionExpression')) {\n          return context.report({node: node, message: EVAL_STRING_ARG.code});\n        }\n      }\n    },\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/eval_string_arg.js\n **/","import { EVENT_LISTENER_FOURTH } from 'messages/javascript';\nimport { getNodeReference } from 'utils';\n\nexport function event_listener_fourth(context) {\n  return {\n    CallExpression: function(node) {\n      let referenceNode = getNodeReference(context, node.callee);\n      if (typeof referenceNode.property !== 'undefined' &&\n          referenceNode.property.type === 'Identifier' &&\n          referenceNode.property.name === 'addEventListener') {\n\n        if (node.arguments.length > 3) {\n          let wantsUntrusted = node.arguments[3];\n          switch (wantsUntrusted.type) {\n            case 'Literal':\n              if (wantsUntrusted.value) {\n                return context.report({\n                  node: node,\n                  message: EVENT_LISTENER_FOURTH.code,\n                });\n              }\n              break;\n            case 'Identifier':\n              referenceNode = getNodeReference(context, wantsUntrusted);\n              if (referenceNode.value) {\n                return context.report({\n                  node: node,\n                  message: EVENT_LISTENER_FOURTH.code,\n                });\n              }\n              break;\n          }\n        }\n      }\n    },\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/event_listener_fourth.js\n **/","import { UNEXPECTED_GLOGAL_ARG } from 'messages';\nimport { getVariable } from 'utils';\n\n/*\n * This rule will detect a global passed to `require()` as the first arg\n *\n */\nexport function global_require_arg(context) {\n  return {\n    CallExpression: function(node) {\n      if (node.callee.name === 'require' &&\n          node.arguments &&\n          node.arguments.length) {\n        var firstArg = node.arguments[0];\n        if (firstArg.type === 'Identifier') {\n          var pathVar = getVariable(context, firstArg.name);\n          if (typeof pathVar === 'undefined') {\n            // We infer this is probably a global.\n            return context.report(node, UNEXPECTED_GLOGAL_ARG.code);\n          }\n        }\n      }\n    },\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/global_require_arg.js\n **/","import { INIT_NULL_ARG } from 'messages/javascript';\nimport { getNodeReference } from 'utils';\n\nexport function init_null_arg(context) {\n  return {\n    CallExpression: function(node) {\n      // Check if what's being called is nsiTransferable.init()\n      if (typeof node.callee !== 'undefined') {\n        let nodeReference = getNodeReference(context, node.callee);\n        let nodeObject = getNodeReference(context, nodeReference.object);\n\n        if (nodeObject === undefined) {\n          return;\n        }\n        if (nodeObject.name === 'nsITransferable' &&\n            nodeReference.property.name === 'init') {\n\n          if (node.arguments.length > 0) {\n            // Get the reference to the first arg and check if it's null.\n            let arg = getNodeReference(context, node.arguments[0]);\n            if (arg.value === null) {\n              return context.report({node: node, message: INIT_NULL_ARG.code});\n            }\n          }\n        }\n      }\n    },\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/init_null_arg.js\n **/","import { LOW_LEVEL_MODULES } from 'const';\nimport { LOW_LEVEL_MODULE } from 'messages';\nimport { getVariable } from 'utils';\n\n\n/*\n * This rule will detect use of `require()` with the first arg being either\n * a literal that matches a restricted module or a var pointing to a literal\n * that matches a restricted value.\n *\n * TODO: This rule should only be run for jetpack.\n * TODO: Check what the requires_chrome feature does in the old code.\n *\n */\nexport function low_level_module(context) {\n  return {\n    CallExpression: function(node) {\n      var requiresLowLevelMod = false;\n      if (node.callee.name === 'require' &&\n          node.arguments &&\n          node.arguments.length) {\n\n        var firstArg = node.arguments[0];\n\n        // Find a literal string value passed to the\n        // the require function.\n        if (firstArg.type === 'Literal' &&\n            LOW_LEVEL_MODULES.includes(firstArg.value)) {\n          requiresLowLevelMod = true;\n        }\n\n        // Detect a var matching the widget module\n        // being passed as the first arg of require().\n        if (firstArg.type === 'Identifier') {\n          var pathVar = getVariable(context, firstArg.name);\n          if (pathVar && pathVar.type === 'Literal' &&\n              LOW_LEVEL_MODULES.includes(pathVar.value)) {\n            requiresLowLevelMod = true;\n          }\n        }\n\n        if (requiresLowLevelMod) {\n          return context.report(node, LOW_LEVEL_MODULE.code);\n        }\n      }\n    },\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/low_level_module.js\n **/","import { MOZINDEXEDDB } from 'messages';\n\nexport function mozindexeddb(context) {\n  return {\n    Identifier: function(node) {\n      // Catches `var foo = mozIndexedDB;`.\n      if (node.name === 'mozIndexedDB' &&\n          node.parent.type !== 'MemberExpression') {\n        return context.report(node, MOZINDEXEDDB.code);\n      }\n    },\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/mozindexeddb.js\n **/","import { MOZINDEXEDDB_PROPERTY } from 'messages';\n\n\nexport function mozindexeddb_property(context) {\n  return {\n    Identifier: function(node) {\n      // Catches `var foo = 'mozIndexedDB'; var myDatabase = window[foo];`.\n      if (node.parent.init && node.parent.init.value === 'mozIndexedDB') {\n        return context.report(node, MOZINDEXEDDB_PROPERTY.code);\n      }\n    },\n    MemberExpression: function(node) {\n      // Catches `var foo = window.mozIndexedDB;` and\n      // `var foo = window['mozIndexedDB'];`.\n      if (node.property.name === 'mozIndexedDB' ||\n          node.property.value === 'mozIndexedDB') {\n        context.report(node, MOZINDEXEDDB_PROPERTY.code);\n      }\n    },\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/mozindexeddb_property.js\n **/","import { ONLY_PREFS_IN_DEFAULTS } from 'messages/javascript';\nimport { getRootExpression } from 'utils';\n\nexport function only_prefs_in_defaults(context) {\n  var filename = context.getFilename();\n\n  // This rule only applies to files in defaults/preferences\n  if (filename.indexOf('defaults/preferences/') === 0) {\n    return {\n      CallExpression: function(node) {\n        var root = getRootExpression(node);\n\n        if (root.name !== 'pref' && root.name !== 'user_pref') {\n          return context.report(node, ONLY_PREFS_IN_DEFAULTS.code);\n        }\n      },\n    };\n  } else {\n    return {};\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/only_prefs_in_defaults.js\n **/","import { OPENDIALOG_NONLIT_URI } from 'messages';\n\n\nexport function opendialog_nonlit_uri(context) {\n  return {\n    CallExpression: function(node) {\n      if (node.callee.type === 'MemberExpression' &&\n          node.callee.property.type === 'Identifier' &&\n          node.callee.property.name === 'openDialog') {\n\n        if (node.arguments.length) {\n          var uri = node.arguments[0];\n          if (uri.type !== 'Literal') {\n            return context.report(node, OPENDIALOG_NONLIT_URI.code);\n          }\n        }\n      }\n    },\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/opendialog_nonlit_uri.js\n **/","import { isLocalUrl } from 'utils';\nimport { OPENDIALOG_REMOTE_URI } from 'messages';\n\n\nexport function opendialog_remote_uri(context) {\n  return {\n    CallExpression: function(node) {\n      if (node.callee.type === 'MemberExpression' &&\n          node.callee.property.type === 'Identifier' &&\n          node.callee.property.name === 'openDialog') {\n\n        if (node.arguments.length) {\n          var uri = node.arguments[0];\n          if (uri.type === 'Literal' &&\n              isLocalUrl(uri.value) === false) {\n            return context.report(node, OPENDIALOG_REMOTE_URI.code);\n          }\n        }\n      }\n    },\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/opendialog_remote_uri.js\n **/","import { SHALLOW_WRAPPER } from 'messages';\n\n\n// This rule is used for older add-ons (non-Jetpack I believe) but honestly\n// it is a bit unclear as the MDN docs on XPCNativeWrapper seem to have moved\n// to XRay: https://developer.mozilla.org/en-US/docs/Xray_vision\n//\n// TODO: Find out more about this rule.\nexport function shallow_wrapper(context) {\n  function _testForShallowWrapper(node) {\n    if (node.callee.name === 'XPCNativeWrapper' &&\n        node.callee.type === 'Identifier') {\n\n      if (node.arguments[0].type === 'Identifier' ||\n          node.arguments[0].type === 'MemberExpression') {\n        return context.report(node, SHALLOW_WRAPPER.code);\n      }\n    }\n  }\n\n  return {\n    CallExpression: _testForShallowWrapper,\n    NewExpression: _testForShallowWrapper,\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/shallow_wrapper.js\n **/","import { DEPRECATED_APIS } from 'const';\nimport { apiToMessage } from '../../utils';\n\nexport function webextension_api(context) {\n  return {\n    MemberExpression: function(node) {\n      if (node.object.object &&\n          ['chrome', 'browser'].includes(node.object.object.name)) {\n        let api = `${node.object.property.name}.${node.property.name}`;\n        if (DEPRECATED_APIS.includes(api)) {\n          return context.report(node, apiToMessage(api));\n        }\n      }\n    },\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/webextension_api.js\n **/","import { DEPREC_SDK_MOD_WIDGET } from 'messages';\nimport { getVariable } from 'utils';\n\nconst WIDGET_PATH = 'sdk/widget';\n\n/*\n * This rule will detect use of `require()` with the first arg being either\n * a literal that matches the widget module or var pointing at a literal.\n *\n * TODO: This rule looks to be related to compat - based on the old tests.\n * TODO: This rule should only be run for jetpack.\n *\n */\nexport function widget_module(context) {\n  return {\n    CallExpression: function(node) {\n      var requiresWidgetMod = false;\n      if (node.callee.name === 'require' &&\n          node.arguments &&\n          node.arguments.length) {\n\n        var firstArg = node.arguments[0];\n\n        // Find a literal string value passed to the\n        // the require function.\n        if (firstArg.type === 'Literal' &&\n            firstArg.value === WIDGET_PATH) {\n          requiresWidgetMod = true;\n        }\n\n        // Detect a var matching the widget module\n        // being passed as the first arg of require().\n        if (firstArg.type === 'Identifier') {\n          var pathVar = getVariable(context, firstArg.name);\n          if (pathVar && pathVar.type === 'Literal' &&\n              pathVar.value === WIDGET_PATH) {\n            requiresWidgetMod = true;\n          }\n        }\n\n        if (requiresWidgetMod) {\n          return context.report(node, DEPREC_SDK_MOD_WIDGET.code);\n        }\n      }\n    },\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/javascript/widget_module.js\n **/","import JSONParser from 'parsers/json';\nimport BaseScanner from 'scanners/base';\n\n\nexport default class JSONScanner extends BaseScanner {\n\n  _getContents() {\n    return Promise.resolve(this.contents);\n  }\n\n  scan() {\n    return this.getContents()\n      .then((json) => {\n        let jsonParser = new JSONParser(json, this.options.collector, {\n          filename: this.filename});\n        jsonParser.parse();\n        return Promise.resolve([]);\n      })\n      .catch((err) => {\n        return Promise.reject(err);\n      });\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/scanners/json.js\n **/","import XMLDom from 'xmldom';\n\nimport { RDF_DEFAULT_NAMESPACE } from 'const';\nimport BaseScanner from 'scanners/base';\nimport * as rules from 'rules/rdf';\n\n\nexport default class RDFScanner extends BaseScanner {\n\n  _defaultRules = rules;\n\n  constructor(contents, filename, options={}) {\n    super(contents, filename, options);\n    // I don't think this ever needs to be different, but if it does we can\n    // extract the em namespace using:\n    //\n    //     this.namespace = this._xmlDoc.documentElement._nsMap.em;\n    //\n    // Inside _getContents.\n    if (typeof this.options.namespace === 'undefined') {\n      this.options.namespace = RDF_DEFAULT_NAMESPACE;\n    }\n  }\n\n  _getContents() {\n    return new Promise((resolve, reject) => {\n      var xmlDoc = new XMLDom.DOMParser({\n        errorHandler: (err) => {\n          reject(new Error(`RDFParseError: ${err}`));\n        },\n      }).parseFromString(this.contents, 'text/xml');\n\n      resolve(xmlDoc);\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/scanners/rdf.js\n **/","module.exports = require(\"xmldom\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"xmldom\"\n ** module id = 77\n ** module chunks = 0\n **/","export * from './mustNotExist';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/rdf/index.js\n **/","import { RDF_OBSOLETE_TAGS, RDF_UNALLOWED_TAGS, RDF_UNALLOWED_IF_LISTED_TAGS,\n  VALIDATION_ERROR, VALIDATION_WARNING } from 'const';\nimport * as messages from 'messages';\n\n\nexport function mustNotExist(xmlDoc, filename, {namespace}={}) {\n  return new Promise((resolve) => {\n    var bannedTags = RDF_UNALLOWED_TAGS;\n    var linterMessages = [];\n\n    var addonIsListed = xmlDoc\n      .getElementsByTagNameNS(namespace, 'listed').length > 0;\n\n    if (addonIsListed) {\n      bannedTags = bannedTags.concat(RDF_UNALLOWED_IF_LISTED_TAGS);\n    }\n\n    // Using any banned tag is an error.\n    linterMessages = linterMessages.concat(\n      _checkForTags({\n        xmlDoc: xmlDoc,\n        namespace: namespace,\n        tags: bannedTags,\n        type: VALIDATION_ERROR,\n        prefix: 'TAG_NOT_ALLOWED_',\n        filename: filename,\n      })\n    );\n\n    // But using an obsolete tag is just a warning.\n    linterMessages = linterMessages.concat(\n      _checkForTags({\n        xmlDoc: xmlDoc,\n        namespace: namespace,\n        tags: RDF_OBSOLETE_TAGS,\n        type: VALIDATION_WARNING,\n        prefix: 'TAG_OBSOLETE_',\n        filename: filename,\n      })\n    );\n\n    resolve(linterMessages);\n  });\n}\n\nexport function _checkForTags({xmlDoc, namespace, tags, type, prefix,\n                               filename} = {}) {\n  var linterMessages = [];\n\n  for (let tag of tags) {\n    let nodeList = xmlDoc.getElementsByTagNameNS(namespace, tag);\n\n    for (let i = 0; i < nodeList.length; i++) {\n      let element = nodeList.item(i);\n      let errorCode = `${prefix}${tag.toUpperCase()}`;\n\n      linterMessages.push({\n        code: errorCode,\n        message: messages[errorCode].message,\n        description: messages[errorCode].description,\n        sourceCode: `<${tag}>`, // Don't really know what to use here.\n        file: filename,\n        line: element.line,\n        column: element.column,\n        type: type,\n      });\n    }\n  }\n\n  return linterMessages;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rules/rdf/mustNotExist.js\n **/","export * from 'io/crx';\nexport * from 'io/directory';\nexport * from 'io/xpi';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/io/index.js\n **/","import fs from 'fs';\n\nimport parseCRX from 'crx-parser';\nimport yauzl from 'yauzl';\n\nimport log from 'logger';\nimport { Xpi } from './xpi';\n\n\n/*\n * A CRX file is just a ZIP file (eg an XPI) with some extra header\n * information. So we handle opening the file with a CRX parser, then treat\n * it like an XPI after that.\n *\n */\nexport class Crx extends Xpi {\n\n  constructor(filePath, zipLib=yauzl, _parseCRX=parseCRX, _fs=fs) {\n    super(filePath, zipLib);\n    this.fs = _fs;\n    this.parseCRX = _parseCRX;\n  }\n\n  open() {\n    return new Promise((resolve, reject) => {\n      // First, read the file manually, as we need to pass the whole thing\n      // to crx-parser.\n      this.fs.readFile(this.path, (err, buffer) => {\n        if (err) {\n          return reject(err);\n        }\n        // Parse out the CRX header data from the actual ZIP contents.\n        this.parseCRX(buffer, (err, data) => {\n          if (err) {\n            return reject(err);\n          }\n\n          log.debug('Obtained zip data from CRX file', data);\n          // Finally we can read in the zip data as a buffer into yauzl.\n          this.zipLib.fromBuffer(data.body, (err, zipFile) => {\n            if (err) {\n              return reject(err);\n            }\n\n            resolve(zipFile);\n          });\n        });\n      });\n    });\n  }\n\n  getFiles(_onEventsSubscribed) {\n    return new Promise((resolve, reject) => {\n      // If we have already processed the file and have data\n      // on this instance return that.\n      if (Object.keys(this.files).length) {\n        return resolve(this.files);\n      }\n\n      return this.open()\n        .then((zipfile) => {\n\n          zipfile.on('entry', (entry) => {\n            this.handleEntry(entry, reject);\n          });\n\n          // We use the 'end' event here because we're reading the CRX in\n          // from a buffer (because we have to unpack the header info from it\n          // first). The 'close' event is never fired when using yauzl's\n          // `fromBuffer()` method.\n          zipfile.on('end', () => {\n            resolve(this.files);\n          });\n\n          if (_onEventsSubscribed) {\n            // Run optional callback when we know the event handlers\n            // have been inited. Useful for testing.\n            if (typeof _onEventsSubscribed === 'function') {\n              _onEventsSubscribed();\n            }\n          }\n        })\n        .catch(reject);\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/io/crx.js\n **/","module.exports = require(\"crx-parser\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"crx-parser\"\n ** module id = 82\n ** module chunks = 0\n **/","module.exports = require(\"yauzl\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"yauzl\"\n ** module id = 83\n ** module chunks = 0\n **/","import yauzl from 'yauzl';\nimport stripBomStream from 'strip-bom-stream';\nimport firstChunkStream from 'first-chunk-stream';\n\nimport { IOBase } from 'io/base';\n\nimport log from 'logger';\nimport { singleLineString } from 'utils';\n\n\n/*\n * Simple Promise wrapper for the Yauzl unzipping lib to unpack add-on .xpis.\n * Note: We're using the autoclose feature of yauzl as a result every operation\n * will open the zip, do something and then close it implicitly.\n * This makes the API easy to use and the consumer doesn't need to remember to\n * close the zipfile.\n *\n */\n\nexport class Xpi extends IOBase {\n\n  constructor(filePath, zipLib=yauzl) {\n    super(filePath);\n    this.zipLib = zipLib;\n  }\n\n  open() {\n    return new Promise((resolve, reject) => {\n      this.zipLib.open(this.path, (err, zipfile) => {\n        if (err) {\n          return reject(err);\n        }\n        resolve(zipfile);\n      });\n    });\n  }\n\n  handleEntry(entry, reject) {\n    if (/\\/$/.test(entry.fileName)) {\n      return;\n    }\n    if (!this.shouldScanFile(entry.fileName)) {\n      log.debug(`Skipping file: ${entry.fileName}`);\n      return;\n    }\n    if (this.entries.includes(entry.fileName)) {\n      log.info('Found duplicate file entry: \"%s\" in package', entry.fileName);\n      reject(new Error(singleLineString`DuplicateZipEntry: Entry\n        \"${entry.fileName}\" has already been seen`));\n    }\n    this.entries.push(entry.fileName);\n    this.files[entry.fileName] = entry;\n  }\n\n  getFiles(_onEventsSubscribed) {\n    return new Promise((resolve, reject) => {\n      // If we have already processed the file and have data\n      // on this instance return that.\n      if (Object.keys(this.files).length) {\n        const wantedFiles = {};\n        Object.keys(this.files).forEach((fileName) => {\n          if (this.shouldScanFile(fileName)) {\n            wantedFiles[fileName] = this.files[fileName];\n          } else {\n            log.debug(`Skipping cached file: ${fileName}`);\n          }\n        });\n        return resolve(wantedFiles);\n      }\n\n      return this.open()\n        .then((zipfile) => {\n\n          zipfile.on('entry', (entry) => {\n            this.handleEntry(entry, reject);\n          });\n\n          // When the last entry has been processed\n          // and the fd is closed resolve the promise.\n          // Note: we cannot use 'end' here as 'end' is fired\n          // after the last entry event is emitted and streams\n          // may still be being read with openReadStream.\n          zipfile.on('close', () => {\n            resolve(this.files);\n          });\n\n          if (_onEventsSubscribed) {\n            // Run optional callback when we know the event handlers\n            // have been inited. Useful for testing.\n            if (typeof _onEventsSubscribed === 'function') {\n              _onEventsSubscribed();\n            }\n          }\n        })\n        .catch(reject);\n    });\n  }\n\n  checkPath(path) {\n    if (!this.files.hasOwnProperty(path)) {\n      throw new Error(`Path \"${path}\" does not exist in this XPI`);\n    }\n\n    if (this.files[path].uncompressedSize > this.maxSizeBytes) {\n      throw new Error(`File \"${path}\" is too large. Aborting.`);\n    }\n  }\n\n  getFileAsStream(path) {\n    return new Promise((resolve, reject) => {\n      this.checkPath(path);\n      return this.open()\n        .then((zipfile) => {\n          zipfile.openReadStream(this.files[path], (err, readStream) => {\n            if (err) {\n              return reject(err);\n            }\n            resolve(readStream.pipe(stripBomStream()));\n          });\n        })\n        .catch(reject);\n    });\n  }\n\n  getFileAsString(path) {\n    return this.getFileAsStream(path)\n      .then((fileStream) => {\n        return new Promise((resolve, reject) => {\n          var fileString = '';\n          fileStream.on('data', (chunk) => {\n            fileString += chunk;\n          });\n\n          // Once the file is assembled, resolve the promise.\n          fileStream.on('end', () => {\n            resolve(fileString);\n          });\n\n          fileStream.on('error', reject);\n        });\n      });\n  }\n\n  getChunkAsBuffer(path, chunkLength) {\n    return new Promise((resolve, reject) => {\n      this.checkPath(path);\n      return this.open()\n        .then((zipfile) => {\n          zipfile.openReadStream(this.files[path], (err, readStream) => {\n            if (err) {\n              return reject(err);\n            }\n            readStream.pipe(\n              firstChunkStream({chunkLength: chunkLength},\n                function(_, enc) {\n                  resolve(enc);\n                }\n              )\n            );\n          });\n        })\n        .catch(reject);\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/io/xpi.js\n **/","module.exports = require(\"strip-bom-stream\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"strip-bom-stream\"\n ** module id = 85\n ** module chunks = 0\n **/","module.exports = require(\"first-chunk-stream\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"first-chunk-stream\"\n ** module id = 86\n ** module chunks = 0\n **/","import { singleLineString } from '../utils';\nimport { FLAGGED_FILE_MAGIC_NUMBERS_LENGTH, MAX_FILE_SIZE_MB } from 'const';\n\n/*\n * Base class for io operations for both an Xpi or\n * a directory\n */\nexport class IOBase {\n\n  constructor(packageOrDirPath) {\n    this.path = packageOrDirPath;\n    this.files = {};\n    this.entries = [];\n    // If this is too large the node process will hit a RangeError\n    // when it runs out of memory.\n    this.maxSizeBytes = 1024 * 1024 * MAX_FILE_SIZE_MB;\n    // A callback that accepts a relative file path and returns\n    // true if the path should be included in results for scanning.\n    this.shouldScanFile = () => true;\n  }\n\n  setScanFileCallback(callback) {\n    if (typeof callback === 'function') {\n      this.shouldScanFile = callback;\n    }\n  }\n\n  getFile(path, fileStreamType='string') {\n    switch (fileStreamType) {\n      case 'stream':\n        return this.getFileAsStream(path);\n      case 'string':\n        return this.getFileAsString(path);\n      case 'chunk':\n        // Assuming that chunk is going to be primarily used for finding magic\n        // numbers in files, then there's no need to have the default be longer\n        // than that.\n        return this.getChunkAsBuffer(path, FLAGGED_FILE_MAGIC_NUMBERS_LENGTH);\n\n      default:\n        throw new Error(singleLineString`Unexpected fileStreamType\n          value \"${fileStreamType}\" should be one of \"string\",\n          \"stream\" or \"chunk\"`);\n    }\n  }\n\n  getFilesByExt(...extensions) {\n\n    for (let ext of extensions) {\n      if (ext.indexOf('.') !== 0) {\n        // We use Promise.reject as we're not inside a `then()` or a\n        // Promise constructor callback.\n        // If we throw here it won't be caught.\n        return Promise.reject(new Error(\"File extension must start with '.'\"));\n      }\n    }\n\n    return this.getFiles()\n      .then((filesObject) => {\n        let files = [];\n\n        for (let filename in filesObject) {\n          for (let ext of extensions) {\n            if (filename.endsWith(ext)) {\n              files.push(filename);\n            }\n          }\n        }\n\n        return files;\n      });\n  }\n\n  getFiles() {\n    return Promise.reject(\n      new Error('getFiles is not implemented'));\n  }\n\n  getFileAsStream() {\n    return Promise.reject(\n      new Error('getFileAsStream is not implemented'));\n  }\n\n  getFileAsString() {\n    return Promise.reject(\n      new Error('getFileAsString is not implemented'));\n  }\n\n  getChunkAsBuffer() {\n    return Promise.reject(\n      new Error('getChunkAsBuffer is not implemented'));\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/io/base.js\n **/","import * as path from 'path';\nimport { createReadStream } from 'fs';\nimport firstChunkStream from 'first-chunk-stream';\nimport stripBomStream from 'strip-bom-stream';\n\nimport { IOBase } from 'io/base';\nimport { walkPromise } from 'io/utils';\n\nimport { singleLineString } from '../utils';\n\n\nimport log from 'logger';\n\n\nexport class Directory extends IOBase {\n\n  getFiles(_walkPromise=walkPromise) {\n\n    // If we have already processed this directory and have data\n    // on this instance return that.\n    if (Object.keys(this.files).length) {\n      log.info(singleLineString`Files already exist for directory\n               \"${this.path}\" returning cached data`);\n      return Promise.resolve(this.files);\n    }\n\n    return _walkPromise(\n      this.path, {\n        shouldIncludePath: (...args) => this.shouldScanFile(...args),\n      })\n      .then((files) => {\n        this.files = files;\n        this.entries = Object.keys(files);\n        return files;\n      });\n  }\n\n  getPath(relativeFilePath) {\n    if (!this.files.hasOwnProperty(relativeFilePath)) {\n      return Promise.reject(\n        new Error(`Path \"${relativeFilePath}\" does not exist in this dir.`));\n    }\n\n    if (this.files[relativeFilePath].size > this.maxSizeBytes) {\n      return Promise.reject(\n        new Error(`File \"${relativeFilePath}\" is too large. Aborting`));\n    }\n\n    var absoluteDirPath = path.resolve(this.path);\n    var filePath = path.resolve(path.join(absoluteDirPath, relativeFilePath));\n\n    // This is belt and braces. Should never happen that a file was in\n    // the files object and yet doesn't meet these requirements.\n    if (!filePath.startsWith(absoluteDirPath) ||\n        relativeFilePath.startsWith('/')) {\n      return Promise.reject(\n        new Error(`Path argument must be relative to ${this.path}`));\n    }\n\n    return Promise.resolve(filePath);\n  }\n\n  getFileAsStream(relativeFilePath) {\n    return this.getPath(relativeFilePath)\n      .then((filePath) => {\n        return Promise.resolve(createReadStream(filePath, {\n          flags: 'r',\n          encoding: 'utf8',\n          autoClose: true,\n        }).pipe(stripBomStream()));\n      });\n  }\n\n  getFileAsString(path) {\n    return this.getFileAsStream(path)\n      .then((readStream) => {\n        return new Promise((resolve, reject) => {\n          var content = '';\n          readStream.on('readable', () => {\n            var chunk;\n            while (null !== (chunk = readStream.read())) {\n              content += chunk.toString();\n            }\n          });\n\n          readStream.on('end', () => {\n            resolve(content);\n          });\n\n          readStream.on('error', reject);\n        });\n      });\n  }\n\n  getChunkAsBuffer(relativeFilePath, chunkLength) {\n    return this.getPath(relativeFilePath)\n      .then((filePath) => {\n        return new Promise((resolve) => {\n          createReadStream(filePath, {\n            flags: 'r',\n            // This is important because you don't want to encode the\n            // bytes if you are doing a binary check.\n            encoding: null,\n            autoClose: true,\n          })\n          .pipe(\n            firstChunkStream({chunkLength: chunkLength},\n              function(_, enc) {\n                resolve(enc);\n              }\n            )\n          );\n        });\n      });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/io/directory.js\n **/","module.exports = require(\"babel-polyfill\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-polyfill\"\n ** module id = 89\n ** module chunks = 0\n **/"],"sourceRoot":""}